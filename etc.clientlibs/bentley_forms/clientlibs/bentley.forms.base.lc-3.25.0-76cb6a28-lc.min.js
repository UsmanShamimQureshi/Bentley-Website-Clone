(function(d){d.bm||(d.bm={});d.bm.by_form_js={}})(window);
(function(d){function l(){this._events={}}d={subscribe:"on",unsubscribe:"off",publish:"trigger"};l.prototype={subscribe:function(b,g,e){var p=this;if(b===Object(b)){for(var d in b)this.subscribe(d,b[d],g);return this}0<=b.indexOf(" ")?b.trim().split(/\s+/).forEach(function(b){p._push(b,g,e)}):this._push(b,g,e);return this},unsubscribe:function(b,g){if(this._events[b]){if(!g)return delete this._events[b],this;this._events[b].some(function(b,e,d){return g===b.callback?(d.splice(e,1),!0):!1})}return this},
publish:function(b){var g=Array.prototype.slice.call(arguments,1);Array.isArray(this._events[b])&&this._events[b].forEach(function(b){b.callback.apply(b.context||b.callback,g)});return this},_push:function(b,g,e){this._events[b]||(this._events[b]=[]);this._events[b].push({callback:g,context:e})}};for(var e in d)d.hasOwnProperty(e)&&(l.prototype[d[e]]=l.prototype[e]);bm.by_form_js.events=new l})(bm.by_form_js);
(function(d){function l(a){return"DIV"===a.tagName.toUpperCase()&&/by_checkboxgroup_item/.test(a.className)}function e(a){return"DIV"===a.tagName.toUpperCase()&&/by_radiogroup_item/.test(a.className)}function b(){return"function"==typeof document.createElement("input").checkValidity}function g(a,c){return a&&(c(a)?a:g(a.parentNode,c))}function n(a){try{var c=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})}catch(m){c=document.createEvent("MouseEvent"),c.initMouseEvent("click",!0,!0,
window,0,0,0,0,0,!1,!1,!1,!1,0,null)}a.querySelectorAll("input.by_form_no_display[type\x3dsubmit]")[0].dispatchEvent(c)}function p(a,c){c||a.setAttribute("data-inline-validation",!1);if("true"!==a.dataset.inlineValidation)return!1;if(b()&&!l(a)&&!e(a)&&!/^(by-m-|by-e-)(\S+)$/i.test(a.tagName))a.addEventListener("focusout",function(c){q(a,!c.currentTarget.checkValidity())}),a.addEventListener("change",function(c){q(a,!c.currentTarget.checkValidity())});else if(l(a)){c=a.parentNode.querySelectorAll("input[type\x3d'checkbox']");
for(var m=0;m<c.length;m++)c[m].addEventListener("change",function(){q(a,!u(a))})}}function u(a){if(!a.parentNode.classList.contains("by_checkboxgroup_validated")||"true"===a.dataset.inlineValidation){a.parentNode.classList.add("by_checkboxgroup_validated");var c=!1;a=a.parentNode.querySelectorAll("input[type\x3d'checkbox']");for(var b=0;b<a.length&&!(c=c||a[b].checked);b++);}return c}function q(a,c){if(l(a)){var b=a.parentNode.querySelectorAll("input[type\x3dcheckbox]");for(a=0;a<b.length;a++)q(b[a],
c)}else if(e(a))for(b=a.parentNode.querySelectorAll("input[type\x3dradio]"),a=0;a<b.length;a++)q(b[a],c);else b=g(a,function(a){return-1<a.className.split(" ").indexOf("by_form_element")}),a=g(a,function(a){return-1<a.className.split(" ").indexOf("by_form_component")}),"undefined"===typeof c||!1!==c?(b.classList.add("by_form_error_reason"),a.classList.add("by_form_error")):(b.classList.remove("by_form_error_reason"),0>=a.querySelectorAll(".by_form_error_reason").length&&a.classList.remove("by_form_error"))}
function v(a,c){var g=!0,d=a.querySelectorAll("[required]"),p=a.querySelectorAll("input:not([type\x3dsubmit]):not([type\x3dbutton]), select, textarea");var f=a.querySelectorAll(".by_form_error, .by_form_error_reason");for(var h=0;h<f.length;h++)c&&(f[h].className=f[h].className.replace(/(by_form_error_reason|by_form_error)/g," "));for(h=0;h<d.length;h++){var k=!0;f=d[h];if(!b()||l(f)||e(f))if(l(f))k=u(f);else if(e(f)){k=void 0;var r=f;if(!r.parentNode.classList.contains("by_radiogroup_validated")){r.parentNode.classList.add("by_radiogroup_validated");
k=!1;r=r.parentNode.querySelectorAll("input[type\x3d'radio']");for(var t=0;t<r.length&&!(k=k||r[t].checked);t++);}}else"SELECT"===f.tagName.toUpperCase()?(k=!0,0===(void 0).options.selectedIndex&&(void 0).options[0].dataset.hasOwnProperty("byRequiredHelper")&&(k=!1)):"CHECKBOX"===(f.getAttribute("type")||"").toUpperCase()&&(k=f.checked),k&&0>=f.value.length&&(k=!1);else k=f.checkValidity();k||(g=!1,c&&q(f))}for(h=0;h<p.length;h++)f=p[h],k=!0,!b()||l(f)||e(f)?("NUMBER"===f.type.toUpperCase()?k=k&&
!isNaN(f.value):"EMAIL"===f.type.toUpperCase()&&(k=/^.*@.*\.*.*$/.test(f.value)),k&&f.hasAttribute("min")&&(k=k&&f.value>=f.min),k&&f.hasAttribute("max")&&(k=k&&f.value<=f.max),k&&f.hasAttribute("pattern")&&(k=k&&(new RegExp(f.pattern)).test(f.value))):k=f.checkValidity(),k||(c&&q(f),g=!1);c=a.querySelectorAll(".by_checkboxgroup_validated");for(h=0;h<c.length;h++)c[h].classList.remove("by_checkboxgroup_validated");c=a.querySelectorAll(".by_radiogroup_validated");for(h=0;h<c.length;h++)c[h].classList.remove("by_radiogroup_validated");
g?a.classList.remove("by_form_validation_failed"):a.classList.add("by_form_validation_failed");return g}d.by_validation=function(a){a=a.querySelectorAll("form.by_form_redesign:not([data-validation-off]):not(.by_form_validation_js_applied)");for(var c=0;c<a.length;c++){a[c].className+=" by_form_validation_js_applied";for(var b="true"===a[c].dataset.inlineValidation,e=a[c].querySelectorAll("[required],[pattern]"),d=0;d<e.length;d++)e[d].addEventListener("keyup",function(a){a.currentTarget.classList.add("by_form_input_edited")}),
p(e[d],b);(function(a){function b(a){null==a.relatedTarget&&q(a.currentTarget,!1)}for(var c=0;c<a.length;c++)a[c].addEventListener("click",b),l(a[c])||(a[c].addEventListener("focus",b),"true"!==a[c].dataset.inlineValidation&&a[c].addEventListener("keyup",b))})(a[c].querySelectorAll("[required],[pattern]"));a[c].querySelectorAll("input.by_form_submit_element")[0].addEventListener("click",function(a){var c=a.currentTarget;a=g(c,function(a){return"FORM"===a.tagName.toUpperCase()});v(a,!0)&&(c.setAttribute("disabled",
""),g(c,function(a){return a.className&&-1<a.className.split(" ").indexOf("by_kmi_form_wrapper")})||(c=document.createElement("div"),c.classList.add("by_loader"),c.style.display="block",a.appendChild(c)),n(a))});a[c].addEventListener("submit",function(a){if(a.currentTarget.classList.contains("by_form_validation_failed"))return a.preventDefault(),!1});a[c].addEventListener("keydown",function(a){var c="TEXTAREA"===a.target.nodeName,b="13"==a.keyCode||"Enter"===a.key,e=g(a.target,function(a){return"FORM"===
a.tagName.toUpperCase()}).querySelector("input.by_form_submit_element"),t=e&&document.activeElement===e;b&&!c&&(a.preventDefault?a.preventDefault():a.returnValue=!1);b&&t&&e.click()})}};d.by_validation.validation=v;d.by_validation.displayError=q;d.by_validation(document.getElementsByTagName("BODY")[0])})(bm.by_form_js);
(function(d){d.by_multidropdown=function(d){function e(b,d){function e(a,c,b){var d=document.createElement("OPTION");d.value=a;d.innerHTML=c;if(b)for(var e in b)d.setAttribute(e,b[e]);return d}function g(a,c){return{el:a[c],options:a[c].querySelectorAll(".by_multiselect_optionholder .by_multiselect_option"),select:a[c].querySelectorAll("select")[0]}}function l(a,c,b){if("undefined"==typeof b||!1===b)for(b=0;b<c.options.length;b++)n={},c.options[b].dataset.hasOwnProperty("byRequiredHelper")&&(n["data-by-required-helper"]=
""),c.options[b].dataset.hasOwnProperty("bySelected")&&(f=n.selected=!0),(c.options[b].dataset.hasOwnProperty("byRequiredHelper")||c.options[b].dataset.hasOwnProperty("byFormModel")&&c.options[b].dataset.byFormModel.toLowerCase()===a.select.value.toLowerCase())&&c.select.appendChild(e(c.options[b].dataset.value,c.options[b].dataset.label,n));else{a.select.innerHTML="";for(b=0;b<c.options.length;b++)if(c.options[b].dataset.hasOwnProperty("bySelected")){var d=c.options[b].dataset.byFormModel;break}for(b=
0;b<a.options.length;b++)if(a.options[b].dataset.hasOwnProperty("byFormModel")&&d===a.options[b].dataset.value||!a.options[b].dataset.hasOwnProperty("byFormModel"))a.select.appendChild(e(a.options[b].dataset.value,a.options[b].dataset.label)),a.options[b].dataset.byWasAdded=!0,a.options[b].dataset.hasOwnProperty("byFormModel")&&d===a.options[b].dataset.value&&(a.options[b].dataset.bySelected="true");for(b=0;b<c.options.length;b++)c.options[b].dataset.byFormModel!==d||c.options[b].dataset.byWasAdded||
c.select.appendChild(e(c.options[b].dataset.value,c.options[b].dataset.label,c.options[b].dataset.bySelected?{"class":"by_selected_helper"}:{}));c.newSelectOptions=c.select.querySelectorAll("option");for(b=1;b<=c.newSelectOptions.length;b++)c.newSelectOptions[b-1].classList.contains("by_selected_helper")&&(c.select.selectedIndex=b-1)}return f}for(var a=b.dropdownContainer,c,m,n,p=new Event("by:update:multidropdown"),f=!1,h=d||0;h<a.length-1;h++){c=g(a,h);m=g(a,h+1);m.select.innerHTML="";m.select.removeAttribute("disabled",
!0);a[h+1].parentNode.classList.remove("by_select_empty");if(0===h&&!c.select.value)for(c.select.innerHTML="",d=0;d<c.options.length;d++)n={},c.options[d].dataset.hasOwnProperty("byRequiredHelper")&&(n["data-by-required-helper"]=""),c.options[d].dataset.hasOwnProperty("bySelected")&&(f=n.selected=!0),c.select.appendChild(e(c.options[d].dataset.value,c.options[d].dataset.label,n));f=l(c,m)||f;0>=m.select.querySelectorAll("option").length&&m.select.parentNode.dataset.byEmptyText&&(m.select.innerHTML=
"",m.select.appendChild(e("",m.select.parentNode.dataset.byEmptyText,{})),m.select.setAttribute("disabled",!0),a[h+1].parentNode.classList.add("by_select_empty"))}if(f){for(h=a.length-1;1<=h;h--)c=g(a,h-1),m=g(a,h),l(c,m,!0);c.newSelectOptions=c.select.querySelectorAll("option");for(d=0;d<c.newSelectOptions.length;d++)for(a=0;a<m.options.length;a++)c.newSelectOptions[d].value===m.options[d].dataset.byFormModel&&(c.select.selectedIndex=d);d=0;for(c=b.container.querySelectorAll("[data-by-selected],[data-by-was-added]");d<
c.length;d++)c[d].removeAttribute("data-by-selected"),c[d].removeAttribute("data-by-was-added")}p.multiDropdown=b;window.dispatchEvent(p)}var b=d.querySelectorAll(".by_form_multidropdown:not(.by_form_multidropdown_js_applied)");d=[];for(var g=0;g<b.length;g++)d[g]={container:b[g],dropdownContainer:b[g].querySelectorAll(".by_form_select_element"),selectElements:b[g].querySelectorAll("select")};for(b=0;b<d.length;b++)d[b].container.className+=" by_form_multidropdown_js_applied",e(d[b]),function(b,d){for(d=
0;d<b.selectElements.length;d++)(function(d){b.selectElements[d].addEventListener("change",function(g){e(b,d)})})(d)}(d[b],b)};d.by_multidropdown(document.getElementsByTagName("BODY")[0])})(bm.by_form_js);
(function(d){function l(e,l){e=d(l).data("cookieKey");l.value=b.get(e)||l.value}function e(e){var g=bm.utils.getCookie("bm_query_cookie");b=g?new URLSearchParams("?"+g):null;null!==b&&d("input[data-cookie-key]",e).each(l)}var b;d(document).ready(function(){e(d("body"))});window.addEventListener("by-cookie-change",function(b){b&&b.detail&&"bm_query_cookie"===b.detail.cookieName&&e(d("body"))});d(document).on("ajax.loaded",function(b,d){e(d)})})(bm_jquery);
(function(){var d=function(d){var b=document.getElementById("country_posturl_mappings");if(b){var e=d.value.toLowerCase();(b=JSON.parse(b.textContent)[e])?(d.form._originalAction||(d.form._originalAction=d.form.action),d.form.action=b,console.debug("Setting post URL for countryCode: "+e+" to: "+b)):(d.form._originalAction&&(d.form.action=d.form._originalAction),console.debug("No post URL for countryCode: "+e+". Restore originalAction: "+d.form.action))}};document.documentElement.addEventListener("change",
function(e){"SELECT"===e.target.tagName&&"country_of_residence"===e.target.name&&d(e.target)});var l=document.querySelectorAll("select[name\x3d'country_of_residence']");for(i=0;i<l.length;i++)d(l[i])})();