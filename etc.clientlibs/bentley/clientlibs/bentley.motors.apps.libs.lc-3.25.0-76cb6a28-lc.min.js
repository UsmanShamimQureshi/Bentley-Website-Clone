/*
 almond 0.3.2 Copyright jQuery Foundation and other contributors.
 Released under MIT license, http://github.com/requirejs/almond/LICENSE
 Includes BabySitter
 https://github.com/marionettejs/backbone.babysitter/

 Includes Wreqr
 https://github.com/marionettejs/backbone.wreqr/
*/
var requirejs,require,define;
(function(m){function k(a,b){var d,c;b=b&&b.split("/");var e=n.map,g=e&&e["*"]||{};if(a){a=a.split("/");var p=a.length-1;n.nodeIdCompat&&v.test(a[p])&&(a[p]=a[p].replace(v,""));"."===a[0].charAt(0)&&b&&(p=b.slice(0,b.length-1),a=p.concat(a));for(p=0;p<a.length;p++){var u=a[p];"."===u?(a.splice(p,1),--p):".."===u&&0!==p&&(1!==p||".."!==a[2])&&".."!==a[p-1]&&0<p&&(a.splice(p-1,2),p-=2)}a=a.join("/")}if((b||g)&&e){u=a.split("/");for(p=u.length;0<p;--p){var B=u.slice(0,p).join("/");if(b)for(c=b.length;0<
c;--c)if(d=e[b.slice(0,c).join("/")])if(d=d[B]){var k=d;var w=p;break}if(k)break;if(!E&&g&&g[B]){var E=g[B];var f=p}}!k&&E&&(k=E,w=f);k&&(u.splice(0,w,k),a=u.join("/"))}return a}function c(b,d){return function(){var c=p.call(arguments,0);"string"!==typeof c[0]&&1===c.length&&c.push(null);return a.apply(m,c.concat([b,d]))}}function r(a){return function(b){return k(b,a)}}function y(a){return function(d){b[a]=d}}function e(a){if(w.call(g,a)){var d=g[a];delete g[a];B[a]=!0;A.apply(m,d)}if(!w.call(b,a)&&
!w.call(B,a))throw Error("No "+a);return b[a]}function t(a){var b=a?a.indexOf("!"):-1;if(-1<b){var d=a.substring(0,b);a=a.substring(b+1,a.length)}return[d,a]}function x(a){return function(){return n&&n.config&&n.config[a]||{}}}var a,b={},g={},n={},B={},w=Object.prototype.hasOwnProperty,p=[].slice,v=/\.js$/;var E=function(a,b){a=t(a);var d=a[0];a=a[1];if(d){d=k(d,b);var c=e(d)}d?a=c&&c.normalize?c.normalize(a,r(b)):k(a,b):(a=k(a,b),a=t(a),d=a[0],a=a[1],d&&(c=e(d)));return{f:d?d+"!"+a:a,n:a,pr:d,p:c}};
var d={require:function(a){return c(a)},exports:function(a){var d=b[a];return"undefined"!==typeof d?d:b[a]={}},module:function(a){return{id:a,uri:"",exports:b[a],config:x(a)}}};var A=function(a,p,n,k){var v,u=[];var t=typeof n;k=k||a;if("undefined"===t||"function"===t){p=!p.length&&n.length?["require","exports","module"]:p;for(v=0;v<p.length;v+=1){var A=E(p[v],k);t=A.f;if("require"===t)u[v]=d.require(a);else if("exports"===t){u[v]=d.exports(a);var r=!0}else if("module"===t)var z=u[v]=d.module(a);
else if(w.call(b,t)||w.call(g,t)||w.call(B,t))u[v]=e(t);else if(A.p)A.p.load(A.n,c(k,!0),y(t),{}),u[v]=b[t];else throw Error(a+" missing "+t);}p=n?n.apply(b[a],u):void 0;a&&(z&&z.exports!==m&&z.exports!==b[a]?b[a]=z.exports:p===m&&r||(b[a]=p))}else a&&(b[a]=n)};requirejs=require=a=function(b,c,g,p,B){if("string"===typeof b)return d[b]?d[b](c):e(E(b,c).f);if(!b.splice){n=b;n.deps&&a(n.deps,n.callback);if(!c)return;c.splice?(b=c,c=g,g=null):b=m}c=c||function(){};"function"===typeof g&&(g=p,p=B);p?A(m,
b,c,g):setTimeout(function(){A(m,b,c,g)},4);return a};a.config=function(b){return a(b)};requirejs._defined=b;define=function(a,d,c){if("string"!==typeof a)throw Error("See almond README: incorrect module build, no module name");d.splice||(c=d,d=[]);w.call(b,a)||w.call(g,a)||(g[a]=[a,d,c])};define.amd={jQuery:!0}})();define("almond",function(){});"function"===typeof bm_jquery&&define("jquery",function(){return bm_jquery});"object"===typeof Handlebars&&define("handlebars",function(){return Handlebars});
define("setup",function(){});
(function(){function m(a){return function(l,b,f,c){b=A(b,c,4);var q=!D(l)&&d.keys(l),h=(q||l).length,C=0<a?0:h-1;3>arguments.length&&(f=l[q?q[C]:C],C+=a);for(var e=b,g=f;0<=C&&C<h;C+=a){var Q=q?q[C]:C;g=e(g,l[Q],Q,l)}return g}}function k(a){return function(l,b,d){b=u(b,d);d=G(l);for(var f=0<a?0:d-1;0<=f&&f<d;f+=a)if(b(l[f],f,l))return f;return-1}}function c(a,f,c){return function(l,q,h){var C=0,e=G(l);if("number"==typeof h)0<a?C=0<=h?h:Math.max(h+e,C):e=0<=h?Math.min(h+1,e):h+e+1;else if(c&&h&&e)return h=
c(l,q),l[h]===q?h:-1;if(q!==q)return h=f(b.call(l,C,e),d.isNaN),0<=h?h+C:-1;for(h=0<a?C:e-1;0<=h&&h<e;h+=a)if(l[h]===q)return h;return-1}}function r(a,b){var l=K.length,f=a.constructor;f=d.isFunction(f)&&f.prototype||x;var q="constructor";for(d.has(a,q)&&!d.contains(b,q)&&b.push(q);l--;)q=K[l],q in a&&a[q]!==f[q]&&!d.contains(b,q)&&b.push(q)}var y=this,e=y._,t=Array.prototype,x=Object.prototype,a=t.push,b=t.slice,g=x.toString,n=x.hasOwnProperty,B=Array.isArray,w=Object.keys,p=Function.prototype.bind,
v=Object.create,E=function(){},d=function(a){if(a instanceof d)return a;if(!(this instanceof d))return new d(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=d),exports._=d):y._=d;d.VERSION="1.8.3";var A=function(a,b,d){if(void 0===b)return a;switch(null==d?3:d){case 1:return function(l){return a.call(b,l)};case 2:return function(l,d){return a.call(b,l,d)};case 3:return function(l,d,f){return a.call(b,l,d,f)};case 4:return function(l,
d,f,q){return a.call(b,l,d,f,q)}}return function(){return a.apply(b,arguments)}},u=function(a,b,f){return null==a?d.identity:d.isFunction(a)?A(a,b,f):d.isObject(a)?d.matcher(a):d.property(a)};d.iteratee=function(a,b){return u(a,b,Infinity)};var z=function(a,b){return function(l){var d=arguments.length;if(2>d||null==l)return l;for(var f=1;f<d;f++)for(var q=arguments[f],c=a(q),h=c.length,e=0;e<h;e++){var C=c[e];b&&void 0!==l[C]||(l[C]=q[C])}return l}},N=function(a){if(!d.isObject(a))return{};if(v)return v(a);
E.prototype=a;a=new E;E.prototype=null;return a},J=function(a){return function(b){return null==b?void 0:b[a]}},H=Math.pow(2,53)-1,G=J("length"),D=function(a){a=G(a);return"number"==typeof a&&0<=a&&a<=H};d.each=d.forEach=function(a,b,f){b=A(b,f);var l;if(D(a))for(f=0,l=a.length;f<l;f++)b(a[f],f,a);else{var q=d.keys(a);f=0;for(l=q.length;f<l;f++)b(a[q[f]],q[f],a)}return a};d.map=d.collect=function(a,b,f){b=u(b,f);f=!D(a)&&d.keys(a);for(var l=(f||a).length,q=Array(l),c=0;c<l;c++){var h=f?f[c]:c;q[c]=
b(a[h],h,a)}return q};d.reduce=d.foldl=d.inject=m(1);d.reduceRight=d.foldr=m(-1);d.find=d.detect=function(a,b,f){b=D(a)?d.findIndex(a,b,f):d.findKey(a,b,f);if(void 0!==b&&-1!==b)return a[b]};d.filter=d.select=function(a,b,f){var l=[];b=u(b,f);d.each(a,function(a,f,d){b(a,f,d)&&l.push(a)});return l};d.reject=function(a,b,f){return d.filter(a,d.negate(u(b)),f)};d.every=d.all=function(a,b,f){b=u(b,f);f=!D(a)&&d.keys(a);for(var l=(f||a).length,c=0;c<l;c++){var q=f?f[c]:c;if(!b(a[q],q,a))return!1}return!0};
d.some=d.any=function(a,b,f){b=u(b,f);f=!D(a)&&d.keys(a);for(var l=(f||a).length,c=0;c<l;c++){var q=f?f[c]:c;if(b(a[q],q,a))return!0}return!1};d.contains=d.includes=d.include=function(a,b,f,c){D(a)||(a=d.values(a));if("number"!=typeof f||c)f=0;return 0<=d.indexOf(a,b,f)};d.invoke=function(a,f){var l=b.call(arguments,2),c=d.isFunction(f);return d.map(a,function(a){var b=c?f:a[f];return null==b?b:b.apply(a,l)})};d.pluck=function(a,b){return d.map(a,d.property(b))};d.where=function(a,b){return d.filter(a,
d.matcher(b))};d.findWhere=function(a,b){return d.find(a,d.matcher(b))};d.max=function(a,b,f){var l=-Infinity,c=-Infinity,q;if(null==b&&null!=a){a=D(a)?a:d.values(a);for(var h=0,e=a.length;h<e;h++)f=a[h],f>l&&(l=f)}else b=u(b,f),d.each(a,function(a,f,d){q=b(a,f,d);if(q>c||-Infinity===q&&-Infinity===l)l=a,c=q});return l};d.min=function(a,b,f){var l=Infinity,c=Infinity,q;if(null==b&&null!=a){a=D(a)?a:d.values(a);for(var h=0,e=a.length;h<e;h++)f=a[h],f<l&&(l=f)}else b=u(b,f),d.each(a,function(a,f,d){q=
b(a,f,d);if(q<c||Infinity===q&&Infinity===l)l=a,c=q});return l};d.shuffle=function(a){a=D(a)?a:d.values(a);for(var b=a.length,f=Array(b),l=0,c;l<b;l++)c=d.random(0,l),c!==l&&(f[l]=f[c]),f[c]=a[l];return f};d.sample=function(a,b,f){return null==b||f?(D(a)||(a=d.values(a)),a[d.random(a.length-1)]):d.shuffle(a).slice(0,Math.max(0,b))};d.sortBy=function(a,b,f){b=u(b,f);return d.pluck(d.map(a,function(a,f,d){return{value:a,index:f,criteria:b(a,f,d)}}).sort(function(a,b){var f=a.criteria,d=b.criteria;if(f!==
d){if(f>d||void 0===f)return 1;if(f<d||void 0===d)return-1}return a.index-b.index}),"value")};var L=function(a){return function(b,f,l){var c={};f=u(f,l);d.each(b,function(d,l){l=f(d,l,b);a(c,d,l)});return c}};d.groupBy=L(function(a,b,f){d.has(a,f)?a[f].push(b):a[f]=[b]});d.indexBy=L(function(a,b,f){a[f]=b});d.countBy=L(function(a,b,f){d.has(a,f)?a[f]++:a[f]=1});d.toArray=function(a){return a?d.isArray(a)?b.call(a):D(a)?d.map(a,d.identity):d.values(a):[]};d.size=function(a){return null==a?0:D(a)?a.length:
d.keys(a).length};d.partition=function(a,b,f){b=u(b,f);var l=[],c=[];d.each(a,function(a,f,d){(b(a,f,d)?l:c).push(a)});return[l,c]};d.first=d.head=d.take=function(a,b,f){if(null!=a)return null==b||f?a[0]:d.initial(a,a.length-b)};d.initial=function(a,f,d){return b.call(a,0,Math.max(0,a.length-(null==f||d?1:f)))};d.last=function(a,b,f){if(null!=a)return null==b||f?a[a.length-1]:d.rest(a,Math.max(0,a.length-b))};d.rest=d.tail=d.drop=function(a,f,d){return b.call(a,null==f||d?1:f)};d.compact=function(a){return d.filter(a,
d.identity)};var I=function(a,b,f,c){var l=[],h=0;c=c||0;for(var e=G(a);c<e;c++){var q=a[c];if(D(q)&&(d.isArray(q)||d.isArguments(q))){b||(q=I(q,b,f));var g=0,p=q.length;for(l.length+=p;g<p;)l[h++]=q[g++]}else f||(l[h++]=q)}return l};d.flatten=function(a,b){return I(a,b,!1)};d.without=function(a){return d.difference(a,b.call(arguments,1))};d.uniq=d.unique=function(a,b,f,c){d.isBoolean(b)||(c=f,f=b,b=!1);null!=f&&(f=u(f,c));c=[];for(var l=[],h=0,e=G(a);h<e;h++){var q=a[h],g=f?f(q,h,a):q;b?(h&&l===
g||c.push(q),l=g):f?d.contains(l,g)||(l.push(g),c.push(q)):d.contains(c,q)||c.push(q)}return c};d.union=function(){return d.uniq(I(arguments,!0,!0))};d.intersection=function(a){for(var b=[],f=arguments.length,c=0,l=G(a);c<l;c++){var h=a[c];if(!d.contains(b,h)){for(var e=1;e<f&&d.contains(arguments[e],h);e++);e===f&&b.push(h)}}return b};d.difference=function(a){var b=I(arguments,!0,!0,1);return d.filter(a,function(a){return!d.contains(b,a)})};d.zip=function(){return d.unzip(arguments)};d.unzip=function(a){for(var b=
a&&d.max(a,G).length||0,f=Array(b),c=0;c<b;c++)f[c]=d.pluck(a,c);return f};d.object=function(a,b){for(var f={},d=0,c=G(a);d<c;d++)b?f[a[d]]=b[d]:f[a[d][0]]=a[d][1];return f};d.findIndex=k(1);d.findLastIndex=k(-1);d.sortedIndex=function(a,b,f,d){f=u(f,d,1);b=f(b);d=0;for(var c=G(a);d<c;){var l=Math.floor((d+c)/2);f(a[l])<b?d=l+1:c=l}return d};d.indexOf=c(1,d.findIndex,d.sortedIndex);d.lastIndexOf=c(-1,d.findLastIndex);d.range=function(a,b,f){null==b&&(b=a||0,a=0);f=f||1;b=Math.max(Math.ceil((b-a)/
f),0);for(var d=Array(b),c=0;c<b;c++,a+=f)d[c]=a;return d};var O=function(a,b,f,c,h){if(!(c instanceof b))return a.apply(f,h);b=N(a.prototype);a=a.apply(b,h);return d.isObject(a)?a:b};d.bind=function(a,f){if(p&&a.bind===p)return p.apply(a,b.call(arguments,1));if(!d.isFunction(a))throw new TypeError("Bind must be called on a function");var c=b.call(arguments,2),l=function(){return O(a,l,f,this,c.concat(b.call(arguments)))};return l};d.partial=function(a){var f=b.call(arguments,1),c=function(){for(var b=
0,l=f.length,h=Array(l),e=0;e<l;e++)h[e]=f[e]===d?arguments[b++]:f[e];for(;b<arguments.length;)h.push(arguments[b++]);return O(a,c,this,this,h)};return c};d.bindAll=function(a){var b,f=arguments.length;if(1>=f)throw Error("bindAll must be passed function names");for(b=1;b<f;b++){var c=arguments[b];a[c]=d.bind(a[c],a)}return a};d.memoize=function(a,b){var f=function(c){var h=f.cache,l=""+(b?b.apply(this,arguments):c);d.has(h,l)||(h[l]=a.apply(this,arguments));return h[l]};f.cache={};return f};d.delay=
function(a,f){var d=b.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},f)};d.defer=d.partial(d.delay,d,1);d.throttle=function(a,b,f){var c,h,l,e=null,g=0;f||(f={});var q=function(){g=!1===f.leading?0:d.now();e=null;l=a.apply(c,h);e||(c=h=null)};return function(){var p=d.now();g||!1!==f.leading||(g=p);var F=b-(p-g);c=this;h=arguments;0>=F||F>b?(e&&(clearTimeout(e),e=null),g=p,l=a.apply(c,h),e||(c=h=null)):e||!1===f.trailing||(e=setTimeout(q,F));return l}};d.debounce=function(a,
b,f){var c,h,l,e,g,q=function(){var p=d.now()-e;p<b&&0<=p?c=setTimeout(q,b-p):(c=null,f||(g=a.apply(l,h),c||(l=h=null)))};return function(){l=this;h=arguments;e=d.now();var p=f&&!c;c||(c=setTimeout(q,b));p&&(g=a.apply(l,h),l=h=null);return g}};d.wrap=function(a,b){return d.partial(b,a)};d.negate=function(a){return function(){return!a.apply(this,arguments)}};d.compose=function(){var a=arguments,b=a.length-1;return function(){for(var f=b,d=a[b].apply(this,arguments);f--;)d=a[f].call(this,d);return d}};
d.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};d.before=function(a,b){var f;return function(){0<--a&&(f=b.apply(this,arguments));1>=a&&(b=null);return f}};d.once=d.partial(d.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),K="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");d.keys=function(a){if(!d.isObject(a))return[];if(w)return w(a);var b=[],f;for(f in a)d.has(a,f)&&b.push(f);M&&r(a,b);return b};d.allKeys=
function(a){if(!d.isObject(a))return[];var b=[],f;for(f in a)b.push(f);M&&r(a,b);return b};d.values=function(a){for(var b=d.keys(a),f=b.length,c=Array(f),h=0;h<f;h++)c[h]=a[b[h]];return c};d.mapObject=function(a,b,f){b=u(b,f);f=d.keys(a);for(var c=f.length,h={},e,l=0;l<c;l++)e=f[l],h[e]=b(a[e],e,a);return h};d.pairs=function(a){for(var b=d.keys(a),f=b.length,c=Array(f),h=0;h<f;h++)c[h]=[b[h],a[b[h]]];return c};d.invert=function(a){for(var b={},f=d.keys(a),c=0,h=f.length;c<h;c++)b[a[f[c]]]=f[c];return b};
d.functions=d.methods=function(a){var b=[],f;for(f in a)d.isFunction(a[f])&&b.push(f);return b.sort()};d.extend=z(d.allKeys);d.extendOwn=d.assign=z(d.keys);d.findKey=function(a,b,f){b=u(b,f);f=d.keys(a);for(var c,h=0,e=f.length;h<e;h++)if(c=f[h],b(a[c],c,a))return c};d.pick=function(a,b,f){var c={},h=a;if(null==h)return c;if(d.isFunction(b)){var e=d.allKeys(h);var l=A(b,f)}else e=I(arguments,!1,!1,1),l=function(a,b,f){return b in f},h=Object(h);for(var g=0,p=e.length;g<p;g++){var q=e[g],F=h[q];l(F,
q,h)&&(c[q]=F)}return c};d.omit=function(a,b,f){if(d.isFunction(b))b=d.negate(b);else{var c=d.map(I(arguments,!1,!1,1),String);b=function(a,b){return!d.contains(c,b)}}return d.pick(a,b,f)};d.defaults=z(d.allKeys,!0);d.create=function(a,b){a=N(a);b&&d.extendOwn(a,b);return a};d.clone=function(a){return d.isObject(a)?d.isArray(a)?a.slice():d.extend({},a):a};d.tap=function(a,b){b(a);return a};d.isMatch=function(a,b){var f=d.keys(b),c=f.length;if(null==a)return!c;a=Object(a);for(var h=0;h<c;h++){var e=
f[h];if(b[e]!==a[e]||!(e in a))return!1}return!0};var f=function(a,b,c,h){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof d&&(a=a._wrapped);b instanceof d&&(b=b._wrapped);var e=g.call(a);if(e!==g.call(b))return!1;switch(e){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}e="[object Array]"===e;if(!e){if("object"!=typeof a||
"object"!=typeof b)return!1;var l=a.constructor,p=b.constructor;if(l!==p&&!(d.isFunction(l)&&l instanceof l&&d.isFunction(p)&&p instanceof p)&&"constructor"in a&&"constructor"in b)return!1}c=c||[];h=h||[];for(l=c.length;l--;)if(c[l]===a)return h[l]===b;c.push(a);h.push(b);if(e){l=a.length;if(l!==b.length)return!1;for(;l--;)if(!f(a[l],b[l],c,h))return!1}else{e=d.keys(a);l=e.length;if(d.keys(b).length!==l)return!1;for(;l--;)if(p=e[l],!d.has(b,p)||!f(a[p],b[p],c,h))return!1}c.pop();h.pop();return!0};
d.isEqual=function(a,b){return f(a,b)};d.isEmpty=function(a){return null==a?!0:D(a)&&(d.isArray(a)||d.isString(a)||d.isArguments(a))?0===a.length:0===d.keys(a).length};d.isElement=function(a){return!(!a||1!==a.nodeType)};d.isArray=B||function(a){return"[object Array]"===g.call(a)};d.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};d.each("Arguments Function String Number Date RegExp Error".split(" "),function(a){d["is"+a]=function(b){return g.call(b)==="[object "+a+"]"}});
d.isArguments(arguments)||(d.isArguments=function(a){return d.has(a,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(d.isFunction=function(a){return"function"==typeof a||!1});d.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};d.isNaN=function(a){return d.isNumber(a)&&a!==+a};d.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===g.call(a)};d.isNull=function(a){return null===a};d.isUndefined=function(a){return void 0===a};d.has=function(a,b){return null!=a&&
n.call(a,b)};d.noConflict=function(){y._=e;return this};d.identity=function(a){return a};d.constant=function(a){return function(){return a}};d.noop=function(){};d.property=J;d.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}};d.matcher=d.matches=function(a){a=d.extendOwn({},a);return function(b){return d.isMatch(b,a)}};d.times=function(a,b,f){var d=Array(Math.max(0,a));b=A(b,f,1);for(f=0;f<a;f++)d[f]=b(f);return d};d.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*
(b-a+1))};d.now=Date.now||function(){return(new Date).getTime()};B={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","`":"\x26#x60;"};z=d.invert(B);J=function(a){var b=function(b){return a[b]},f="(?:"+d.keys(a).join("|")+")",c=RegExp(f),h=RegExp(f,"g");return function(a){a=null==a?"":""+a;return c.test(a)?a.replace(h,b):a}};d.escape=J(B);d.unescape=J(z);d.result=function(a,b,f){b=null==a?void 0:a[b];void 0===b&&(b=f);return d.isFunction(b)?b.call(a):b};var h=0;d.uniqueId=
function(a){var b=++h+"";return a?a+b:b};d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},T=/\\|'|\r|\n|\u2028|\u2029/g,U=function(a){return"\\"+S[a]};d.template=function(a,b,f){!b&&f&&(b=f);b=d.defaults({},b,d.templateSettings);f=RegExp([(b.escape||F).source,(b.interpolate||F).source,(b.evaluate||F).source].join("|")+"|$","g");var c=0,h="__p+\x3d'";a.replace(f,
function(b,f,d,e,g){h+=a.slice(c,g).replace(T,U);c=g+b.length;f?h+="'+\n((__t\x3d("+f+"))\x3d\x3dnull?'':_.escape(__t))+\n'":d?h+="'+\n((__t\x3d("+d+"))\x3d\x3dnull?'':__t)+\n'":e&&(h+="';\n"+e+"\n__p+\x3d'");return b});h+="';\n";b.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p\x3d'',__j\x3dArray.prototype.join,print\x3dfunction(){__p+\x3d__j.call(arguments,'');};\n"+h+"return __p;\n";try{var e=new Function(b.variable||"obj","_",h)}catch(R){throw R.source=h,R;}f=function(a){return e.call(this,
a,d)};f.source="function("+(b.variable||"obj")+"){\n"+h+"}";return f};d.chain=function(a){a=d(a);a._chain=!0;return a};var P=function(a,b){return a._chain?d(b).chain():b};d.mixin=function(b){d.each(d.functions(b),function(f){var c=d[f]=b[f];d.prototype[f]=function(){var b=[this._wrapped];a.apply(b,arguments);return P(this,c.apply(d,b))}})};d.mixin(d);d.each("pop push reverse shift sort splice unshift".split(" "),function(a){var b=t[a];d.prototype[a]=function(){var f=this._wrapped;b.apply(f,arguments);
"shift"!==a&&"splice"!==a||0!==f.length||delete f[0];return P(this,f)}});d.each(["concat","join","slice"],function(a){var b=t[a];d.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}});d.prototype.value=function(){return this._wrapped};d.prototype.valueOf=d.prototype.toJSON=d.prototype.value;d.prototype.toString=function(){return""+this._wrapped};"function"===typeof define&&define.amd&&define("underscore",[],function(){return d})}).call(this);
(function(m,k){if("function"===typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(c,y,e){m.Backbone=k(m,e,c,y)});else if("undefined"!==typeof exports){var c=require("underscore");k(m,exports,c)}else m.Backbone=k(m,{},m._,m.jQuery||m.Zepto||m.ender||m.$)})(this,function(m,k,c,r){var y=m.Backbone,e=[].slice;k.VERSION="1.1.2";k.$=r;k.noConflict=function(){m.Backbone=y;return this};k.emulateHTTP=!1;k.emulateJSON=!1;var t=k.Events={on:function(b,d,c){if(!a(this,"on",
b,[d,c])||!d)return this;this._events||(this._events={});(this._events[b]||(this._events[b]=[])).push({callback:d,context:c,ctx:c||this});return this},once:function(b,d,e){if(!a(this,"once",b,[d,e])||!d)return this;var f=this,h=c.once(function(){f.off(b,h);d.apply(this,arguments)});h._callback=d;return this.on(b,h,e)},off:function(b,d,e){var f,h,g,p;if(!this._events||!a(this,"off",b,[d,e]))return this;if(!b&&!d&&!e)return this._events=void 0,this;var F=b?[b]:c.keys(this._events);var n=0;for(g=F.length;n<
g;n++)if(b=F[n],h=this._events[b]){this._events[b]=f=[];if(d||e){var B=0;for(p=h.length;B<p;B++){var v=h[B];(d&&d!==v.callback&&d!==v.callback._callback||e&&e!==v.context)&&f.push(v)}}f.length||delete this._events[b]}return this},trigger:function(f){if(!this._events)return this;var d=e.call(arguments,1);if(!a(this,"trigger",f,d))return this;var c=this._events[f],g=this._events.all;c&&b(c,d);g&&b(g,arguments);return this},stopListening:function(a,b,d){var f=this._listeningTo;if(!f)return this;var h=
!b&&!d;d||"object"!==typeof b||(d=this);a&&((f={})[a._listenId]=a);for(var e in f)a=f[e],a.off(b,d,this),(h||c.isEmpty(a._events))&&delete this._listeningTo[e];return this}},x=/\s+/,a=function(a,b,d,c){if(!d)return!0;if("object"===typeof d){for(var f in d)a[b].apply(a,[f,d[f]].concat(c));return!1}if(x.test(d)){d=d.split(x);f=0;for(var h=d.length;f<h;f++)a[b].apply(a,[d[f]].concat(c));return!1}return!0},b=function(a,b){var f,d=-1,c=a.length,h=b[0],e=b[1],g=b[2];switch(b.length){case 0:for(;++d<c;)(f=
a[d]).callback.call(f.ctx);break;case 1:for(;++d<c;)(f=a[d]).callback.call(f.ctx,h);break;case 2:for(;++d<c;)(f=a[d]).callback.call(f.ctx,h,e);break;case 3:for(;++d<c;)(f=a[d]).callback.call(f.ctx,h,e,g);break;default:for(;++d<c;)(f=a[d]).callback.apply(f.ctx,b)}};c.each({listenTo:"on",listenToOnce:"once"},function(a,b){t[b]=function(b,f,d){var h=this._listeningTo||(this._listeningTo={}),e=b._listenId||(b._listenId=c.uniqueId("l"));h[e]=b;d||"object"!==typeof f||(d=this);b[a](f,d,this);return this}});
t.bind=t.on;t.unbind=t.off;c.extend(k,t);var g=k.Model=function(a,b){var f=a||{};b||(b={});this.cid=c.uniqueId("c");this.attributes={};b.collection&&(this.collection=b.collection);b.parse&&(f=this.parse(f,b)||{});f=c.defaults({},f,c.result(this,"defaults"));this.set(f,b);this.changed={};this.initialize.apply(this,arguments)};c.extend(g.prototype,t,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return k.sync.apply(this,
arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var f;if(null==a)return this;if("object"===typeof a){var h=a;d=b}else(h={})[a]=b;d||(d={});if(!this._validate(h,d))return!1;var e=d.unset;var g=d.silent;a=[];var p=this._changing;this._changing=!0;p||(this._previousAttributes=c.clone(this.attributes),this.changed={});var n=this.attributes;var F=this._previousAttributes;this.idAttribute in
h&&(this.id=h[this.idAttribute]);for(f in h)b=h[f],c.isEqual(n[f],b)||a.push(f),c.isEqual(F[f],b)?delete this.changed[f]:this.changed[f]=b,e?delete n[f]:n[f]=b;if(!g)for(a.length&&(this._pending=d),b=0,f=a.length;b<f;b++)this.trigger("change:"+a[b],this,n[a[b]],d);if(p)return this;if(!g)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b=
{},f;for(f in this.attributes)b[f]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,f=!1,d=this._changing?this._previousAttributes:this.attributes,e;for(e in a)c.isEqual(d[e],b=a[e])||((f||(f={}))[e]=b);return f},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},
fetch:function(a){a=a?c.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,f=a.success;a.success=function(d){if(!b.set(b.parse(d,a),a))return!1;f&&f(b,d,a);b.trigger("sync",b,d,a)};K(this,a);return this.sync("read",this,a)},save:function(a,b,d){var f=this.attributes;if(null==a||"object"===typeof a){var e=a;d=b}else(e={})[a]=b;d=c.extend({validate:!0},d);if(e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},f,e));void 0===d.parse&&
(d.parse=!0);var h=this,g=d.success;d.success=function(a){h.attributes=f;var b=h.parse(a,d);d.wait&&(b=c.extend(e||{},b));if(c.isObject(b)&&!h.set(b,d))return!1;g&&g(h,a,d);h.trigger("sync",h,a,d)};K(this,d);a=this.isNew()?"create":d.patch?"patch":"update";"patch"===a&&(d.attrs=e);a=this.sync(a,this,d);e&&d.wait&&(this.attributes=f);return a},destroy:function(a){a=a?c.clone(a):{};var b=this,f=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(c){(a.wait||b.isNew())&&
d();f&&f(b,c,a);b.isNew()||b.trigger("sync",b,c,a)};if(this.isNew())return a.success(),!1;K(this,a);var e=this.sync("delete",this,a);a.wait||d();return e},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||M();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},
c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);a=this.validationError=this.validate(a,b)||null;if(!a)return!0;this.trigger("invalid",this,a,c.extend(b,{validationError:a}));return!1}});c.each("keys values pairs invert pick omit".split(" "),function(a){g.prototype[a]=function(){var b=e.call(arguments);b.unshift(this.attributes);return c[a].apply(c,b)}});var n=k.Collection=function(a,b){b||(b={});b.model&&(this.model=
b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,c.extend({silent:!0},b))},B={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1};c.extend(n.prototype,t,{model:g,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return k.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,w))},remove:function(a,b){var f=!c.isArray(a);a=f?[a]:c.clone(a);
b||(b={});var d,e;var h=0;for(d=a.length;h<d;h++)if(e=a[h]=this.get(a[h])){delete this._byId[e.id];delete this._byId[e.cid];var g=this.indexOf(e);this.models.splice(g,1);this.length--;b.silent||(b.index=g,e.trigger("remove",e,this,b));this._removeReference(e,b)}return f?a[0]:a},set:function(a,b){b=c.defaults({},b,B);b.parse&&(a=this.parse(a,b));var f=!c.isArray(a);a=f?a?[a]:[]:c.clone(a);var d,e,h,p=b.at,n=this.model,v=this.comparator&&null==p&&!1!==b.sort,k=c.isString(this.comparator)?this.comparator:
null,w=[],E=[],m={},t=b.add,u=b.merge,A=b.remove,y=!v&&t&&A?[]:!1;var r=0;for(d=a.length;r<d;r++){var x=a[r]||{};var z=x instanceof g?e=x:x[n.prototype.idAttribute||"id"];if(z=this.get(z))A&&(m[z.cid]=!0),u&&(x=x===e?e.attributes:x,b.parse&&(x=z.parse(x,b)),z.set(x,b),v&&!h&&z.hasChanged(k)&&(h=!0)),a[r]=z;else if(t){e=a[r]=this._prepareModel(x,b);if(!e)continue;w.push(e);this._addReference(e,b)}e=z||e;!y||!e.isNew()&&m[e.id]||y.push(e);m[e.id]=!0}if(A){r=0;for(d=this.length;r<d;++r)m[(e=this.models[r]).cid]||
E.push(e);E.length&&this.remove(E,b)}if(w.length||y&&y.length)if(v&&(h=!0),this.length+=w.length,null!=p)for(r=0,d=w.length;r<d;r++)this.models.splice(p+r,0,w[r]);else for(y&&(this.models.length=0),x=y||w,r=0,d=x.length;r<d;r++)this.models.push(x[r]);h&&this.sort({silent:!0});if(!b.silent){r=0;for(d=w.length;r<d;r++)(e=w[r]).trigger("add",e,this,b);(h||y&&y.length)&&this.trigger("sort",this,b)}return f?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,f=this.models.length;d<f;d++)this._removeReference(this.models[d],
b);b.previousModels=this.models;this._reset();a=this.add(a,c.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return e.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||
this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var d in a)if(a[d]!==b.get(d))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,
this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;a.success=function(f){d[a.reset?"reset":"set"](f,a);b&&b(d,f,a);d.trigger("sync",d,f,a)};K(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,f=b.success;b.success=function(a,c){b.wait&&d.add(a,
b);f&&f(a,c,b)};a.save(null,b);return a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof g)return a;b=b?c.clone(b):{};b.collection=this;a=new this.model(a,b);if(!a.validationError)return a;this.trigger("invalid",this,a.validationError,b);return!1},_addReference:function(a,b){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=
this);a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,d,c){if("add"!==a&&"remove"!==a||d===this)"destroy"===a&&this.remove(b,c),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});c.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain sample".split(" "),
function(a){n.prototype[a]=function(){var b=e.call(arguments);b.unshift(this.models);return c[a].apply(c,b)}});c.each(["groupBy","countBy","sortBy","indexBy"],function(a){n.prototype[a]=function(b,d){var f=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,f,d)}});r=k.View=function(a){this.cid=c.uniqueId("view");a||(a={});c.extend(this,c.pick(a,v));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var p=/^(\S+)\s*(.*)$/,v="model collection el id attributes className tagName events".split(" ");
c.extend(r.prototype,t,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof k.$?a:k.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];c.isFunction(d)||
(d=this[a[b]]);if(d){var f=b.match(p),e=f[1];f=f[2];d=c.bind(d,this);e+=".delegateEvents"+this.cid;if(""===f)this.$el.on(e,d);else this.$el.on(e,f,d)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id"));this.className&&(a["class"]=c.result(this,"className"));a=k.$("\x3c"+c.result(this,"tagName")+
"\x3e").attr(a);this.setElement(a,!1)}}});k.sync=function(a,b,e){var f=d[a];c.defaults(e||(e={}),{emulateHTTP:k.emulateHTTP,emulateJSON:k.emulateJSON});var g={type:f,dataType:"json"};e.url||(g.url=c.result(b,"url")||M());null!=e.data||!b||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||b.toJSON(e)));e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(e.emulateHTTP&&("PUT"===f||"DELETE"===f||
"PATCH"===f)){g.type="POST";e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",f);if(h)return h.apply(this,arguments)}}"GET"===g.type||e.emulateJSON||(g.processData=!1);"PATCH"===g.type&&E&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});a=e.xhr=k.ajax(c.extend(g,e));b.trigger("request",b,a,e);return a};var E="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),
d={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};k.ajax=function(){return k.$.ajax.apply(k.$,arguments)};var A=k.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},u=/\((.*?)\)/g,z=/(\(\?)?:\w+/g,N=/\*\w+/g,J=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(A.prototype,t,{initialize:function(){},route:function(a,b,d){c.isRegExp(a)||(a=this._routeToRegExp(a));c.isFunction(b)&&(d=b,b="");d||(d=this[b]);var f=this;k.history.route(a,
function(c){c=f._extractParameters(a,c);f.execute(d,c);f.trigger.apply(f,["route:"+b].concat(c));f.trigger("route",b,c);k.history.trigger("route",f,b,c)});return this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,b){k.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(J,"\\$\x26").replace(u,"(?:$1)?").replace(z,
function(a,b){return b?a:"([^/?]+)"}).replace(N,"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var H=k.History=function(){this.handlers=[];c.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},G=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,L=/msie [\w.]+/,I=/\/$/,O=/#.*$/;H.started=!1;c.extend(H.prototype,
t,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$\x26/")===this.root},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){null==a&&(this._hasPushState||!this._wantsHashChange||b?(a=decodeURI(this.location.pathname+this.location.search),b=this.root.replace(I,""),a.indexOf(b)||(a=a.slice(b.length))):a=this.getHash());return a.replace(G,"")},start:function(a){if(H.started)throw Error("Backbone.history has already been started");
H.started=!0;this.options=c.extend({root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);a=this.getFragment();var b=document.documentMode;b=L.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(D,"/");b&&this._wantsHashChange&&(this.iframe=k.$('\x3ciframe src\x3d"javascript:0" tabindex\x3d"-1"\x3e').hide().appendTo("body")[0].contentWindow,
this.navigate(a));if(this._hasPushState)k.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!b)k.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&
this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(G,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){k.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);H.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));
if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){a=this.fragment=this.getFragment(a);return c.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!H.started)return!1;b&&!0!==b||(b={trigger:!!b});var d=this.root+(a=this.getFragment(a||""));a=a.replace(O,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==d&&(d=d.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},
document.title,d);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(d);if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,d){d?(d=a.href.replace(/(javascript:|#).*$/,""),a.replace(d+"#"+b)):a.hash="#"+b}});k.history=new H;g.extend=n.extend=A.extend=r.extend=H.extend=function(a,
b){var d=this;var e=a&&c.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)};c.extend(e,d,b);b=function(){this.constructor=e};b.prototype=d.prototype;e.prototype=new b;a&&c.extend(e.prototype,a);e.__super__=d.prototype;return e};var M=function(){throw Error('A "url" property or function must be specified');},K=function(a,b){var d=b.error;b.error=function(c){d&&d(a,c,b);a.trigger("error",a,c,b)}};return k});
(function(m){"function"===typeof require&&"undefined"!==typeof module&&module.exports?module.exports=m(require("underscore")):"function"===typeof define?define("cocktail",["underscore"],m):this.Cocktail=m(_)})(function(m){var k={mixins:{},mixin:function(c){var r=m.chain(arguments).toArray().rest().flatten().value(),e=c.prototype||c,t={};m.each(r,function(c){m.isString(c)&&(c=k.mixins[c]);m.each(c,function(a,b){m.isFunction(a)?e[b]!==a&&(e[b]&&(t[b]=t.hasOwnProperty(b)?t[b]:[e[b]],t[b].push(a)),e[b]=
a):m.isArray(a)?e[b]=m.union(a,e[b]||[]):m.isObject(a)?e[b]=m.extend({},a,e[b]||{}):b in e||(e[b]=a)})});m.each(t,function(c,a){e[a]=function(){var a=this,e=arguments,n;m.each(c,function(b){b=m.isFunction(b)?b.apply(a,e):b;n="undefined"===typeof b?n:b});return n}});return c}},c;k.patch=function(r){c=r.Model.extend;var y=function(e,m){e=c.call(this,e,m);(m=e.prototype.mixins)&&e.prototype.hasOwnProperty("mixins")&&k.mixin(e,m);return e};m.each([r.Model,r.Collection,r.Router,r.View],function(c){c.mixin=
function(){k.mixin(this,m.toArray(arguments))};c.extend=y})};k.unpatch=function(k){m.each([k.Model,k.Collection,k.Router,k.View],function(k){k.mixin=void 0;k.extend=c})};return k});(function(m){"function"===typeof require&&"undefined"!==typeof module&&module.exports?module.exports=m(require("backbone"),require("cocktail")):"function"===typeof define?define("backbone.mixins",["backbone","cocktail"],m):m(Backbone,Cocktail)})(function(m,k){k.patch(m)});
(function(m,k){if("function"===typeof define&&define.amd)define("marionette",["backbone","underscore"],function(c,e){return m.Marionette=m.Mn=k(m,c,e)});else if("undefined"!==typeof exports){var c=require("backbone"),r=require("underscore");module.exports=k(m,c,r)}else m.Marionette=m.Mn=k(m,m.Backbone,m._)})(this,function(m,k,c){(function(a,b){var c=a.ChildViewContainer;a.ChildViewContainer=function(a,b){var c=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();
b.each(a,this.add,this)};b.extend(c.prototype,{add:function(a,b){var c=a.cid;this._views[c]=a;a.model&&(this._indexByModel[a.model.cid]=c);b&&(this._indexByCustom[b]=c);this._updateLength();return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},
remove:function(a){var c=a.cid;a.model&&delete this._indexByModel[a.model.cid];b.any(this._indexByCustom,function(a,b){if(a===c)return delete this._indexByCustom[b],!0},this);delete this._views[c];this._updateLength();return this},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,c){b.each(this._views,function(e){b.isFunction(e[a])&&e[a].apply(e,c||[])})},_updateLength:function(){this.length=b.size(this._views)}});b.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck reduce".split(" "),
function(a){c.prototype[a]=function(){var c=[b.values(this._views)].concat(b.toArray(arguments));return b[a].apply(b,c)}});return c}(a,b);a.ChildViewContainer.VERSION="0.1.7";a.ChildViewContainer.noConflict=function(){a.ChildViewContainer=c;return this};return a.ChildViewContainer})(k,c);(function(a,b){var c=a.Wreqr,e=a.Wreqr={};a.Wreqr.VERSION="1.3.3";a.Wreqr.noConflict=function(){a.Wreqr=c;return this};e.Handlers=function(a,b){var c=function(a){this.options=a;this._wreqrHandlers={};b.isFunction(this.initialize)&&
this.initialize(a)};c.extend=a.Model.extend;b.extend(c.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,d){var c=null;b.isObject(a)&&!b.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(d,a,c)},this)},setHandler:function(a,b,d){this._wreqrHandlers[a]={callback:b,context:d};this.trigger("handler:add",a,b,d)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){return b.callback.apply(b.context,arguments)}},
removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});return c}(a,b);e.CommandStorage=function(){var c=function(a){this.options=a;this._commands={};b.isFunction(this.initialize)&&this.initialize(a)};b.extend(c.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=
[]}});return c}();e.Commands=function(a,b){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);a.Handlers.prototype.constructor.apply(this,arguments)},execute:function(a){a=arguments[0];var c=b.rest(arguments);this.hasHandler(a)?this.getHandler(a).apply(this,c):this.storage.addCommand(a,c)},_executeCommands:function(a,c,e){var d=this.storage.getCommands(a);b.each(d.instances,
function(a){c.apply(e,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=b.isFunction(a)?new a:a}})}(e,b);e.RequestResponse=function(a,b){return a.Handlers.extend({request:function(a){if(this.hasHandler(a))return this.getHandler(a).apply(this,b.rest(arguments))}})}(e,b);e.EventAggregator=function(a,b){var c=function(){};c.extend=a.Model.extend;b.extend(c.prototype,a.Events);return c}(a,b);e.Channel=function(c){c=function(b){this.vent=
new a.Wreqr.EventAggregator;this.reqres=new a.Wreqr.RequestResponse;this.commands=new a.Wreqr.Commands;this.channelName=b};b.extend(c.prototype,{reset:function(){this.vent.off();this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(a,b){this._connect("vent",a,b);return this},connectCommands:function(a,b){this._connect("commands",a,b);return this},connectRequests:function(a,b){this._connect("reqres",a,b);return this},_connect:function(a,
c,e){if(c){e=e||this;var g="vent"===a?"on":"setHandler";b.each(c,function(d,c){this[a][g](c,b.bind(d,e))},this)}}});return c}(e);e.radio=function(a,b){var c=function(){this._channels={};this.vent={};this.commands={};this.reqres={};this._proxyMethods()};b.extend(c.prototype,{channel:function(a){if(!a)throw Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(b){var d=this._channels[b];d||(d=new a.Channel(b),this._channels[b]=d);return d},_proxyMethods:function(){b.each(["vent",
"commands","reqres"],function(a){b.each(e[a],function(b){this[a][b]=g(this,a,b)},this)},this)}});var e={vent:"on off trigger once stopListening listenTo listenToOnce".split(" "),commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},g=function(a,c,e){return function(d){var g=a._getChannel(d)[c];return g[e].apply(g,b.rest(arguments))}};return new c}(e,b);return a.Wreqr})(k,c);var r=m.Marionette,
y=m.Mn,e=k.Marionette={};e.VERSION="2.4.2";e.noConflict=function(){m.Marionette=r;m.Mn=y;return this};k.Marionette=e;e.Deferred=k.$.Deferred;e.extend=k.Model.extend;e.isNodeAttached=function(a){return k.$.contains(document.documentElement,a)};e.mergeOptions=function(a,b){a&&c.extend(this,c.pick(a,b))};e.getOption=function(a,b){if(a&&b)return a.options&&void 0!==a.options[b]?a.options[b]:a[b]};e.proxyGetOption=function(a){return e.getOption(this,a)};e._getValue=function(a,b,e){c.isFunction(a)&&(a=
e?a.apply(b,e):a.call(b));return a};e.normalizeMethods=function(a){return c.reduce(a,function(a,e,n){c.isFunction(e)||(e=this[e]);e&&(a[n]=e);return a},{},this)};e.normalizeUIString=function(a,b){return a.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(a){return b[a.slice(4)]})};e.normalizeUIKeys=function(a,b){return c.reduce(a,function(a,c,k){k=e.normalizeUIString(k,b);a[k]=c;return a},{})};e.normalizeUIValues=function(a,b,g){c.each(a,function(n,k){c.isString(n)?a[k]=e.normalizeUIString(n,b):c.isObject(n)&&
c.isArray(g)&&(c.extend(n,e.normalizeUIValues(c.pick(n,g),b)),c.each(g,function(a){var g=n[a];c.isString(g)&&(n[a]=e.normalizeUIString(g,b))}))});return a};e.actAsCollection=function(a,b){c.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(e){a[e]=function(){var a=[c.values(c.result(this,b))].concat(c.toArray(arguments));return c[e].apply(c,a)}})};var t=e.deprecate=function(a,
b){c.isObject(a)&&(a=a.prev+" is going to be removed in the future. Please use "+a.next+" instead."+(a.url?" See: "+a.url:""));void 0!==b&&b||t._cache[a]||(t._warn("Deprecation warning: "+a),t._cache[a]=!0)};t._warn="undefined"!==typeof console&&(console.warn||console.log)||function(){};t._cache={};e._triggerMethod=function(){function a(a,b,c){return c.toUpperCase()}var b=/(^|:)(\w)/gi;return function(e,n,k){var g=3>arguments.length;g&&(k=n,n=k[0]);var p="on"+n.replace(b,a);p=e[p];var m;c.isFunction(p)&&
(m=p.apply(e,g?c.rest(k):k));c.isFunction(e.trigger)&&(1<g+k.length?e.trigger.apply(e,g?k:[n].concat(c.drop(k,0))):e.trigger(n));return m}}();e.triggerMethod=function(a){return e._triggerMethod(this,arguments)};e.triggerMethodOn=function(a){return(c.isFunction(a.triggerMethod)?a.triggerMethod:e.triggerMethod).apply(a,c.rest(arguments))};e.MonitorDOMRefresh=function(a){function b(){a._isShown&&a._isRendered&&e.isNodeAttached(a.el)&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")}a.on({show:function(){a._isShown=
!0;b()},render:function(){a._isRendered=!0;b()}})};(function(a){function b(b,e,g,d){d=d.split(/\s+/);c.each(d,function(d){var c=b[d];if(!c)throw new a.Error('Method "'+d+'" was configured as an event handler, but does not exist.');b.listenTo(e,g,c)})}function e(a,b,c,d){a.listenTo(b,c,d)}function n(a,b,e,d){d=d.split(/\s+/);c.each(d,function(d){a.stopListening(b,e,a[d])})}function k(a,b,c,d){a.stopListening(b,c,d)}function m(b,e,g,d,n){if(e&&g){if(!c.isObject(g))throw new a.Error({message:"Bindings must be an object or function.",
url:"marionette.functions.html#marionettebindentityevents"});g=a._getValue(g,b);c.each(g,function(a,g){c.isFunction(a)?d(b,e,g,a):n(b,e,g,a)})}}a.bindEntityEvents=function(a,c,g){m(a,c,g,e,b)};a.unbindEntityEvents=function(a,b,c){m(a,b,c,k,n)};a.proxyBindEntityEvents=function(b,c){return a.bindEntityEvents(this,b,c)};a.proxyUnbindEntityEvents=function(b,c){return a.unbindEntityEvents(this,b,c)}})(e);var x="description fileName lineNumber name message number".split(" ");e.Error=e.extend.call(Error,
{urlRoot:"http://marionettejs.com/docs/v"+e.VERSION+"/",constructor:function(a,b){c.isObject(a)?(b=a,a=b.message):b||(b={});a=Error.call(this,a);c.extend(this,c.pick(a,x),c.pick(b,x));this.captureStackTrace();b.url&&(this.url=this.urlRoot+b.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,e.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}});e.Error.extend=e.extend;e.Callbacks=function(){this._deferred=e.Deferred();
this._callbacks=[]};c.extend(e.Callbacks.prototype,{add:function(a,b){var e=c.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b});e.then(function(c){b&&(c.context=b);a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=e.Deferred();this._callbacks=[];c.each(a,function(a){this.add(a.cb,a.ctx)},this)}});e.Controller=function(a){this.options=a||{};c.isFunction(this.initialize)&&this.initialize(this.options)};
e.Controller.extend=e.extend;c.extend(e.Controller.prototype,k.Events,{destroy:function(){e._triggerMethod(this,"before:destroy",arguments);e._triggerMethod(this,"destroy",arguments);this.stopListening();this.off();return this},triggerMethod:e.triggerMethod,mergeOptions:e.mergeOptions,getOption:e.proxyGetOption});e.Object=function(a){this.options=c.extend({},c.result(this,"options"),a);this.initialize.apply(this,arguments)};e.Object.extend=e.extend;c.extend(e.Object.prototype,k.Events,{initialize:function(){},
destroy:function(){this.triggerMethod("before:destroy");this.triggerMethod("destroy");this.stopListening();return this},triggerMethod:e.triggerMethod,mergeOptions:e.mergeOptions,getOption:e.proxyGetOption,bindEntityEvents:e.proxyBindEntityEvents,unbindEntityEvents:e.proxyUnbindEntityEvents});e.Region=e.Object.extend({constructor:function(a){this.options=a||{};this.el=this.getOption("el");this.el=this.el instanceof k.$?this.el[0]:this.el;if(!this.el)throw new e.Error({name:"NoElError",message:'An "el" must be specified for a region.'});
this.$el=this.getEl(this.el);e.Object.call(this,a)},show:function(a,b){if(this._ensureElement()){this._ensureViewIsIntact(a);var g=b||{},n=a!==this.currentView,k=!!g.preventDestroy,m=!!g.forceShow,p=!!this.currentView;k=n&&!k;n=n||m;p&&this.triggerMethod("before:swapOut",this.currentView,this,b);this.currentView&&delete this.currentView._parent;k?this.empty():p&&n&&this.currentView.off("destroy",this.empty,this);n&&(a.once("destroy",this.empty,this),a.render(),a._parent=this,p&&this.triggerMethod("before:swap",
a,this,b),this.triggerMethod("before:show",a,this,b),e.triggerMethodOn(a,"before:show",a,this,b),p&&this.triggerMethod("swapOut",this.currentView,this,b),n=e.isNodeAttached(this.el),m=c.extend({triggerBeforeAttach:this.triggerBeforeAttach,triggerAttach:this.triggerAttach},g),n&&m.triggerBeforeAttach&&(g=this._displayedViews(a),this._triggerAttach(g,"before:")),this.attachHtml(a),this.currentView=a,n&&m.triggerAttach&&(g=this._displayedViews(a),this._triggerAttach(g)),p&&this.triggerMethod("swap",
a,this,b),this.triggerMethod("show",a,this,b),e.triggerMethodOn(a,"show",a,this,b));return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(a,b){var g=(b||"")+"attach";c.each(a,function(a){e.triggerMethodOn(a,g,a,this)},this)},_displayedViews:function(a){return c.union([a],c.result(a,"_getNestedViews")||[])},_ensureElement:function(){c.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);if(!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;
throw new e.Error('An "el" '+this.$el.selector+" must exist in DOM");}return!0},_ensureViewIsIntact:function(a){if(!a)throw new e.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(a.isDestroyed)throw new e.Error({name:"ViewDestroyedError",message:'View (cid: "'+a.cid+'") has already been destroyed and cannot be used.'});},getEl:function(a){return k.$(a,e._getValue(this.options.parentEl,this))},attachHtml:function(a){this.$el.contents().detach();
this.el.appendChild(a.el)},empty:function(a){var b=this.currentView;a=e._getValue(a,"preventDestroy",this);if(b)return b.off("destroy",this.empty,this),this.triggerMethod("before:empty",b),a||this._destroyView(),this.triggerMethod("empty",b),delete this.currentView,a&&this.$el.contents().detach(),this},_destroyView:function(){var a=this.currentView;a.destroy&&!a.isDestroyed?a.destroy():a.remove&&(a.remove(),a.isDestroyed=!0)},attachView:function(a){this.currentView=a;return this},hasView:function(){return!!this.currentView},
reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el;return this}},{buildRegion:function(a,b){if(c.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(c.isFunction(a))return this._buildRegionFromRegionClass(a);throw new e.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"});},_buildRegionFromSelector:function(a,b){return new b({el:a})},
_buildRegionFromObject:function(a,b){b=a.regionClass||b;var e=c.omit(a,"selector","regionClass");a.selector&&!e.el&&(e.el=a.selector);return new b(e)},_buildRegionFromRegionClass:function(a){return new a}});e.RegionManager=e.Controller.extend({constructor:function(a){this._regions={};this.length=0;e.Controller.call(this,a);this.addRegions(this.getOption("regions"))},addRegions:function(a,b){a=e._getValue(a,this,arguments);return c.reduce(a,function(a,e,k){c.isString(e)&&(e={selector:e});e.selector&&
(e=c.defaults({},e,b));a[k]=this.addRegion(k,e);return a},{},this)},addRegion:function(a,b){b=b instanceof e.Region?b:e.Region.buildRegion(b,e.Region);this.triggerMethod("before:add:region",a,b);b._parent=this;this._store(a,b);this.triggerMethod("add:region",a,b);return b},get:function(a){return this._regions[a]},getRegions:function(){return c.clone(this._regions)},removeRegion:function(a){var b=this._regions[a];this._remove(a,b);return b},removeRegions:function(){var a=this.getRegions();c.each(this._regions,
function(a,c){this._remove(c,a)},this);return a},emptyRegions:function(){var a=this.getRegions();c.invoke(a,"empty");return a},destroy:function(){this.removeRegions();return e.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]||this.length++;this._regions[a]=b},_remove:function(a,b){this.triggerMethod("before:remove:region",a,b);b.empty();b.stopListening();delete b._parent;delete this._regions[a];this.length--;this.triggerMethod("remove:region",a,b)}});e.actAsCollection(e.RegionManager.prototype,
"_regions");e.TemplateCache=function(a){this.templateId=a};c.extend(e.TemplateCache,{templateCaches:{},get:function(a,b){var c=this.templateCaches[a];c||(c=new e.TemplateCache(a),this.templateCaches[a]=c);return c.load(b)},clear:function(){var a,b=c.toArray(arguments),e=b.length;if(0<e)for(a=0;a<e;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});c.extend(e.TemplateCache.prototype,{load:function(a){if(this.compiledTemplate)return this.compiledTemplate;var b=this.loadTemplate(this.templateId,
a);return this.compiledTemplate=this.compileTemplate(b,a)},loadTemplate:function(a,b){b=k.$(a).html();if(!b||0===b.length)throw new e.Error({name:"NoTemplateError",message:'Could not find template: "'+a+'"'});return b},compileTemplate:function(a,b){return c.template(a,b)}});e.Renderer={render:function(a,b){if(!a)throw new e.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});return(c.isFunction(a)?a:e.TemplateCache.get(a))(b)}};e.View=k.View.extend({isDestroyed:!1,
constructor:function(a){c.bindAll(this,"render");a=e._getValue(a,this);this.options=c.extend({},c.result(this,"options"),a);this._behaviors=e.Behaviors(this);k.View.call(this,this.options);e.MonitorDOMRefresh(this)},getTemplate:function(){return this.getOption("template")},serializeModel:function(a){return a.toJSON.apply(a,c.rest(arguments))},mixinTemplateHelpers:function(a){a=a||{};var b=this.getOption("templateHelpers");b=e._getValue(b,this);return c.extend(a,b)},normalizeUIKeys:function(a){var b=
c.result(this,"_uiBindings");return e.normalizeUIKeys(a,b||c.result(this,"ui"))},normalizeUIValues:function(a,b){var g=c.result(this,"ui"),n=c.result(this,"_uiBindings");return e.normalizeUIValues(a,n||g,b)},configureTriggers:function(){if(this.triggers){var a=this.normalizeUIKeys(c.result(this,"triggers"));return c.reduce(a,function(a,c,e){a[e]=this._buildViewTrigger(c);return a},{},this)}},delegateEvents:function(a){this._delegateDOMEvents(a);this.bindEntityEvents(this.model,this.getOption("modelEvents"));
this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));c.each(this._behaviors,function(a){a.bindEntityEvents(this.model,a.getOption("modelEvents"));a.bindEntityEvents(this.collection,a.getOption("collectionEvents"))},this);return this},_delegateDOMEvents:function(a){var b=e._getValue(a||this.events,this);b=this.normalizeUIKeys(b);c.isUndefined(a)&&(this.events=b);a={};var g=c.result(this,"behaviorEvents")||{},n=this.configureTriggers(),m=c.result(this,"behaviorTriggers")||{};c.extend(a,
g,b,n,m);k.View.prototype.delegateEvents.call(this,a)},undelegateEvents:function(){k.View.prototype.undelegateEvents.apply(this,arguments);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));c.each(this._behaviors,function(a){a.unbindEntityEvents(this.model,a.getOption("modelEvents"));a.unbindEntityEvents(this.collection,a.getOption("collectionEvents"))},this);return this},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new e.Error({name:"ViewDestroyedError",
message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'});},destroy:function(){if(this.isDestroyed)return this;var a=c.toArray(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(a));this.unbindUIElements();this.isRendered=!1;this.remove();c.invoke(this._behaviors,"destroy",a);return this},bindUIElements:function(){this._bindUIElements();c.invoke(this._behaviors,this._bindUIElements)},
_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={};c.each(a,function(a,c){this.ui[c]=this.$(a)},this)}},unbindUIElements:function(){this._unbindUIElements();c.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(a){var b=c.isObject(a),e=c.defaults({},
b?a:{},{preventDefault:!0,stopPropagation:!0}),n=b?e.event:a;return function(a){a&&(a.preventDefault&&e.preventDefault&&a.preventDefault(),a.stopPropagation&&e.stopPropagation&&a.stopPropagation());this.triggerMethod(n,{view:this,model:this.model,collection:this.collection})}},setElement:function(){var a=k.View.prototype.setElement.apply(this,arguments);c.invoke(this._behaviors,"proxyViewProperties",this);return a},triggerMethod:function(){var a=e._triggerMethod(this,arguments);this._triggerEventOnBehaviors(arguments);
this._triggerEventOnParentLayout(arguments[0],c.rest(arguments));return a},_triggerEventOnBehaviors:function(a){for(var b=e._triggerMethod,c=this._behaviors,n=0,k=c&&c.length;n<k;n++)b(c[n],a)},_triggerEventOnParentLayout:function(a,b){var g=this._parentLayoutView();if(g){var n=e.getOption(g,"childViewEventPrefix");e._triggerMethod(g,[n+":"+a,this].concat(b));n=e.getOption(g,"childEvents");(n=g.normalizeMethods(n))&&c.isFunction(n[a])&&n[a].apply(g,[this].concat(b))}},_getImmediateChildren:function(){return[]},
_getNestedViews:function(){var a=this._getImmediateChildren();return a.length?c.reduce(a,function(a,c){return c._getNestedViews?a.concat(c._getNestedViews()):a},a):a},_getAncestors:function(){for(var a=[],b=this._parent;b;)a.push(b),b=b._parent;return a},_parentLayoutView:function(){var a=this._getAncestors();return c.find(a,function(a){return a instanceof e.LayoutView})},normalizeMethods:e.normalizeMethods,mergeOptions:e.mergeOptions,getOption:e.proxyGetOption,bindEntityEvents:e.proxyBindEntityEvents,
unbindEntityEvents:e.proxyUnbindEntityEvents});e.ItemView=e.View.extend({constructor:function(){e.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var a=[this.model||this.collection];arguments.length&&a.push.apply(a,arguments);return this.model?this.serializeModel.apply(this,a):{items:this.serializeCollection.apply(this,a)}},serializeCollection:function(a){return a.toJSON.apply(a,c.rest(arguments))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",
this);this._renderTemplate();this.isRendered=!0;this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){if(!a)throw new e.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var b=this.mixinTemplateHelpers(this.serializeData());a=e.Renderer.render(a,b,this);this.attachElContent(a);return this}},attachElContent:function(a){this.$el.html(a);return this}});e.CollectionView=
e.View.extend({childViewEventPrefix:"childview",sort:!0,constructor:function(a){this.once("render",this._initialEvents);this._initChildViewStorage();e.View.apply(this,arguments);this.on({"before:show":this._onBeforeShowCalled,show:this._onShowCalled,"before:attach":this._onBeforeAttachCalled,attach:this._onAttachCalled});this.initRenderBuffer()},initRenderBuffer:function(){this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){var a=
this._isShown&&e.isNodeAttached(this.el);this.isBuffering=!1;this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"before:show");if(a&&this._triggerBeforeAttach){var b=this._getNestedViews();this._triggerMethodMany(b,this,"before:attach")}this.attachBuffer(this,this._createBuffer());a&&this._triggerAttach&&(b=this._getNestedViews(),this._triggerMethodMany(b,this,"attach"));this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"show");this.initRenderBuffer()},_triggerMethodMany:function(a,
b,g){var n=c.drop(arguments,3);c.each(a,function(a){e.triggerMethodOn.apply(a,[a,g,a,b].concat(n))})},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(a,b,e){b=void 0!==e.at?e.at:c.indexOf(this._filteredSortedModels(),a);this._shouldAddChild(a,
b)&&(this.destroyEmptyView(),e=this.getChildView(a),this.addChild(a,e,b))},_onCollectionRemove:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},_onBeforeShowCalled:function(){this._triggerBeforeAttach=this._triggerAttach=!1;this.children.each(function(a){e.triggerMethodOn(a,"before:show",a)})},_onShowCalled:function(){this.children.each(function(a){e.triggerMethodOn(a,"show",a)})},_onBeforeAttachCalled:function(){this._triggerBeforeAttach=!0},_onAttachCalled:function(){this._triggerAttach=
!0},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.isRendered=!0;this.triggerMethod("render",this);return this},reorder:function(){var a=this.children,b=this._filteredSortedModels();c.find(b,function(b){return!a.findByModel(b)})?this.render():(b=c.map(b,function(b,c){b=a.findByModel(b);b._index=c;return b.el}),this.triggerMethod("before:reorder"),this._appendReorderedChildren(b),this.triggerMethod("reorder"))},resortView:function(){e.getOption(this,
"reorderOnSort")?this.reorder():this.render()},_sortViews:function(){var a=this._filteredSortedModels();c.find(a,function(a,c){a=this.children.findByModel(a);return!a||a._index!==c},this)&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(a){this.$el.append(a)},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren({checkEmpty:!1});this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),
this.endBuffering(),this.triggerMethod("render:collection",this),this.children.isEmpty()&&this.showEmptyView())},showCollection:function(){var a,b=this._filteredSortedModels();c.each(b,function(b,c){a=this.getChildView(b);this.addChild(b,a,c)},this)},_filteredSortedModels:function(){var a=(a=this.getViewComparator())?c.isString(a)||1===a.length?this.collection.sortBy(a,this):c.clone(this.collection.models).sort(c.bind(a,this)):this.collection.models;this.getOption("filter")&&(a=c.filter(a,function(a,
c){return this._shouldAddChild(a,c)},this));return a},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=!0;var b=new k.Model;this.addEmptyView(b,a);this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},
addEmptyView:function(a,b){var g=this._isShown&&!this.isBuffering&&e.isNodeAttached(this.el),n=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");c.isFunction(n)&&(n=n.call(this,a,this._emptyViewIndex));a=this.buildChildView(a,b,n);a._parent=this;this.proxyChildEvents(a);this._isShown&&e.triggerMethodOn(a,"before:show",a);this.children.add(a);if(g&&this._triggerBeforeAttach){var k=[a].concat(a._getNestedViews());a.once("render",function(){this._triggerMethodMany(k,this,"before:attach")},
this)}this.renderChildView(a,this._emptyViewIndex);g&&this._triggerAttach&&(k=[a].concat(a._getNestedViews()),this._triggerMethodMany(k,this,"attach"));this._isShown&&e.triggerMethodOn(a,"show",a)},getChildView:function(a){a=this.getOption("childView");if(!a)throw new e.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return a},addChild:function(a,b,c){var g=this.getOption("childViewOptions");g=e._getValue(g,this,[a,c]);a=this.buildChildView(a,b,g);this._updateIndices(a,
!0,c);this.triggerMethod("before:add:child",a);this._addChildView(a,c);this.triggerMethod("add:child",a);a._parent=this;return a},_updateIndices:function(a,b,c){this.getOption("sort")&&(b&&(a._index=c),this.children.each(function(c){c._index>=a._index&&(c._index+=b?1:-1)}))},_addChildView:function(a,b){var c=this._isShown&&!this.isBuffering&&e.isNodeAttached(this.el);this.proxyChildEvents(a);this._isShown&&!this.isBuffering&&e.triggerMethodOn(a,"before:show",a);this.children.add(a);if(c&&this._triggerBeforeAttach){var k=
[a].concat(a._getNestedViews());a.once("render",function(){this._triggerMethodMany(k,this,"before:attach")},this)}this.renderChildView(a,b);c&&this._triggerAttach&&(k=[a].concat(a._getNestedViews()),this._triggerMethodMany(k,this,"attach"));this._isShown&&!this.isBuffering&&e.triggerMethodOn(a,"show",a)},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b);return a},buildChildView:function(a,b,e){a=c.extend({model:a},e);return new b(a)},removeChildView:function(a){a&&(this.triggerMethod("before:remove:child",
a),a.destroy?a.destroy():a.remove&&a.remove(),delete a._parent,this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1));return a},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},_createBuffer:function(){var a=document.createDocumentFragment();c.each(this._bufferedChildren,function(b){a.appendChild(b.el)});
return a},attachHtml:function(a,b,c){a.isBuffering?a._bufferedChildren.splice(c,0,b):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;this.getOption("sort")&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1}));return c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},_initChildViewStorage:function(){this.children=new k.ChildViewContainer},destroy:function(){if(this.isDestroyed)return this;this.triggerMethod("before:destroy:collection");
this.destroyChildren({checkEmpty:!1});this.triggerMethod("destroy:collection");return e.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(a){a=a||{};var b=!0,e=this.children.map(c.identity);c.isUndefined(a.checkEmpty)||(b=a.checkEmpty);this.children.each(this.removeChildView,this);b&&this.checkEmpty();return e},_shouldAddChild:function(a,b){var e=this.getOption("filter");return!c.isFunction(e)||e.call(this,a,b,this.collection)},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");
this.listenTo(a,"all",function(){var e=c.toArray(arguments),k=e[0],m=this.normalizeMethods(c.result(this,"childEvents"));e[0]=b+":"+k;e.splice(1,0,a);"undefined"!==typeof m&&c.isFunction(m[k])&&m[k].apply(this,e.slice(1));this.triggerMethod.apply(this,e)})},_getImmediateChildren:function(){return c.values(this.children._views)},getViewComparator:function(){return this.getOption("viewComparator")}});e.CompositeView=e.CollectionView.extend({constructor:function(){e.CollectionView.apply(this,arguments)},
_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(a){return this.getOption("childView")||this.constructor},serializeData:function(){var a={};this.model&&(a=c.partial(this.serializeModel,this.model).apply(this,arguments));
return a},render:function(){this._ensureViewIsIntact();this._isRendering=!0;this.resetChildViewContainer();this.triggerMethod("before:render",this);this._renderTemplate();this._renderChildren();this._isRendering=!1;this.isRendered=!0;this.triggerMethod("render",this);return this},_renderChildren:function(){(this.isRendered||this._isRendering)&&e.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a=this.serializeData();a=this.mixinTemplateHelpers(a);this.triggerMethod("before:render:template");
var b=this.getTemplate();a=e.Renderer.render(b,a,this);this.attachElContent(a);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(a){this.$el.html(a);return this},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this,a).append(a.el)},_appendReorderedChildren:function(a){this.getChildViewContainer(this).append(a)},getChildViewContainer:function(a,b){if(a.$childViewContainer)return a.$childViewContainer;
if(b=e.getOption(a,"childViewContainer")){if(b=e._getValue(b,a),b="@"===b.charAt(0)&&a.ui?a.ui[b.substr(4)]:a.$(b),0>=b.length)throw new e.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+a.childViewContainer});}else b=a.$el;return a.$childViewContainer=b},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}});e.LayoutView=e.ItemView.extend({regionClass:e.Region,options:{destroyImmediate:!1},childViewEventPrefix:"childview",
constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);e.ItemView.call(this,a)},render:function(){this._ensureViewIsIntact();this._firstRender?this._firstRender=!1:this._reInitializeRegions();return e.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed)return this;!0===this.getOption("destroyImmediate")&&this.$el.remove();this.regionManager.destroy();return e.ItemView.prototype.destroy.apply(this,arguments)},showChildView:function(a,b){return this.getRegion(a).show(b)},
getChildView:function(a){return this.getRegion(a).currentView},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=c.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(a){var b={regionClass:this.getOption("regionClass"),
parentEl:c.partial(c.result,this,"el")};return this.regionManager.addRegions(a,b)},_initializeRegions:function(a){this._initRegionManager();var b=e._getValue(this.regions,this,[a])||{};var g=this.getOption.call(a,"regions");g=e._getValue(g,this,[a]);c.extend(b,g);b=this.normalizeUIValues(b,["selector","el"]);this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new e.RegionManager},_initRegionManager:function(){this.regionManager=
this.getRegionManager();this.regionManager._parent=this;this.listenTo(this.regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this.regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",
a,b)})},_getImmediateChildren:function(){return c.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}});e.Behavior=e.Object.extend({constructor:function(a,b){this.view=b;this.defaults=c.result(this,"defaults")||{};this.options=c.extend({},this.defaults,a);this.ui=c.extend({},c.result(b,"ui"),c.result(this,"ui"));e.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening();return this},proxyViewProperties:function(a){this.$el=
a.$el;this.el=a.el}});e.Behaviors=function(a,b){function c(a,e){if(!b.isObject(a.behaviors))return{};e=c.parseBehaviors(a,e||b.result(a,"behaviors"));c.wrap(a,e,b.keys(m));return e}function e(a,b){this._view=a;this._behaviors=b;this._triggers={}}var k=/^(\S+)\s*(.*)$/,m={behaviorTriggers:function(a,b){return(new e(this,b)).buildBehaviorTriggers()},behaviorEvents:function(c,e){var g={};b.each(e,function(c,e){var d={},n=b.clone(b.result(c,"events"))||{};n=a.normalizeUIKeys(n,c._uiBindings||c.ui);var p=
0;b.each(n,function(a,g){g=g.match(k);g=g[1]+"."+[this.cid,e,p++," "].join("")+g[2];a=b.isFunction(a)?a:c[a];d[g]=b.bind(a,c)},this);g=b.extend(g,d)},this);return g}};b.extend(c,{behaviorsLookup:function(){throw new a.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"});},getBehaviorClass:function(b,e){return b.behaviorClass?b.behaviorClass:a._getValue(c.behaviorsLookup,this,[b,e])[e]},parseBehaviors:function(a,e){return b.chain(e).map(function(e,
d){e=new (c.getBehaviorClass(e,d))(e,a);d=c.parseBehaviors(a,b.result(e,"behaviors"));return[e].concat(d)}).flatten().value()},wrap:function(a,c,e){b.each(e,function(d){a[d]=b.partial(m[d],a[d],c)})}});b.extend(e.prototype,{buildBehaviorTriggers:function(){b.each(this._behaviors,this._buildTriggerHandlersForBehavior,this);return this._triggers},_buildTriggerHandlersForBehavior:function(c,e){var g=b.clone(b.result(c,"triggers"))||{};g=a.normalizeUIKeys(g,c._uiBindings||c.ui);b.each(g,b.bind(this._setHandlerForBehavior,
this,c,e))},_setHandlerForBehavior:function(a,b,c,d){a=d.replace(/^\S+/,function(a){return a+".behaviortriggers"+b});this._triggers[a]=this._view._buildViewTrigger(c)}});return c}(e,c);e.AppRouter=k.Router.extend({constructor:function(a){this.options=a||{};k.Router.apply(this,arguments);var b=this.getOption("appRoutes"),c=this._getController();this.processAppRoutes(c,b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,
b){if(c.isFunction(this.onRoute)){var e=c.invert(this.getOption("appRoutes"))[a];this.onRoute(a,e,b)}},processAppRoutes:function(a,b){if(b){var e=c.keys(b).reverse();c.each(e,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(a,b,g){var k=a[g];if(!k)throw new e.Error('Method "'+g+'" was not found on the controller');this.route(b,g,c.bind(k,a))},mergeOptions:e.mergeOptions,getOption:e.proxyGetOption,triggerMethod:e.triggerMethod,
bindEntityEvents:e.proxyBindEntityEvents,unbindEntityEvents:e.proxyUnbindEntityEvents});e.Application=e.Object.extend({constructor:function(a){this._initializeRegions(a);this._initCallbacks=new e.Callbacks;this.submodules={};c.extend(this,a);this._initChannel();e.Object.call(this,a)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("before:start",
a);this._initCallbacks.run(a,this);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,b){var g=e.Module.getClass(b),k=c.toArray(arguments);k.unshift(this);return g.create.apply(g,k)},
getRegionManager:function(){return new e.RegionManager},_initializeRegions:function(a){var b=c.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var g=e.getOption(a,"regions");c.isFunction(g)&&(g=g.call(this,a));c.extend(b,g);this.addRegions(b);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this._regionManager._parent=this;this.listenTo(this._regionManager,"before:add:region",function(){e._triggerMethod(this,"before:add:region",
arguments)});this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b;e._triggerMethod(this,"add:region",arguments)});this.listenTo(this._regionManager,"before:remove:region",function(){e._triggerMethod(this,"before:remove:region",arguments)});this.listenTo(this._regionManager,"remove:region",function(a){delete this[a];e._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=c.result(this,"channelName")||"global";this.channel=c.result(this,"channel")||
k.Wreqr.radio.channel(this.channelName);this.vent=c.result(this,"vent")||this.channel.vent;this.commands=c.result(this,"commands")||this.channel.commands;this.reqres=c.result(this,"reqres")||this.channel.reqres}});e.Module=function(a,b,e){this.moduleName=a;this.options=c.extend({},this.options,e);this.initialize=e.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;c.isFunction(this.initialize)&&this.initialize(a,b,this.options)};e.Module.extend=e.extend;
c.extend(e.Module.prototype,k.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),
c.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){a&&(b=c.flatten([this,this.app,k,e,k.$,c,b]),a.apply(this,b))},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new e.Callbacks;this._finalizerCallbacks=new e.Callbacks},triggerMethod:e.triggerMethod});c.extend(e.Module,
{create:function(a,b,e){var g=a,k=c.drop(arguments,3);b=b.split(".");var m=[];m[b.length-1]=e;c.each(b,function(b,c){var n=g;g=this._getModule(n,b,a,e);this._addModuleDefinition(n,g,m[c],k)},this);return g},_getModule:function(a,b,e,k,m){m=c.extend({},k);k=this.getClass(k);var g=a[b];g||(g=new k(b,e,m),a[b]=g,a.submodules[b]=g);return g},getClass:function(a){var b=e.Module;return a?a.prototype instanceof b?a:a.moduleClass||b:b},_addModuleDefinition:function(a,b,c,e){var g=this._getDefine(c);c=this._getStartWithParent(c,
b);g&&b.addDefinition(g,e);this._addStartWithParent(a,b,c)},_getStartWithParent:function(a,b){return c.isFunction(a)&&a.prototype instanceof e.Module?(a=b.constructor.prototype.startWithParent,c.isUndefined(a)?!0:a):c.isObject(a)?(a=a.startWithParent,c.isUndefined(a)?!0:a):!0},_getDefine:function(a){return!c.isFunction(a)||a.prototype instanceof e.Module?c.isObject(a)?a.define:null:a},_addStartWithParent:function(a,b,c){b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&
(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});return e});
define("handlebars.translate",["jquery","module","handlebars"],function(m,k,c){function r(c,e){this.options=e||{};this.i18nCache={};this.text=e.text||{};this.registerHelper(c)}r.prototype={registerHelper:function(c,e){var k="function"===typeof e?e:this.t,m=this;c.registerHelper("i18n",function(a,b){return k.call(m,a)});return this},setText:function(c){this.text=c;return this},setOptions:function(c,e){if(c){if(e){var k=c;c={};c[k]=e}m.extend(this.options,c);c.text&&this.setText(c.text)}return this},
t:function(c){if(this.i18nCache[c])return this.i18nCache[c];if(0<c.indexOf(".")){var e=this.text;for(var k=c.split("."),r=0;e&&r<k.length;)e=e[k[r++]]}else e=this.text[c];return e?this.i18nCache[c]=e:(m.log("Handlebars.i18n: translation for the key '"+c+"' could not be found"),this.options.debug?c:"")}};return new r(c,{text:k.config().i18n||{}})});require(["backbone.mixins"]);