/*

 Includes BabySitter
 https://github.com/marionettejs/backbone.babysitter/

 Includes Wreqr
 https://github.com/marionettejs/backbone.wreqr/
*/
define("dealerlocator/services/MapUtilsStub",["jquery","./"+bm.config.dealerLocator.mapService+"/MapUtils"],function(g,b){function a(){}a.prototype={loadApi:function(a,b){var d=bm.config.dealerLocator.mapServiceConfig[bm.config.dealerLocator.mapService].inlineMap.url,c=document.createElement("script"),f=g.noop,e=b||g.noop;c.type="text/javascript";b=function(){var a=document.createElement("DIV");a.innerHTML="\x3c!--[if lte IE 8]\x3e\x3cI\x3e\x3c/I\x3e\x3c![endif]--\x3e";return 0<a.getElementsByTagName("I").length}();
"string"===typeof a?d+="\x26callback\x3d"+a:"function"===typeof a&&(f=a);b?c.onreadystatechange=function(a){return function(){if(/loaded|complete/.test(a.readyState))if("complete"===c.readyState){var b=document.head;b||(b=document.getElementsByTagName("head")[0]);b.appendChild(c);f()}else b=c.readyState,c.children,"loaded"===b&&"loading"===c.readyState&&e()}}(c):(c.onload=f,c.onerror=e);c.src=d;b||document.body.appendChild(c);g.log("MapUtilsStub",c)},stringifyOption:function(a,b,d){b||(b=":");d||
(d="|");var c=[],f;for(f in a)a.hasOwnProperty(f)&&c.push(f+b+a[f]);return c.join(d)},stringifyMarkerStyle:function(a){return""},stringifyPathStyle:function(a){return""},getStaticMapUrl:function(a){},getCurrentPosition:function(a){var b=g.Deferred();a=g.extend({enableHighAccuracy:!1,timeout:bm.config.dealerLocator.geolocationTimeout,maximumAge:0},a);navigator.geolocation.getCurrentPosition(function(a){b.resolve(a.coords.latitude,a.coords.longitude)},function(a){g.log("App.getCurrentPosition error",
a,a.message);var c=null;switch(a.code){case a.PERMISSION_DENIED:c="PERMISSION_DENIED";break;case a.POSITION_UNAVAILABLE:c="POSITION_UNAVAILABLE";break;case a.TIMEOUT:c="TIMEOUT"}b.reject(c)},a);return b.promise()},createIcon:function(a){return a}};g.extend(a.prototype,b);return new a});
(function(){function g(a){return function(b,e,c,d){e=y(e,d,4);var f=!D(b)&&k.keys(b),m=(f||b).length,h=0<a?0:m-1;3>arguments.length&&(c=b[f?f[h]:h],h+=a);for(var g=e,l=c;0<=h&&h<m;h+=a){var N=f?f[h]:h;l=g(l,b[N],N,b)}return l}}function b(a){return function(b,e,c){e=x(e,c);c=u(b);for(var d=0<a?0:c-1;0<=d&&d<c;d+=a)if(e(b[d],d,b))return d;return-1}}function a(a,b,e){return function(c,d,f){var h=0,g=u(c);if("number"==typeof f)0<a?h=0<=f?f:Math.max(f+g,h):g=0<=f?Math.min(f+1,g):f+g+1;else if(e&&f&&g)return f=
e(c,d),c[f]===d?f:-1;if(d!==d)return f=b(m.call(c,h,g),k.isNaN),0<=f?f+h:-1;for(f=0<a?h:g-1;0<=f&&f<g;f+=a)if(c[f]===d)return f;return-1}}function f(a,b){var e=I.length,c=a.constructor;c=k.isFunction(c)&&c.prototype||h;var d="constructor";for(k.has(a,d)&&!k.contains(b,d)&&b.push(d);e--;)d=I[e],d in a&&a[d]!==c[d]&&!k.contains(b,d)&&b.push(d)}var l=this,d=l._,c=Array.prototype,h=Object.prototype,e=c.push,m=c.slice,n=h.toString,p=h.hasOwnProperty,r=Array.isArray,w=Object.keys,v=Function.prototype.bind,
z=Object.create,C=function(){},k=function(a){if(a instanceof k)return a;if(!(this instanceof k))return new k(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=k),exports._=k):l._=k;k.VERSION="1.8.3";var y=function(a,b,e){if(void 0===b)return a;switch(null==e?3:e){case 1:return function(e){return a.call(b,e)};case 2:return function(e,c){return a.call(b,e,c)};case 3:return function(e,c,d){return a.call(b,e,c,d)};case 4:return function(e,
c,d,f){return a.call(b,e,c,d,f)}}return function(){return a.apply(b,arguments)}},x=function(a,b,e){return null==a?k.identity:k.isFunction(a)?y(a,b,e):k.isObject(a)?k.matcher(a):k.property(a)};k.iteratee=function(a,b){return x(a,b,Infinity)};var G=function(a,b){return function(e){var c=arguments.length;if(2>c||null==e)return e;for(var d=1;d<c;d++)for(var f=arguments[d],m=a(f),h=m.length,g=0;g<h;g++){var l=m[g];b&&void 0!==e[l]||(e[l]=f[l])}return e}},J=function(a){if(!k.isObject(a))return{};if(z)return z(a);
C.prototype=a;a=new C;C.prototype=null;return a},H=function(a){return function(b){return null==b?void 0:b[a]}},t=Math.pow(2,53)-1,u=H("length"),D=function(a){a=u(a);return"number"==typeof a&&0<=a&&a<=t};k.each=k.forEach=function(a,b,e){b=y(b,e);var c;if(D(a))for(e=0,c=a.length;e<c;e++)b(a[e],e,a);else{var d=k.keys(a);e=0;for(c=d.length;e<c;e++)b(a[d[e]],d[e],a)}return a};k.map=k.collect=function(a,b,e){b=x(b,e);e=!D(a)&&k.keys(a);for(var c=(e||a).length,d=Array(c),f=0;f<c;f++){var m=e?e[f]:f;d[f]=
b(a[m],m,a)}return d};k.reduce=k.foldl=k.inject=g(1);k.reduceRight=k.foldr=g(-1);k.find=k.detect=function(a,b,e){b=D(a)?k.findIndex(a,b,e):k.findKey(a,b,e);if(void 0!==b&&-1!==b)return a[b]};k.filter=k.select=function(a,b,e){var c=[];b=x(b,e);k.each(a,function(a,e,d){b(a,e,d)&&c.push(a)});return c};k.reject=function(a,b,e){return k.filter(a,k.negate(x(b)),e)};k.every=k.all=function(a,b,e){b=x(b,e);e=!D(a)&&k.keys(a);for(var c=(e||a).length,d=0;d<c;d++){var f=e?e[d]:d;if(!b(a[f],f,a))return!1}return!0};
k.some=k.any=function(a,b,e){b=x(b,e);e=!D(a)&&k.keys(a);for(var c=(e||a).length,d=0;d<c;d++){var f=e?e[d]:d;if(b(a[f],f,a))return!0}return!1};k.contains=k.includes=k.include=function(a,b,e,c){D(a)||(a=k.values(a));if("number"!=typeof e||c)e=0;return 0<=k.indexOf(a,b,e)};k.invoke=function(a,b){var e=m.call(arguments,2),c=k.isFunction(b);return k.map(a,function(a){var d=c?b:a[b];return null==d?d:d.apply(a,e)})};k.pluck=function(a,b){return k.map(a,k.property(b))};k.where=function(a,b){return k.filter(a,
k.matcher(b))};k.findWhere=function(a,b){return k.find(a,k.matcher(b))};k.max=function(a,b,e){var c=-Infinity,d=-Infinity,f;if(null==b&&null!=a){a=D(a)?a:k.values(a);for(var m=0,h=a.length;m<h;m++)e=a[m],e>c&&(c=e)}else b=x(b,e),k.each(a,function(a,e,m){f=b(a,e,m);if(f>d||-Infinity===f&&-Infinity===c)c=a,d=f});return c};k.min=function(a,b,e){var c=Infinity,d=Infinity,f;if(null==b&&null!=a){a=D(a)?a:k.values(a);for(var m=0,h=a.length;m<h;m++)e=a[m],e<c&&(c=e)}else b=x(b,e),k.each(a,function(a,e,m){f=
b(a,e,m);if(f<d||Infinity===f&&Infinity===c)c=a,d=f});return c};k.shuffle=function(a){a=D(a)?a:k.values(a);for(var b=a.length,e=Array(b),c=0,d;c<b;c++)d=k.random(0,c),d!==c&&(e[c]=e[d]),e[d]=a[c];return e};k.sample=function(a,b,e){return null==b||e?(D(a)||(a=k.values(a)),a[k.random(a.length-1)]):k.shuffle(a).slice(0,Math.max(0,b))};k.sortBy=function(a,b,e){b=x(b,e);return k.pluck(k.map(a,function(a,e,c){return{value:a,index:e,criteria:b(a,e,c)}}).sort(function(a,b){var e=a.criteria,c=b.criteria;if(e!==
c){if(e>c||void 0===e)return 1;if(e<c||void 0===c)return-1}return a.index-b.index}),"value")};var q=function(a){return function(b,e,c){var d={};e=x(e,c);k.each(b,function(c,f){f=e(c,f,b);a(d,c,f)});return d}};k.groupBy=q(function(a,b,e){k.has(a,e)?a[e].push(b):a[e]=[b]});k.indexBy=q(function(a,b,e){a[e]=b});k.countBy=q(function(a,b,e){k.has(a,e)?a[e]++:a[e]=1});k.toArray=function(a){return a?k.isArray(a)?m.call(a):D(a)?k.map(a,k.identity):k.values(a):[]};k.size=function(a){return null==a?0:D(a)?a.length:
k.keys(a).length};k.partition=function(a,b,e){b=x(b,e);var c=[],d=[];k.each(a,function(a,e,f){(b(a,e,f)?c:d).push(a)});return[c,d]};k.first=k.head=k.take=function(a,b,e){if(null!=a)return null==b||e?a[0]:k.initial(a,a.length-b)};k.initial=function(a,b,e){return m.call(a,0,Math.max(0,a.length-(null==b||e?1:b)))};k.last=function(a,b,e){if(null!=a)return null==b||e?a[a.length-1]:k.rest(a,Math.max(0,a.length-b))};k.rest=k.tail=k.drop=function(a,b,e){return m.call(a,null==b||e?1:b)};k.compact=function(a){return k.filter(a,
k.identity)};var E=function(a,b,e,c){var d=[],f=0;c=c||0;for(var m=u(a);c<m;c++){var h=a[c];if(D(h)&&(k.isArray(h)||k.isArguments(h))){b||(h=E(h,b,e));var g=0,l=h.length;for(d.length+=l;g<l;)d[f++]=h[g++]}else e||(d[f++]=h)}return d};k.flatten=function(a,b){return E(a,b,!1)};k.without=function(a){return k.difference(a,m.call(arguments,1))};k.uniq=k.unique=function(a,b,e,c){k.isBoolean(b)||(c=e,e=b,b=!1);null!=e&&(e=x(e,c));c=[];for(var d=[],f=0,m=u(a);f<m;f++){var h=a[f],g=e?e(h,f,a):h;b?(f&&d===
g||c.push(h),d=g):e?k.contains(d,g)||(d.push(g),c.push(h)):k.contains(c,h)||c.push(h)}return c};k.union=function(){return k.uniq(E(arguments,!0,!0))};k.intersection=function(a){for(var b=[],e=arguments.length,c=0,d=u(a);c<d;c++){var f=a[c];if(!k.contains(b,f)){for(var m=1;m<e&&k.contains(arguments[m],f);m++);m===e&&b.push(f)}}return b};k.difference=function(a){var b=E(arguments,!0,!0,1);return k.filter(a,function(a){return!k.contains(b,a)})};k.zip=function(){return k.unzip(arguments)};k.unzip=function(a){for(var b=
a&&k.max(a,u).length||0,e=Array(b),c=0;c<b;c++)e[c]=k.pluck(a,c);return e};k.object=function(a,b){for(var e={},c=0,d=u(a);c<d;c++)b?e[a[c]]=b[c]:e[a[c][0]]=a[c][1];return e};k.findIndex=b(1);k.findLastIndex=b(-1);k.sortedIndex=function(a,b,e,c){e=x(e,c,1);b=e(b);c=0;for(var d=u(a);c<d;){var f=Math.floor((c+d)/2);e(a[f])<b?c=f+1:d=f}return c};k.indexOf=a(1,k.findIndex,k.sortedIndex);k.lastIndexOf=a(-1,k.findLastIndex);k.range=function(a,b,e){null==b&&(b=a||0,a=0);e=e||1;b=Math.max(Math.ceil((b-a)/
e),0);for(var c=Array(b),d=0;d<b;d++,a+=e)c[d]=a;return c};var B=function(a,b,e,c,d){if(!(c instanceof b))return a.apply(e,d);b=J(a.prototype);a=a.apply(b,d);return k.isObject(a)?a:b};k.bind=function(a,b){if(v&&a.bind===v)return v.apply(a,m.call(arguments,1));if(!k.isFunction(a))throw new TypeError("Bind must be called on a function");var e=m.call(arguments,2),c=function(){return B(a,c,b,this,e.concat(m.call(arguments)))};return c};k.partial=function(a){var b=m.call(arguments,1),e=function(){for(var c=
0,d=b.length,f=Array(d),m=0;m<d;m++)f[m]=b[m]===k?arguments[c++]:b[m];for(;c<arguments.length;)f.push(arguments[c++]);return B(a,e,this,this,f)};return e};k.bindAll=function(a){var b,e=arguments.length;if(1>=e)throw Error("bindAll must be passed function names");for(b=1;b<e;b++){var c=arguments[b];a[c]=k.bind(a[c],a)}return a};k.memoize=function(a,b){var e=function(c){var d=e.cache,f=""+(b?b.apply(this,arguments):c);k.has(d,f)||(d[f]=a.apply(this,arguments));return d[f]};e.cache={};return e};k.delay=
function(a,b){var e=m.call(arguments,2);return setTimeout(function(){return a.apply(null,e)},b)};k.defer=k.partial(k.delay,k,1);k.throttle=function(a,b,e){var c,d,f,m=null,h=0;e||(e={});var g=function(){h=!1===e.leading?0:k.now();m=null;f=a.apply(c,d);m||(c=d=null)};return function(){var l=k.now();h||!1!==e.leading||(h=l);var n=b-(l-h);c=this;d=arguments;0>=n||n>b?(m&&(clearTimeout(m),m=null),h=l,f=a.apply(c,d),m||(c=d=null)):m||!1===e.trailing||(m=setTimeout(g,n));return f}};k.debounce=function(a,
b,e){var c,d,f,m,h,g=function(){var l=k.now()-m;l<b&&0<=l?c=setTimeout(g,b-l):(c=null,e||(h=a.apply(f,d),c||(f=d=null)))};return function(){f=this;d=arguments;m=k.now();var l=e&&!c;c||(c=setTimeout(g,b));l&&(h=a.apply(f,d),f=d=null);return h}};k.wrap=function(a,b){return k.partial(b,a)};k.negate=function(a){return function(){return!a.apply(this,arguments)}};k.compose=function(){var a=arguments,b=a.length-1;return function(){for(var e=b,c=a[b].apply(this,arguments);e--;)c=a[e].call(this,c);return c}};
k.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};k.before=function(a,b){var e;return function(){0<--a&&(e=b.apply(this,arguments));1>=a&&(b=null);return e}};k.once=k.partial(k.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),I="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");k.keys=function(a){if(!k.isObject(a))return[];if(w)return w(a);var b=[],e;for(e in a)k.has(a,e)&&b.push(e);A&&f(a,b);return b};k.allKeys=
function(a){if(!k.isObject(a))return[];var b=[],e;for(e in a)b.push(e);A&&f(a,b);return b};k.values=function(a){for(var b=k.keys(a),e=b.length,c=Array(e),d=0;d<e;d++)c[d]=a[b[d]];return c};k.mapObject=function(a,b,e){b=x(b,e);e=k.keys(a);for(var c=e.length,d={},f,m=0;m<c;m++)f=e[m],d[f]=b(a[f],f,a);return d};k.pairs=function(a){for(var b=k.keys(a),e=b.length,c=Array(e),d=0;d<e;d++)c[d]=[b[d],a[b[d]]];return c};k.invert=function(a){for(var b={},e=k.keys(a),c=0,d=e.length;c<d;c++)b[a[e[c]]]=e[c];return b};
k.functions=k.methods=function(a){var b=[],e;for(e in a)k.isFunction(a[e])&&b.push(e);return b.sort()};k.extend=G(k.allKeys);k.extendOwn=k.assign=G(k.keys);k.findKey=function(a,b,e){b=x(b,e);e=k.keys(a);for(var c,d=0,f=e.length;d<f;d++)if(c=e[d],b(a[c],c,a))return c};k.pick=function(a,b,e){var c={},d=a;if(null==d)return c;if(k.isFunction(b)){var f=k.allKeys(d);var m=y(b,e)}else f=E(arguments,!1,!1,1),m=function(a,b,e){return b in e},d=Object(d);for(var h=0,g=f.length;h<g;h++){var l=f[h],n=d[l];m(n,
l,d)&&(c[l]=n)}return c};k.omit=function(a,b,e){if(k.isFunction(b))b=k.negate(b);else{var c=k.map(E(arguments,!1,!1,1),String);b=function(a,b){return!k.contains(c,b)}}return k.pick(a,b,e)};k.defaults=G(k.allKeys,!0);k.create=function(a,b){a=J(a);b&&k.extendOwn(a,b);return a};k.clone=function(a){return k.isObject(a)?k.isArray(a)?a.slice():k.extend({},a):a};k.tap=function(a,b){b(a);return a};k.isMatch=function(a,b){var e=k.keys(b),c=e.length;if(null==a)return!c;a=Object(a);for(var d=0;d<c;d++){var f=
e[d];if(b[f]!==a[f]||!(f in a))return!1}return!0};var F=function(a,b,e,c){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof k&&(a=a._wrapped);b instanceof k&&(b=b._wrapped);var d=n.call(a);if(d!==n.call(b))return!1;switch(d){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}d="[object Array]"===d;if(!d){if("object"!=typeof a||
"object"!=typeof b)return!1;var f=a.constructor,m=b.constructor;if(f!==m&&!(k.isFunction(f)&&f instanceof f&&k.isFunction(m)&&m instanceof m)&&"constructor"in a&&"constructor"in b)return!1}e=e||[];c=c||[];for(f=e.length;f--;)if(e[f]===a)return c[f]===b;e.push(a);c.push(b);if(d){f=a.length;if(f!==b.length)return!1;for(;f--;)if(!F(a[f],b[f],e,c))return!1}else{d=k.keys(a);f=d.length;if(k.keys(b).length!==f)return!1;for(;f--;)if(m=d[f],!k.has(b,m)||!F(a[m],b[m],e,c))return!1}e.pop();c.pop();return!0};
k.isEqual=function(a,b){return F(a,b)};k.isEmpty=function(a){return null==a?!0:D(a)&&(k.isArray(a)||k.isString(a)||k.isArguments(a))?0===a.length:0===k.keys(a).length};k.isElement=function(a){return!(!a||1!==a.nodeType)};k.isArray=r||function(a){return"[object Array]"===n.call(a)};k.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};k.each("Arguments Function String Number Date RegExp Error".split(" "),function(a){k["is"+a]=function(b){return n.call(b)==="[object "+a+"]"}});
k.isArguments(arguments)||(k.isArguments=function(a){return k.has(a,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(k.isFunction=function(a){return"function"==typeof a||!1});k.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};k.isNaN=function(a){return k.isNumber(a)&&a!==+a};k.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===n.call(a)};k.isNull=function(a){return null===a};k.isUndefined=function(a){return void 0===a};k.has=function(a,b){return null!=a&&
p.call(a,b)};k.noConflict=function(){l._=d;return this};k.identity=function(a){return a};k.constant=function(a){return function(){return a}};k.noop=function(){};k.property=H;k.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}};k.matcher=k.matches=function(a){a=k.extendOwn({},a);return function(b){return k.isMatch(b,a)}};k.times=function(a,b,e){var c=Array(Math.max(0,a));b=y(b,e,1);for(e=0;e<a;e++)c[e]=b(e);return c};k.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*
(b-a+1))};k.now=Date.now||function(){return(new Date).getTime()};r={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","`":"\x26#x60;"};G=k.invert(r);H=function(a){var b=function(b){return a[b]},e="(?:"+k.keys(a).join("|")+")",c=RegExp(e),d=RegExp(e,"g");return function(a){a=null==a?"":""+a;return c.test(a)?a.replace(d,b):a}};k.escape=H(r);k.unescape=H(G);k.result=function(a,b,e){b=null==a?void 0:a[b];void 0===b&&(b=e);return k.isFunction(b)?b.call(a):b};var K=0;k.uniqueId=
function(a){var b=++K+"";return a?a+b:b};k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Q=/\\|'|\r|\n|\u2028|\u2029/g,R=function(a){return"\\"+P[a]};k.template=function(a,b,e){!b&&e&&(b=e);b=k.defaults({},b,k.templateSettings);e=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g");var c=0,d="__p+\x3d'";a.replace(e,
function(b,e,f,m,h){d+=a.slice(c,h).replace(Q,R);c=h+b.length;e?d+="'+\n((__t\x3d("+e+"))\x3d\x3dnull?'':_.escape(__t))+\n'":f?d+="'+\n((__t\x3d("+f+"))\x3d\x3dnull?'':__t)+\n'":m&&(d+="';\n"+m+"\n__p+\x3d'");return b});d+="';\n";b.variable||(d="with(obj||{}){\n"+d+"}\n");d="var __t,__p\x3d'',__j\x3dArray.prototype.join,print\x3dfunction(){__p+\x3d__j.call(arguments,'');};\n"+d+"return __p;\n";try{var f=new Function(b.variable||"obj","_",d)}catch(O){throw O.source=d,O;}e=function(a){return f.call(this,
a,k)};e.source="function("+(b.variable||"obj")+"){\n"+d+"}";return e};k.chain=function(a){a=k(a);a._chain=!0;return a};var M=function(a,b){return a._chain?k(b).chain():b};k.mixin=function(a){k.each(k.functions(a),function(b){var c=k[b]=a[b];k.prototype[b]=function(){var a=[this._wrapped];e.apply(a,arguments);return M(this,c.apply(k,a))}})};k.mixin(k);k.each("pop push reverse shift sort splice unshift".split(" "),function(a){var b=c[a];k.prototype[a]=function(){var e=this._wrapped;b.apply(e,arguments);
"shift"!==a&&"splice"!==a||0!==e.length||delete e[0];return M(this,e)}});k.each(["concat","join","slice"],function(a){var b=c[a];k.prototype[a]=function(){return M(this,b.apply(this._wrapped,arguments))}});k.prototype.value=function(){return this._wrapped};k.prototype.valueOf=k.prototype.toJSON=k.prototype.value;k.prototype.toString=function(){return""+this._wrapped};"function"===typeof define&&define.amd&&define("underscore",[],function(){return k})}).call(this);
(function(g,b){if("function"===typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(a,l,d){g.Backbone=b(g,d,a,l)});else if("undefined"!==typeof exports){var a=require("underscore");b(g,exports,a)}else g.Backbone=b(g,{},g._,g.jQuery||g.Zepto||g.ender||g.$)})(this,function(g,b,a,f){var l=g.Backbone,d=[].slice;b.VERSION="1.1.2";b.$=f;b.noConflict=function(){g.Backbone=l;return this};b.emulateHTTP=!1;b.emulateJSON=!1;var c=b.Events={on:function(a,b,c){if(!e(this,"on",
a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(b,c,d){if(!e(this,"once",b,[c,d])||!c)return this;var f=this,m=a.once(function(){f.off(b,m);c.apply(this,arguments)});m._callback=c;return this.on(b,m,d)},off:function(b,c,d){var f,m,h,g;if(!this._events||!e(this,"off",b,[c,d]))return this;if(!b&&!c&&!d)return this._events=void 0,this;var l=b?[b]:a.keys(this._events);var n=0;for(h=l.length;n<
h;n++)if(b=l[n],m=this._events[b]){this._events[b]=f=[];if(c||d){var k=0;for(g=m.length;k<g;k++){var F=m[k];(c&&c!==F.callback&&c!==F.callback._callback||d&&d!==F.context)&&f.push(F)}}f.length||delete this._events[b]}return this},trigger:function(a){if(!this._events)return this;var b=d.call(arguments,1);if(!e(this,"trigger",a,b))return this;var c=this._events[a],f=this._events.all;c&&m(c,b);f&&m(f,arguments);return this},stopListening:function(b,e,c){var d=this._listeningTo;if(!d)return this;var f=
!e&&!c;c||"object"!==typeof e||(c=this);b&&((d={})[b._listenId]=b);for(var m in d)b=d[m],b.off(e,c,this),(f||a.isEmpty(b._events))&&delete this._listeningTo[m];return this}},h=/\s+/,e=function(a,b,e,c){if(!e)return!0;if("object"===typeof e){for(var d in e)a[b].apply(a,[d,e[d]].concat(c));return!1}if(h.test(e)){e=e.split(h);d=0;for(var f=e.length;d<f;d++)a[b].apply(a,[e[d]].concat(c));return!1}return!0},m=function(a,b){var e,c=-1,d=a.length,f=b[0],m=b[1],h=b[2];switch(b.length){case 0:for(;++c<d;)(e=
a[c]).callback.call(e.ctx);break;case 1:for(;++c<d;)(e=a[c]).callback.call(e.ctx,f);break;case 2:for(;++c<d;)(e=a[c]).callback.call(e.ctx,f,m);break;case 3:for(;++c<d;)(e=a[c]).callback.call(e.ctx,f,m,h);break;default:for(;++c<d;)(e=a[c]).callback.apply(e.ctx,b)}};a.each({listenTo:"on",listenToOnce:"once"},function(b,e){c[e]=function(e,c,d){var f=this._listeningTo||(this._listeningTo={}),m=e._listenId||(e._listenId=a.uniqueId("l"));f[m]=e;d||"object"!==typeof c||(d=this);e[b](c,d,this);return this}});
c.bind=c.on;c.unbind=c.off;a.extend(b,c);var n=b.Model=function(b,e){var c=b||{};e||(e={});this.cid=a.uniqueId("c");this.attributes={};e.collection&&(this.collection=e.collection);e.parse&&(c=this.parse(c,e)||{});c=a.defaults({},c,a.result(this,"defaults"));this.set(c,e);this.changed={};this.initialize.apply(this,arguments)};a.extend(n.prototype,c,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(b){return a.clone(this.attributes)},sync:function(){return b.sync.apply(this,
arguments)},get:function(a){return this.attributes[a]},escape:function(b){return a.escape(this.get(b))},has:function(a){return null!=this.get(a)},set:function(b,e,c){var d;if(null==b)return this;if("object"===typeof b){var f=b;c=e}else(f={})[b]=e;c||(c={});if(!this._validate(f,c))return!1;var m=c.unset;var h=c.silent;b=[];var g=this._changing;this._changing=!0;g||(this._previousAttributes=a.clone(this.attributes),this.changed={});var l=this.attributes;var n=this._previousAttributes;this.idAttribute in
f&&(this.id=f[this.idAttribute]);for(d in f)e=f[d],a.isEqual(l[d],e)||b.push(d),a.isEqual(n[d],e)?delete this.changed[d]:this.changed[d]=e,m?delete l[d]:l[d]=e;if(!h)for(b.length&&(this._pending=c),e=0,d=b.length;e<d;e++)this.trigger("change:"+b[e],this,l[b[e]],c);if(g)return this;if(!h)for(;this._pending;)c=this._pending,this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(b,e){return this.set(b,void 0,a.extend({},e,{unset:!0}))},clear:function(b){var e=
{},c;for(c in this.attributes)e[c]=void 0;return this.set(e,a.extend({},b,{unset:!0}))},hasChanged:function(b){return null==b?!a.isEmpty(this.changed):a.has(this.changed,b)},changedAttributes:function(b){if(!b)return this.hasChanged()?a.clone(this.changed):!1;var e,c=!1,d=this._changing?this._previousAttributes:this.attributes,f;for(f in b)a.isEqual(d[f],e=b[f])||((c||(c={}))[f]=e);return c},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},
fetch:function(b){b=b?a.clone(b):{};void 0===b.parse&&(b.parse=!0);var e=this,c=b.success;b.success=function(a){if(!e.set(e.parse(a,b),b))return!1;c&&c(e,a,b);e.trigger("sync",e,a,b)};I(this,b);return this.sync("read",this,b)},save:function(b,e,c){var d=this.attributes;if(null==b||"object"===typeof b){var f=b;c=e}else(f={})[b]=e;c=a.extend({validate:!0},c);if(f&&!c.wait){if(!this.set(f,c))return!1}else if(!this._validate(f,c))return!1;f&&c.wait&&(this.attributes=a.extend({},d,f));void 0===c.parse&&
(c.parse=!0);var m=this,h=c.success;c.success=function(b){m.attributes=d;var e=m.parse(b,c);c.wait&&(e=a.extend(f||{},e));if(a.isObject(e)&&!m.set(e,c))return!1;h&&h(m,b,c);m.trigger("sync",m,b,c)};I(this,c);b=this.isNew()?"create":c.patch?"patch":"update";"patch"===b&&(c.attrs=f);b=this.sync(b,this,c);f&&c.wait&&(this.attributes=d);return b},destroy:function(b){b=b?a.clone(b):{};var e=this,c=b.success,d=function(){e.trigger("destroy",e,e.collection,b)};b.success=function(a){(b.wait||e.isNew())&&
d();c&&c(e,a,b);e.isNew()||e.trigger("sync",e,a,b)};if(this.isNew())return b.success(),!1;I(this,b);var f=this.sync("delete",this,b);b.wait||d();return f},url:function(){var b=a.result(this,"urlRoot")||a.result(this.collection,"url")||A();return this.isNew()?b:b.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(b){return this._validate({},
a.extend(b||{},{validate:!0}))},_validate:function(b,e){if(!e.validate||!this.validate)return!0;b=a.extend({},this.attributes,b);b=this.validationError=this.validate(b,e)||null;if(!b)return!0;this.trigger("invalid",this,b,a.extend(e,{validationError:b}));return!1}});a.each("keys values pairs invert pick omit".split(" "),function(b){n.prototype[b]=function(){var e=d.call(arguments);e.unshift(this.attributes);return a[b].apply(a,e)}});var p=b.Collection=function(b,e){e||(e={});e.model&&(this.model=
e.model);void 0!==e.comparator&&(this.comparator=e.comparator);this._reset();this.initialize.apply(this,arguments);b&&this.reset(b,a.extend({silent:!0},e))},r={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1};a.extend(p.prototype,c,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(b,e){return this.set(b,a.extend({merge:!1},e,w))},remove:function(b,e){var c=!a.isArray(b);b=c?[b]:a.clone(b);
e||(e={});var d,f;var m=0;for(d=b.length;m<d;m++)if(f=b[m]=this.get(b[m])){delete this._byId[f.id];delete this._byId[f.cid];var h=this.indexOf(f);this.models.splice(h,1);this.length--;e.silent||(e.index=h,f.trigger("remove",f,this,e));this._removeReference(f,e)}return c?b[0]:b},set:function(b,e){e=a.defaults({},e,r);e.parse&&(b=this.parse(b,e));var c=!a.isArray(b);b=c?b?[b]:[]:a.clone(b);var d,f,m,h=e.at,g=this.model,l=this.comparator&&null==h&&!1!==e.sort,k=a.isString(this.comparator)?this.comparator:
null,p=[],v=[],F={},w=e.add,K=e.merge,C=e.remove,z=!l&&w&&C?[]:!1;var t=0;for(d=b.length;t<d;t++){var y=b[t]||{};var x=y instanceof n?f=y:y[g.prototype.idAttribute||"id"];if(x=this.get(x))C&&(F[x.cid]=!0),K&&(y=y===f?f.attributes:y,e.parse&&(y=x.parse(y,e)),x.set(y,e),l&&!m&&x.hasChanged(k)&&(m=!0)),b[t]=x;else if(w){f=b[t]=this._prepareModel(y,e);if(!f)continue;p.push(f);this._addReference(f,e)}f=x||f;!z||!f.isNew()&&F[f.id]||z.push(f);F[f.id]=!0}if(C){t=0;for(d=this.length;t<d;++t)F[(f=this.models[t]).cid]||
v.push(f);v.length&&this.remove(v,e)}if(p.length||z&&z.length)if(l&&(m=!0),this.length+=p.length,null!=h)for(t=0,d=p.length;t<d;t++)this.models.splice(h+t,0,p[t]);else for(z&&(this.models.length=0),y=z||p,t=0,d=y.length;t<d;t++)this.models.push(y[t]);m&&this.sort({silent:!0});if(!e.silent){t=0;for(d=p.length;t<d;t++)(f=p[t]).trigger("add",f,this,e);(m||z&&z.length)&&this.trigger("sort",this,e)}return c?b[0]:b},reset:function(b,e){e||(e={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c],
e);e.previousModels=this.models;this._reset();b=this.add(b,a.extend({silent:!0},e));e.silent||this.trigger("reset",this,e);return b},push:function(b,e){return this.add(b,a.extend({at:this.length},e))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(b,e){return this.add(b,a.extend({at:0},e))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return d.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||
this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(b,e){return a.isEmpty(b)?e?void 0:[]:this[e?"find":"filter"](function(a){for(var e in b)if(b[e]!==a.get(e))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(b){if(!this.comparator)throw Error("Cannot sort a set without a comparator");b||(b={});a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,
this));b.silent||this.trigger("sort",this,b);return this},pluck:function(b){return a.invoke(this.models,"get",b)},fetch:function(b){b=b?a.clone(b):{};void 0===b.parse&&(b.parse=!0);var e=b.success,c=this;b.success=function(a){c[b.reset?"reset":"set"](a,b);e&&e(c,a,b);c.trigger("sync",c,a,b)};I(this,b);return this.sync("read",this,b)},create:function(b,e){e=e?a.clone(e):{};if(!(b=this._prepareModel(b,e)))return!1;e.wait||this.add(b,e);var c=this,d=e.success;e.success=function(a,b){e.wait&&c.add(a,
e);d&&d(a,b,e)};b.save(null,e);return b},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(b,e){if(b instanceof n)return b;e=e?a.clone(e):{};e.collection=this;b=new this.model(b,e);if(!b.validationError)return b;this.trigger("invalid",this,b.validationError,e);return!1},_addReference:function(a,b){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=
this);a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,e,c){if("add"!==a&&"remove"!==a||e===this)"destroy"===a&&this.remove(b,c),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});a.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain sample".split(" "),
function(b){p.prototype[b]=function(){var e=d.call(arguments);e.unshift(this.models);return a[b].apply(a,e)}});a.each(["groupBy","countBy","sortBy","indexBy"],function(b){p.prototype[b]=function(e,c){var d=a.isFunction(e)?e:function(a){return a.get(e)};return a[b](this.models,d,c)}});f=b.View=function(b){this.cid=a.uniqueId("view");b||(b={});a.extend(this,a.pick(b,z));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var v=/^(\S+)\s*(.*)$/,z="model collection el id attributes className tagName events".split(" ");
a.extend(f.prototype,c,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,e){this.$el&&this.undelegateEvents();this.$el=a instanceof b.$?a:b.$(a);this.el=this.$el[0];!1!==e&&this.delegateEvents();return this},delegateEvents:function(b){if(!b&&!(b=a.result(this,"events")))return this;this.undelegateEvents();for(var e in b){var c=b[e];a.isFunction(c)||
(c=this[b[e]]);if(c){var d=e.match(v),f=d[1];d=d[2];c=a.bind(c,this);f+=".delegateEvents"+this.cid;if(""===d)this.$el.on(f,c);else this.$el.on(f,d,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var e=a.extend({},a.result(this,"attributes"));this.id&&(e.id=a.result(this,"id"));this.className&&(e["class"]=a.result(this,"className"));e=b.$("\x3c"+a.result(this,"tagName")+
"\x3e").attr(e);this.setElement(e,!1)}}});b.sync=function(e,c,d){var f=k[e];a.defaults(d||(d={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var m={type:f,dataType:"json"};d.url||(m.url=a.result(c,"url")||A());null!=d.data||!c||"create"!==e&&"update"!==e&&"patch"!==e||(m.contentType="application/json",m.data=JSON.stringify(d.attrs||c.toJSON(d)));d.emulateJSON&&(m.contentType="application/x-www-form-urlencoded",m.data=m.data?{model:m.data}:{});if(d.emulateHTTP&&("PUT"===f||"DELETE"===f||
"PATCH"===f)){m.type="POST";d.emulateJSON&&(m.data._method=f);var h=d.beforeSend;d.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",f);if(h)return h.apply(this,arguments)}}"GET"===m.type||d.emulateJSON||(m.processData=!1);"PATCH"===m.type&&C&&(m.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});e=d.xhr=b.ajax(a.extend(m,d));c.trigger("request",c,e,d);return e};var C="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),
k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},x=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,J=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(y.prototype,c,{initialize:function(){},route:function(e,c,d){a.isRegExp(e)||(e=this._routeToRegExp(e));a.isFunction(c)&&(d=c,c="");d||(d=this[c]);var f=this;b.history.route(e,
function(a){a=f._extractParameters(e,a);f.execute(d,a);f.trigger.apply(f,["route:"+c].concat(a));f.trigger("route",c,a);b.history.trigger("route",f,c,a)});return this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,e){b.history.navigate(a,e);return this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var b,e=a.keys(this.routes);null!=(b=e.pop());)this.route(b,this.routes[b])}},_routeToRegExp:function(a){a=a.replace(H,"\\$\x26").replace(x,"(?:$1)?").replace(G,
function(a,b){return b?a:"([^/?]+)"}).replace(J,"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(b,e){var c=b.exec(e).slice(1);return a.map(c,function(a,b){return b===c.length-1?a||null:a?decodeURIComponent(a):null})}});var t=b.History=function(){this.handlers=[];a.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},u=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,q=/msie [\w.]+/,E=/\/$/,B=/#.*$/;t.started=!1;a.extend(t.prototype,
c,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$\x26/")===this.root},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){null==a&&(this._hasPushState||!this._wantsHashChange||b?(a=decodeURI(this.location.pathname+this.location.search),b=this.root.replace(E,""),a.indexOf(b)||(a=a.slice(b.length))):a=this.getHash());return a.replace(u,"")},start:function(e){if(t.started)throw Error("Backbone.history has already been started");
t.started=!0;this.options=a.extend({root:"/"},this.options,e);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);e=this.getFragment();var c=document.documentMode;c=q.exec(navigator.userAgent.toLowerCase())&&(!c||7>=c);this.root=("/"+this.root+"/").replace(D,"/");c&&this._wantsHashChange&&(this.iframe=b.$('\x3ciframe src\x3d"javascript:0" tabindex\x3d"-1"\x3e').hide().appendTo("body")[0].contentWindow,
this.navigate(e));if(this._hasPushState)b.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!c)b.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=e;e=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&
this.atRoot()&&e.hash&&(this.fragment=this.getHash().replace(u,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);t.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));
if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(b){b=this.fragment=this.getFragment(b);return a.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!t.started)return!1;b&&!0!==b||(b={trigger:!!b});var e=this.root+(a=this.getFragment(a||""));a=a.replace(B,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==e&&(e=e.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},
document.title,e);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(e);if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,e){e?(e=a.href.replace(/(javascript:|#).*$/,""),a.replace(e+"#"+b)):a.hash="#"+b}});b.history=new t;n.extend=p.extend=y.extend=f.extend=t.extend=function(b,
e){var c=this;var d=b&&a.has(b,"constructor")?b.constructor:function(){return c.apply(this,arguments)};a.extend(d,c,e);e=function(){this.constructor=d};e.prototype=c.prototype;d.prototype=new e;b&&a.extend(d.prototype,b);d.__super__=c.prototype;return d};var A=function(){throw Error('A "url" property or function must be specified');},I=function(a,b){var e=b.error;b.error=function(c){e&&e(a,c,b);a.trigger("error",a,c,b)}};return b});
(function(g,b){if("function"===typeof define&&define.amd)define("marionette",["backbone","underscore"],function(a,d){return g.Marionette=g.Mn=b(g,a,d)});else if("undefined"!==typeof exports){var a=require("backbone"),f=require("underscore");module.exports=b(g,a,f)}else g.Marionette=g.Mn=b(g,g.Backbone,g._)})(this,function(g,b,a){(function(a,b){var e=a.ChildViewContainer;a.ChildViewContainer=function(a,b){var e=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();
b.each(a,this.add,this)};b.extend(e.prototype,{add:function(a,b){var e=a.cid;this._views[e]=a;a.model&&(this._indexByModel[a.model.cid]=e);b&&(this._indexByCustom[b]=e);this._updateLength();return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return b.values(this._views)[a]},findByCid:function(a){return this._views[a]},
remove:function(a){var e=a.cid;a.model&&delete this._indexByModel[a.model.cid];b.any(this._indexByCustom,function(a,b){if(a===e)return delete this._indexByCustom[b],!0},this);delete this._views[e];this._updateLength();return this},call:function(a){this.apply(a,b.tail(arguments))},apply:function(a,e){b.each(this._views,function(c){b.isFunction(c[a])&&c[a].apply(c,e||[])})},_updateLength:function(){this.length=b.size(this._views)}});b.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck reduce".split(" "),
function(a){e.prototype[a]=function(){var e=[b.values(this._views)].concat(b.toArray(arguments));return b[a].apply(b,e)}});return e}(a,b);a.ChildViewContainer.VERSION="0.1.7";a.ChildViewContainer.noConflict=function(){a.ChildViewContainer=e;return this};return a.ChildViewContainer})(b,a);(function(a,b){var e=a.Wreqr,c=a.Wreqr={};a.Wreqr.VERSION="1.3.3";a.Wreqr.noConflict=function(){a.Wreqr=e;return this};c.Handlers=function(a,b){var e=function(a){this.options=a;this._wreqrHandlers={};b.isFunction(this.initialize)&&
this.initialize(a)};e.extend=a.Model.extend;b.extend(e.prototype,a.Events,{setHandlers:function(a){b.each(a,function(a,e){var c=null;b.isObject(a)&&!b.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(e,a,c)},this)},setHandler:function(a,b,e){this._wreqrHandlers[a]={callback:b,context:e};this.trigger("handler:add",a,b,e)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){return b.callback.apply(b.context,arguments)}},
removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});return e}(a,b);c.CommandStorage=function(){var e=function(a){this.options=a;this._commands={};b.isFunction(this.initialize)&&this.initialize(a)};b.extend(e.prototype,a.Events,{getCommands:function(a){var b=this._commands[a];b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=
[]}});return e}();c.Commands=function(a,b){return a.Handlers.extend({storageType:a.CommandStorage,constructor:function(b){this.options=b||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);a.Handlers.prototype.constructor.apply(this,arguments)},execute:function(a){a=arguments[0];var e=b.rest(arguments);this.hasHandler(a)?this.getHandler(a).apply(this,e):this.storage.addCommand(a,e)},_executeCommands:function(a,e,c){var d=this.storage.getCommands(a);b.each(d.instances,
function(a){e.apply(c,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=b.isFunction(a)?new a:a}})}(c,b);c.RequestResponse=function(a,b){return a.Handlers.extend({request:function(a){if(this.hasHandler(a))return this.getHandler(a).apply(this,b.rest(arguments))}})}(c,b);c.EventAggregator=function(a,b){var e=function(){};e.extend=a.Model.extend;b.extend(e.prototype,a.Events);return e}(a,b);c.Channel=function(e){e=function(b){this.vent=
new a.Wreqr.EventAggregator;this.reqres=new a.Wreqr.RequestResponse;this.commands=new a.Wreqr.Commands;this.channelName=b};b.extend(e.prototype,{reset:function(){this.vent.off();this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(a,b){this._connect("vent",a,b);return this},connectCommands:function(a,b){this._connect("commands",a,b);return this},connectRequests:function(a,b){this._connect("reqres",a,b);return this},_connect:function(a,
e,c){if(e){c=c||this;var d="vent"===a?"on":"setHandler";b.each(e,function(e,f){this[a][d](f,b.bind(e,c))},this)}}});return e}(c);c.radio=function(a,b){var e=function(){this._channels={};this.vent={};this.commands={};this.reqres={};this._proxyMethods()};b.extend(e.prototype,{channel:function(a){if(!a)throw Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(b){var e=this._channels[b];e||(e=new a.Channel(b),this._channels[b]=e);return e},_proxyMethods:function(){b.each(["vent",
"commands","reqres"],function(a){b.each(c[a],function(b){this[a][b]=d(this,a,b)},this)},this)}});var c={vent:"on off trigger once stopListening listenTo listenToOnce".split(" "),commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},d=function(a,e,c){return function(d){var f=a._getChannel(d)[e];return f[c].apply(f,b.rest(arguments))}};return new e}(c,b);return a.Wreqr})(b,a);var f=g.Marionette,
l=g.Mn,d=b.Marionette={};d.VERSION="2.4.2";d.noConflict=function(){g.Marionette=f;g.Mn=l;return this};b.Marionette=d;d.Deferred=b.$.Deferred;d.extend=b.Model.extend;d.isNodeAttached=function(a){return b.$.contains(document.documentElement,a)};d.mergeOptions=function(b,c){b&&a.extend(this,a.pick(b,c))};d.getOption=function(a,b){if(a&&b)return a.options&&void 0!==a.options[b]?a.options[b]:a[b]};d.proxyGetOption=function(a){return d.getOption(this,a)};d._getValue=function(b,c,d){a.isFunction(b)&&(b=
d?b.apply(c,d):b.call(c));return b};d.normalizeMethods=function(b){return a.reduce(b,function(b,e,c){a.isFunction(e)||(e=this[e]);e&&(b[c]=e);return b},{},this)};d.normalizeUIString=function(a,b){return a.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(a){return b[a.slice(4)]})};d.normalizeUIKeys=function(b,c){return a.reduce(b,function(a,b,e){e=d.normalizeUIString(e,c);a[e]=b;return a},{})};d.normalizeUIValues=function(b,c,f){a.each(b,function(e,m){a.isString(e)?b[m]=d.normalizeUIString(e,c):a.isObject(e)&&
a.isArray(f)&&(a.extend(e,d.normalizeUIValues(a.pick(e,f),c)),a.each(f,function(b){var f=e[b];a.isString(f)&&(e[b]=d.normalizeUIString(f,c))}))});return b};d.actAsCollection=function(b,c){a.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(e){b[e]=function(){var b=[a.values(a.result(this,c))].concat(a.toArray(arguments));return a[e].apply(a,b)}})};var c=d.deprecate=function(b,
d){a.isObject(b)&&(b=b.prev+" is going to be removed in the future. Please use "+b.next+" instead."+(b.url?" See: "+b.url:""));void 0!==d&&d||c._cache[b]||(c._warn("Deprecation warning: "+b),c._cache[b]=!0)};c._warn="undefined"!==typeof console&&(console.warn||console.log)||function(){};c._cache={};d._triggerMethod=function(){function b(a,b,e){return e.toUpperCase()}var c=/(^|:)(\w)/gi;return function(e,d,f){var m=3>arguments.length;m&&(f=d,d=f[0]);var h="on"+d.replace(c,b);h=e[h];var g;a.isFunction(h)&&
(g=h.apply(e,m?a.rest(f):f));a.isFunction(e.trigger)&&(1<m+f.length?e.trigger.apply(e,m?f:[d].concat(a.drop(f,0))):e.trigger(d));return g}}();d.triggerMethod=function(a){return d._triggerMethod(this,arguments)};d.triggerMethodOn=function(b){return(a.isFunction(b.triggerMethod)?b.triggerMethod:d.triggerMethod).apply(b,a.rest(arguments))};d.MonitorDOMRefresh=function(b){function e(){b._isShown&&b._isRendered&&d.isNodeAttached(b.el)&&a.isFunction(b.triggerMethod)&&b.triggerMethod("dom:refresh")}b.on({show:function(){b._isShown=
!0;e()},render:function(){b._isRendered=!0;e()}})};(function(b){function e(e,c,d,f){f=f.split(/\s+/);a.each(f,function(a){var f=e[a];if(!f)throw new b.Error('Method "'+a+'" was configured as an event handler, but does not exist.');e.listenTo(c,d,f)})}function c(a,b,e,c){a.listenTo(b,e,c)}function d(b,e,c,d){d=d.split(/\s+/);a.each(d,function(a){b.stopListening(e,c,b[a])})}function f(a,b,e,c){a.stopListening(b,e,c)}function h(e,c,d,f,m){if(c&&d){if(!a.isObject(d))throw new b.Error({message:"Bindings must be an object or function.",
url:"marionette.functions.html#marionettebindentityevents"});d=b._getValue(d,e);a.each(d,function(b,d){a.isFunction(b)?f(e,c,d,b):m(e,c,d,b)})}}b.bindEntityEvents=function(a,b,d){h(a,b,d,c,e)};b.unbindEntityEvents=function(a,b,e){h(a,b,e,f,d)};b.proxyBindEntityEvents=function(a,e){return b.bindEntityEvents(this,a,e)};b.proxyUnbindEntityEvents=function(a,e){return b.unbindEntityEvents(this,a,e)}})(d);var h="description fileName lineNumber name message number".split(" ");d.Error=d.extend.call(Error,
{urlRoot:"http://marionettejs.com/docs/v"+d.VERSION+"/",constructor:function(b,c){a.isObject(b)?(c=b,b=c.message):c||(c={});b=Error.call(this,b);a.extend(this,a.pick(b,h),a.pick(c,h));this.captureStackTrace();c.url&&(this.url=this.urlRoot+c.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,d.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}});d.Error.extend=d.extend;d.Callbacks=function(){this._deferred=d.Deferred();
this._callbacks=[]};a.extend(d.Callbacks.prototype,{add:function(b,c){var e=a.result(this._deferred,"promise");this._callbacks.push({cb:b,ctx:c});e.then(function(a){c&&(a.context=c);b.call(a.context,a.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var b=this._callbacks;this._deferred=d.Deferred();this._callbacks=[];a.each(b,function(a){this.add(a.cb,a.ctx)},this)}});d.Controller=function(b){this.options=b||{};a.isFunction(this.initialize)&&this.initialize(this.options)};
d.Controller.extend=d.extend;a.extend(d.Controller.prototype,b.Events,{destroy:function(){d._triggerMethod(this,"before:destroy",arguments);d._triggerMethod(this,"destroy",arguments);this.stopListening();this.off();return this},triggerMethod:d.triggerMethod,mergeOptions:d.mergeOptions,getOption:d.proxyGetOption});d.Object=function(b){this.options=a.extend({},a.result(this,"options"),b);this.initialize.apply(this,arguments)};d.Object.extend=d.extend;a.extend(d.Object.prototype,b.Events,{initialize:function(){},
destroy:function(){this.triggerMethod("before:destroy");this.triggerMethod("destroy");this.stopListening();return this},triggerMethod:d.triggerMethod,mergeOptions:d.mergeOptions,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});d.Region=d.Object.extend({constructor:function(a){this.options=a||{};this.el=this.getOption("el");this.el=this.el instanceof b.$?this.el[0]:this.el;if(!this.el)throw new d.Error({name:"NoElError",message:'An "el" must be specified for a region.'});
this.$el=this.getEl(this.el);d.Object.call(this,a)},show:function(b,c){if(this._ensureElement()){this._ensureViewIsIntact(b);var e=c||{},f=b!==this.currentView,m=!!e.preventDestroy,h=!!e.forceShow,g=!!this.currentView;m=f&&!m;f=f||h;g&&this.triggerMethod("before:swapOut",this.currentView,this,c);this.currentView&&delete this.currentView._parent;m?this.empty():g&&f&&this.currentView.off("destroy",this.empty,this);f&&(b.once("destroy",this.empty,this),b.render(),b._parent=this,g&&this.triggerMethod("before:swap",
b,this,c),this.triggerMethod("before:show",b,this,c),d.triggerMethodOn(b,"before:show",b,this,c),g&&this.triggerMethod("swapOut",this.currentView,this,c),f=d.isNodeAttached(this.el),h=a.extend({triggerBeforeAttach:this.triggerBeforeAttach,triggerAttach:this.triggerAttach},e),f&&h.triggerBeforeAttach&&(e=this._displayedViews(b),this._triggerAttach(e,"before:")),this.attachHtml(b),this.currentView=b,f&&h.triggerAttach&&(e=this._displayedViews(b),this._triggerAttach(e)),g&&this.triggerMethod("swap",
b,this,c),this.triggerMethod("show",b,this,c),d.triggerMethodOn(b,"show",b,this,c));return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(b,c){var e=(c||"")+"attach";a.each(b,function(a){d.triggerMethodOn(a,e,a,this)},this)},_displayedViews:function(b){return a.union([b],a.result(b,"_getNestedViews")||[])},_ensureElement:function(){a.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);if(!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;
throw new d.Error('An "el" '+this.$el.selector+" must exist in DOM");}return!0},_ensureViewIsIntact:function(a){if(!a)throw new d.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(a.isDestroyed)throw new d.Error({name:"ViewDestroyedError",message:'View (cid: "'+a.cid+'") has already been destroyed and cannot be used.'});},getEl:function(a){return b.$(a,d._getValue(this.options.parentEl,this))},attachHtml:function(a){this.$el.contents().detach();
this.el.appendChild(a.el)},empty:function(a){var b=this.currentView;a=d._getValue(a,"preventDestroy",this);if(b)return b.off("destroy",this.empty,this),this.triggerMethod("before:empty",b),a||this._destroyView(),this.triggerMethod("empty",b),delete this.currentView,a&&this.$el.contents().detach(),this},_destroyView:function(){var a=this.currentView;a.destroy&&!a.isDestroyed?a.destroy():a.remove&&(a.remove(),a.isDestroyed=!0)},attachView:function(a){this.currentView=a;return this},hasView:function(){return!!this.currentView},
reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el;return this}},{buildRegion:function(b,c){if(a.isString(b))return this._buildRegionFromSelector(b,c);if(b.selector||b.el||b.regionClass)return this._buildRegionFromObject(b,c);if(a.isFunction(b))return this._buildRegionFromRegionClass(b);throw new d.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"});},_buildRegionFromSelector:function(a,b){return new b({el:a})},
_buildRegionFromObject:function(b,c){c=b.regionClass||c;var e=a.omit(b,"selector","regionClass");b.selector&&!e.el&&(e.el=b.selector);return new c(e)},_buildRegionFromRegionClass:function(a){return new a}});d.RegionManager=d.Controller.extend({constructor:function(a){this._regions={};this.length=0;d.Controller.call(this,a);this.addRegions(this.getOption("regions"))},addRegions:function(b,c){b=d._getValue(b,this,arguments);return a.reduce(b,function(b,e,d){a.isString(e)&&(e={selector:e});e.selector&&
(e=a.defaults({},e,c));b[d]=this.addRegion(d,e);return b},{},this)},addRegion:function(a,b){b=b instanceof d.Region?b:d.Region.buildRegion(b,d.Region);this.triggerMethod("before:add:region",a,b);b._parent=this;this._store(a,b);this.triggerMethod("add:region",a,b);return b},get:function(a){return this._regions[a]},getRegions:function(){return a.clone(this._regions)},removeRegion:function(a){var b=this._regions[a];this._remove(a,b);return b},removeRegions:function(){var b=this.getRegions();a.each(this._regions,
function(a,b){this._remove(b,a)},this);return b},emptyRegions:function(){var b=this.getRegions();a.invoke(b,"empty");return b},destroy:function(){this.removeRegions();return d.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]||this.length++;this._regions[a]=b},_remove:function(a,b){this.triggerMethod("before:remove:region",a,b);b.empty();b.stopListening();delete b._parent;delete this._regions[a];this.length--;this.triggerMethod("remove:region",a,b)}});d.actAsCollection(d.RegionManager.prototype,
"_regions");d.TemplateCache=function(a){this.templateId=a};a.extend(d.TemplateCache,{templateCaches:{},get:function(a,b){var e=this.templateCaches[a];e||(e=new d.TemplateCache(a),this.templateCaches[a]=e);return e.load(b)},clear:function(){var b,c=a.toArray(arguments),d=c.length;if(0<d)for(b=0;b<d;b++)delete this.templateCaches[c[b]];else this.templateCaches={}}});a.extend(d.TemplateCache.prototype,{load:function(a){if(this.compiledTemplate)return this.compiledTemplate;var b=this.loadTemplate(this.templateId,
a);return this.compiledTemplate=this.compileTemplate(b,a)},loadTemplate:function(a,c){c=b.$(a).html();if(!c||0===c.length)throw new d.Error({name:"NoTemplateError",message:'Could not find template: "'+a+'"'});return c},compileTemplate:function(b,c){return a.template(b,c)}});d.Renderer={render:function(b,c){if(!b)throw new d.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});return(a.isFunction(b)?b:d.TemplateCache.get(b))(c)}};d.View=b.View.extend({isDestroyed:!1,
constructor:function(e){a.bindAll(this,"render");e=d._getValue(e,this);this.options=a.extend({},a.result(this,"options"),e);this._behaviors=d.Behaviors(this);b.View.call(this,this.options);d.MonitorDOMRefresh(this)},getTemplate:function(){return this.getOption("template")},serializeModel:function(b){return b.toJSON.apply(b,a.rest(arguments))},mixinTemplateHelpers:function(b){b=b||{};var e=this.getOption("templateHelpers");e=d._getValue(e,this);return a.extend(b,e)},normalizeUIKeys:function(b){var e=
a.result(this,"_uiBindings");return d.normalizeUIKeys(b,e||a.result(this,"ui"))},normalizeUIValues:function(b,c){var e=a.result(this,"ui"),f=a.result(this,"_uiBindings");return d.normalizeUIValues(b,f||e,c)},configureTriggers:function(){if(this.triggers){var b=this.normalizeUIKeys(a.result(this,"triggers"));return a.reduce(b,function(a,b,e){a[e]=this._buildViewTrigger(b);return a},{},this)}},delegateEvents:function(b){this._delegateDOMEvents(b);this.bindEntityEvents(this.model,this.getOption("modelEvents"));
this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));a.each(this._behaviors,function(a){a.bindEntityEvents(this.model,a.getOption("modelEvents"));a.bindEntityEvents(this.collection,a.getOption("collectionEvents"))},this);return this},_delegateDOMEvents:function(e){var c=d._getValue(e||this.events,this);c=this.normalizeUIKeys(c);a.isUndefined(e)&&(this.events=c);e={};var f=a.result(this,"behaviorEvents")||{},h=this.configureTriggers(),g=a.result(this,"behaviorTriggers")||{};a.extend(e,
f,c,h,g);b.View.prototype.delegateEvents.call(this,e)},undelegateEvents:function(){b.View.prototype.undelegateEvents.apply(this,arguments);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));a.each(this._behaviors,function(a){a.unbindEntityEvents(this.model,a.getOption("modelEvents"));a.unbindEntityEvents(this.collection,a.getOption("collectionEvents"))},this);return this},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new d.Error({name:"ViewDestroyedError",
message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'});},destroy:function(){if(this.isDestroyed)return this;var b=a.toArray(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(b));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(b));this.unbindUIElements();this.isRendered=!1;this.remove();a.invoke(this._behaviors,"destroy",b);return this},bindUIElements:function(){this._bindUIElements();a.invoke(this._behaviors,this._bindUIElements)},
_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var b=a.result(this,"_uiBindings");this.ui={};a.each(b,function(a,b){this.ui[b]=this.$(a)},this)}},unbindUIElements:function(){this._unbindUIElements();a.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(a.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(b){var e=a.isObject(b),c=a.defaults({},
e?b:{},{preventDefault:!0,stopPropagation:!0}),d=e?c.event:b;return function(a){a&&(a.preventDefault&&c.preventDefault&&a.preventDefault(),a.stopPropagation&&c.stopPropagation&&a.stopPropagation());this.triggerMethod(d,{view:this,model:this.model,collection:this.collection})}},setElement:function(){var e=b.View.prototype.setElement.apply(this,arguments);a.invoke(this._behaviors,"proxyViewProperties",this);return e},triggerMethod:function(){var b=d._triggerMethod(this,arguments);this._triggerEventOnBehaviors(arguments);
this._triggerEventOnParentLayout(arguments[0],a.rest(arguments));return b},_triggerEventOnBehaviors:function(a){for(var b=d._triggerMethod,e=this._behaviors,c=0,f=e&&e.length;c<f;c++)b(e[c],a)},_triggerEventOnParentLayout:function(b,c){var e=this._parentLayoutView();if(e){var f=d.getOption(e,"childViewEventPrefix");d._triggerMethod(e,[f+":"+b,this].concat(c));f=d.getOption(e,"childEvents");(f=e.normalizeMethods(f))&&a.isFunction(f[b])&&f[b].apply(e,[this].concat(c))}},_getImmediateChildren:function(){return[]},
_getNestedViews:function(){var b=this._getImmediateChildren();return b.length?a.reduce(b,function(a,b){return b._getNestedViews?a.concat(b._getNestedViews()):a},b):b},_getAncestors:function(){for(var a=[],b=this._parent;b;)a.push(b),b=b._parent;return a},_parentLayoutView:function(){var b=this._getAncestors();return a.find(b,function(a){return a instanceof d.LayoutView})},normalizeMethods:d.normalizeMethods,mergeOptions:d.mergeOptions,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,
unbindEntityEvents:d.proxyUnbindEntityEvents});d.ItemView=d.View.extend({constructor:function(){d.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var a=[this.model||this.collection];arguments.length&&a.push.apply(a,arguments);return this.model?this.serializeModel.apply(this,a):{items:this.serializeCollection.apply(this,a)}},serializeCollection:function(b){return b.toJSON.apply(b,a.rest(arguments))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",
this);this._renderTemplate();this.isRendered=!0;this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){if(!a)throw new d.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var b=this.mixinTemplateHelpers(this.serializeData());a=d.Renderer.render(a,b,this);this.attachElContent(a);return this}},attachElContent:function(a){this.$el.html(a);return this}});d.CollectionView=
d.View.extend({childViewEventPrefix:"childview",sort:!0,constructor:function(a){this.once("render",this._initialEvents);this._initChildViewStorage();d.View.apply(this,arguments);this.on({"before:show":this._onBeforeShowCalled,show:this._onShowCalled,"before:attach":this._onBeforeAttachCalled,attach:this._onAttachCalled});this.initRenderBuffer()},initRenderBuffer:function(){this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){var a=
this._isShown&&d.isNodeAttached(this.el);this.isBuffering=!1;this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"before:show");if(a&&this._triggerBeforeAttach){var b=this._getNestedViews();this._triggerMethodMany(b,this,"before:attach")}this.attachBuffer(this,this._createBuffer());a&&this._triggerAttach&&(b=this._getNestedViews(),this._triggerMethodMany(b,this,"attach"));this._isShown&&this._triggerMethodMany(this._bufferedChildren,this,"show");this.initRenderBuffer()},_triggerMethodMany:function(b,
c,f){var e=a.drop(arguments,3);a.each(b,function(a){d.triggerMethodOn.apply(a,[a,f,a,c].concat(e))})},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(b,c,d){c=void 0!==d.at?d.at:a.indexOf(this._filteredSortedModels(),b);this._shouldAddChild(b,
c)&&(this.destroyEmptyView(),d=this.getChildView(b),this.addChild(b,d,c))},_onCollectionRemove:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},_onBeforeShowCalled:function(){this._triggerBeforeAttach=this._triggerAttach=!1;this.children.each(function(a){d.triggerMethodOn(a,"before:show",a)})},_onShowCalled:function(){this.children.each(function(a){d.triggerMethodOn(a,"show",a)})},_onBeforeAttachCalled:function(){this._triggerBeforeAttach=!0},_onAttachCalled:function(){this._triggerAttach=
!0},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.isRendered=!0;this.triggerMethod("render",this);return this},reorder:function(){var b=this.children,c=this._filteredSortedModels();a.find(c,function(a){return!b.findByModel(a)})?this.render():(c=a.map(c,function(a,e){a=b.findByModel(a);a._index=e;return a.el}),this.triggerMethod("before:reorder"),this._appendReorderedChildren(c),this.triggerMethod("reorder"))},resortView:function(){d.getOption(this,
"reorderOnSort")?this.reorder():this.render()},_sortViews:function(){var b=this._filteredSortedModels();a.find(b,function(a,b){a=this.children.findByModel(a);return!a||a._index!==b},this)&&this.resortView()},_emptyViewIndex:-1,_appendReorderedChildren:function(a){this.$el.append(a)},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren({checkEmpty:!1});this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),
this.endBuffering(),this.triggerMethod("render:collection",this),this.children.isEmpty()&&this.showEmptyView())},showCollection:function(){var b,c=this._filteredSortedModels();a.each(c,function(a,e){b=this.getChildView(a);this.addChild(a,b,e)},this)},_filteredSortedModels:function(){var b=(b=this.getViewComparator())?a.isString(b)||1===b.length?this.collection.sortBy(b,this):a.clone(this.collection.models).sort(a.bind(b,this)):this.collection.models;this.getOption("filter")&&(b=a.filter(b,function(a,
b){return this._shouldAddChild(a,b)},this));return b},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=!0;var c=new b.Model;this.addEmptyView(c,a);this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},
addEmptyView:function(b,c){var e=this._isShown&&!this.isBuffering&&d.isNodeAttached(this.el),f=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");a.isFunction(f)&&(f=f.call(this,b,this._emptyViewIndex));b=this.buildChildView(b,c,f);b._parent=this;this.proxyChildEvents(b);this._isShown&&d.triggerMethodOn(b,"before:show",b);this.children.add(b);if(e&&this._triggerBeforeAttach){var h=[b].concat(b._getNestedViews());b.once("render",function(){this._triggerMethodMany(h,this,"before:attach")},
this)}this.renderChildView(b,this._emptyViewIndex);e&&this._triggerAttach&&(h=[b].concat(b._getNestedViews()),this._triggerMethodMany(h,this,"attach"));this._isShown&&d.triggerMethodOn(b,"show",b)},getChildView:function(a){a=this.getOption("childView");if(!a)throw new d.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return a},addChild:function(a,b,c){var e=this.getOption("childViewOptions");e=d._getValue(e,this,[a,c]);a=this.buildChildView(a,b,e);this._updateIndices(a,
!0,c);this.triggerMethod("before:add:child",a);this._addChildView(a,c);this.triggerMethod("add:child",a);a._parent=this;return a},_updateIndices:function(a,b,c){this.getOption("sort")&&(b&&(a._index=c),this.children.each(function(c){c._index>=a._index&&(c._index+=b?1:-1)}))},_addChildView:function(a,b){var c=this._isShown&&!this.isBuffering&&d.isNodeAttached(this.el);this.proxyChildEvents(a);this._isShown&&!this.isBuffering&&d.triggerMethodOn(a,"before:show",a);this.children.add(a);if(c&&this._triggerBeforeAttach){var e=
[a].concat(a._getNestedViews());a.once("render",function(){this._triggerMethodMany(e,this,"before:attach")},this)}this.renderChildView(a,b);c&&this._triggerAttach&&(e=[a].concat(a._getNestedViews()),this._triggerMethodMany(e,this,"attach"));this._isShown&&!this.isBuffering&&d.triggerMethodOn(a,"show",a)},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b);return a},buildChildView:function(b,c,d){b=a.extend({model:b},d);return new c(b)},removeChildView:function(a){a&&(this.triggerMethod("before:remove:child",
a),a.destroy?a.destroy():a.remove&&a.remove(),delete a._parent,this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1));return a},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},_createBuffer:function(){var b=document.createDocumentFragment();a.each(this._bufferedChildren,function(a){b.appendChild(a.el)});
return b},attachHtml:function(a,b,c){a.isBuffering?a._bufferedChildren.splice(c,0,b):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;this.getOption("sort")&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1}));return c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},_initChildViewStorage:function(){this.children=new b.ChildViewContainer},destroy:function(){if(this.isDestroyed)return this;this.triggerMethod("before:destroy:collection");
this.destroyChildren({checkEmpty:!1});this.triggerMethod("destroy:collection");return d.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(b){b=b||{};var c=!0,e=this.children.map(a.identity);a.isUndefined(b.checkEmpty)||(c=b.checkEmpty);this.children.each(this.removeChildView,this);c&&this.checkEmpty();return e},_shouldAddChild:function(b,c){var e=this.getOption("filter");return!a.isFunction(e)||e.call(this,b,c,this.collection)},proxyChildEvents:function(b){var c=this.getOption("childViewEventPrefix");
this.listenTo(b,"all",function(){var e=a.toArray(arguments),d=e[0],f=this.normalizeMethods(a.result(this,"childEvents"));e[0]=c+":"+d;e.splice(1,0,b);"undefined"!==typeof f&&a.isFunction(f[d])&&f[d].apply(this,e.slice(1));this.triggerMethod.apply(this,e)})},_getImmediateChildren:function(){return a.values(this.children._views)},getViewComparator:function(){return this.getOption("viewComparator")}});d.CompositeView=d.CollectionView.extend({constructor:function(){d.CollectionView.apply(this,arguments)},
_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(a){return this.getOption("childView")||this.constructor},serializeData:function(){var b={};this.model&&(b=a.partial(this.serializeModel,this.model).apply(this,arguments));
return b},render:function(){this._ensureViewIsIntact();this._isRendering=!0;this.resetChildViewContainer();this.triggerMethod("before:render",this);this._renderTemplate();this._renderChildren();this._isRendering=!1;this.isRendered=!0;this.triggerMethod("render",this);return this},_renderChildren:function(){(this.isRendered||this._isRendering)&&d.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a=this.serializeData();a=this.mixinTemplateHelpers(a);this.triggerMethod("before:render:template");
var b=this.getTemplate();a=d.Renderer.render(b,a,this);this.attachElContent(a);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(a){this.$el.html(a);return this},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this,a).append(a.el)},_appendReorderedChildren:function(a){this.getChildViewContainer(this).append(a)},getChildViewContainer:function(a,b){if(a.$childViewContainer)return a.$childViewContainer;
if(b=d.getOption(a,"childViewContainer")){if(b=d._getValue(b,a),b="@"===b.charAt(0)&&a.ui?a.ui[b.substr(4)]:a.$(b),0>=b.length)throw new d.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+a.childViewContainer});}else b=a.$el;return a.$childViewContainer=b},resetChildViewContainer:function(){this.$childViewContainer&&(this.$childViewContainer=void 0)}});d.LayoutView=d.ItemView.extend({regionClass:d.Region,options:{destroyImmediate:!1},childViewEventPrefix:"childview",
constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);d.ItemView.call(this,a)},render:function(){this._ensureViewIsIntact();this._firstRender?this._firstRender=!1:this._reInitializeRegions();return d.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed)return this;!0===this.getOption("destroyImmediate")&&this.$el.remove();this.regionManager.destroy();return d.ItemView.prototype.destroy.apply(this,arguments)},showChildView:function(a,b){return this.getRegion(a).show(b)},
getChildView:function(a){return this.getRegion(a).currentView},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(b){this.regions=a.extend({},this.regions,b);return this._buildRegions(b)},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(b){var c={regionClass:this.getOption("regionClass"),
parentEl:a.partial(a.result,this,"el")};return this.regionManager.addRegions(b,c)},_initializeRegions:function(b){this._initRegionManager();var c=d._getValue(this.regions,this,[b])||{};var e=this.getOption.call(b,"regions");e=d._getValue(e,this,[b]);a.extend(c,e);c=this.normalizeUIValues(c,["selector","el"]);this.addRegions(c)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new d.RegionManager},_initRegionManager:function(){this.regionManager=
this.getRegionManager();this.regionManager._parent=this;this.listenTo(this.regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this.regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",
a,b)})},_getImmediateChildren:function(){return a.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}});d.Behavior=d.Object.extend({constructor:function(b,c){this.view=c;this.defaults=a.result(this,"defaults")||{};this.options=a.extend({},this.defaults,b);this.ui=a.extend({},a.result(c,"ui"),a.result(this,"ui"));d.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening();return this},proxyViewProperties:function(a){this.$el=
a.$el;this.el=a.el}});d.Behaviors=function(a,b){function c(a,e){if(!b.isObject(a.behaviors))return{};e=c.parseBehaviors(a,e||b.result(a,"behaviors"));c.wrap(a,e,b.keys(f));return e}function e(a,b){this._view=a;this._behaviors=b;this._triggers={}}var d=/^(\S+)\s*(.*)$/,f={behaviorTriggers:function(a,b){return(new e(this,b)).buildBehaviorTriggers()},behaviorEvents:function(c,e){var f={};b.each(e,function(c,e){var h={},g=b.clone(b.result(c,"events"))||{};g=a.normalizeUIKeys(g,c._uiBindings||c.ui);var l=
0;b.each(g,function(a,f){f=f.match(d);f=f[1]+"."+[this.cid,e,l++," "].join("")+f[2];a=b.isFunction(a)?a:c[a];h[f]=b.bind(a,c)},this);f=b.extend(f,h)},this);return f}};b.extend(c,{behaviorsLookup:function(){throw new a.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"});},getBehaviorClass:function(b,e){return b.behaviorClass?b.behaviorClass:a._getValue(c.behaviorsLookup,this,[b,e])[e]},parseBehaviors:function(a,e){return b.chain(e).map(function(e,
d){e=new (c.getBehaviorClass(e,d))(e,a);d=c.parseBehaviors(a,b.result(e,"behaviors"));return[e].concat(d)}).flatten().value()},wrap:function(a,c,e){b.each(e,function(e){a[e]=b.partial(f[e],a[e],c)})}});b.extend(e.prototype,{buildBehaviorTriggers:function(){b.each(this._behaviors,this._buildTriggerHandlersForBehavior,this);return this._triggers},_buildTriggerHandlersForBehavior:function(c,e){var d=b.clone(b.result(c,"triggers"))||{};d=a.normalizeUIKeys(d,c._uiBindings||c.ui);b.each(d,b.bind(this._setHandlerForBehavior,
this,c,e))},_setHandlerForBehavior:function(a,b,c,e){a=e.replace(/^\S+/,function(a){return a+".behaviortriggers"+b});this._triggers[a]=this._view._buildViewTrigger(c)}});return c}(d,a);d.AppRouter=b.Router.extend({constructor:function(a){this.options=a||{};b.Router.apply(this,arguments);var c=this.getOption("appRoutes"),e=this._getController();this.processAppRoutes(e,c);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(b,
c){if(a.isFunction(this.onRoute)){var e=a.invert(this.getOption("appRoutes"))[b];this.onRoute(b,e,c)}},processAppRoutes:function(b,c){if(c){var e=a.keys(c).reverse();a.each(e,function(a){this._addAppRoute(b,a,c[a])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(b,c,f){var e=b[f];if(!e)throw new d.Error('Method "'+f+'" was not found on the controller');this.route(c,f,a.bind(e,b))},mergeOptions:d.mergeOptions,getOption:d.proxyGetOption,triggerMethod:d.triggerMethod,
bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});d.Application=d.Object.extend({constructor:function(b){this._initializeRegions(b);this._initCallbacks=new d.Callbacks;this.submodules={};a.extend(this,b);this._initChannel();d.Object.call(this,b)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("before:start",
a);this._initCallbacks.run(a,this);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(b,c){var e=d.Module.getClass(c),f=a.toArray(arguments);f.unshift(this);return e.create.apply(e,f)},
getRegionManager:function(){return new d.RegionManager},_initializeRegions:function(b){var c=a.isFunction(this.regions)?this.regions(b):this.regions||{};this._initRegionManager();var e=d.getOption(b,"regions");a.isFunction(e)&&(e=e.call(this,b));a.extend(c,e);this.addRegions(c);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this._regionManager._parent=this;this.listenTo(this._regionManager,"before:add:region",function(){d._triggerMethod(this,"before:add:region",
arguments)});this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b;d._triggerMethod(this,"add:region",arguments)});this.listenTo(this._regionManager,"before:remove:region",function(){d._triggerMethod(this,"before:remove:region",arguments)});this.listenTo(this._regionManager,"remove:region",function(a){delete this[a];d._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=a.result(this,"channelName")||"global";this.channel=a.result(this,"channel")||
b.Wreqr.radio.channel(this.channelName);this.vent=a.result(this,"vent")||this.channel.vent;this.commands=a.result(this,"commands")||this.channel.commands;this.reqres=a.result(this,"reqres")||this.channel.reqres}});d.Module=function(b,c,d){this.moduleName=b;this.options=a.extend({},this.options,d);this.initialize=d.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=c;a.isFunction(this.initialize)&&this.initialize(b,c,this.options)};d.Module.extend=d.extend;
a.extend(d.Module.prototype,b.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(b){this._isInitialized||(a.each(this.submodules,function(a){a.startWithParent&&a.start(b)}),this.triggerMethod("before:start",b),this._initializerCallbacks.run(b,this),this._isInitialized=!0,this.triggerMethod("start",b))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),
a.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(c,f){c&&(f=a.flatten([this,this.app,b,d,b.$,a,f]),c.apply(this,f))},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new d.Callbacks;this._finalizerCallbacks=new d.Callbacks},triggerMethod:d.triggerMethod});a.extend(d.Module,
{create:function(b,c,d){var e=b,f=a.drop(arguments,3);c=c.split(".");var h=[];h[c.length-1]=d;a.each(c,function(a,c){var g=e;e=this._getModule(g,a,b,d);this._addModuleDefinition(g,e,h[c],f)},this);return e},_getModule:function(b,c,d,f,h){h=a.extend({},f);f=this.getClass(f);var e=b[c];e||(e=new f(c,d,h),b[c]=e,b.submodules[c]=e);return e},getClass:function(a){var b=d.Module;return a?a.prototype instanceof b?a:a.moduleClass||b:b},_addModuleDefinition:function(a,b,c,d){var e=this._getDefine(c);c=this._getStartWithParent(c,
b);e&&b.addDefinition(e,d);this._addStartWithParent(a,b,c)},_getStartWithParent:function(b,c){return a.isFunction(b)&&b.prototype instanceof d.Module?(b=c.constructor.prototype.startWithParent,a.isUndefined(b)?!0:b):a.isObject(b)?(b=b.startWithParent,a.isUndefined(b)?!0:b):!0},_getDefine:function(b){return!a.isFunction(b)||b.prototype instanceof d.Module?a.isObject(b)?b.define:null:b},_addStartWithParent:function(a,b,c){b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&
(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});return d});
define("dealerlocator/utils",["require","jquery","./services/MapUtilsStub"],function(g){var b=g("jquery"),a=g("./services/MapUtilsStub"),f={},l={maxUrlLength:2E3,formatPhone:function(a){if("string"===typeof a&&1>bm.bps.getBreakpoint())return a.replace(/\([0-9]+\)/,"").replace(/\s+/g,"")},constToCamelCase:function(a){if("string"!==typeof a)return null;a=a.split("_");for(var b=a[0].toLowerCase(),d=1,e=a.length;d<e;d++)b+=a[d].charAt(0).toUpperCase(),b+=a[d].substr(1).toLowerCase();return b},determineI18nMessage:function(a,
b){var c=null;b.message&&(c=b.message);var e=l.constToCamelCase(b.code);null!==e&&a[e]&&("string"===typeof a[e]?c=a[e]:(b=l.constToCamelCase(b.status),null!==b&&a[e][b]?c=a[e][b]:a[e].unknown&&(c=a[e].unknown)));null===c&&(c=a.unknown);return c},getCurrentPosition:function(d){d||(d={});var c={enableHighAccuracy:!1,timeout:bm.config.dealerLocator.geolocationTimeout,maximumAge:0};b.log("App.getCurrentPosition",d);return a.getCurrentPosition(c)},getStaticMapUrl:function(d){if(!d.markers)return b.log("GoogleMapView.showStatic: missing property 'markers' in options",
d),null;_.isArray(d.markers)||(d.markers=[d.markers]);d=_.extend({},f.config.staticMap.defaultConfig,d);return a.getStaticMapUrl(d)}};return l});
define("handlebars.translate",["jquery","module","handlebars"],function(g,b,a){function f(a,b){this.options=b||{};this.i18nCache={};this.text=b.text||{};this.registerHelper(a)}f.prototype={registerHelper:function(a,b){var c="function"===typeof b?b:this.t,d=this;a.registerHelper("i18n",function(a,b){return c.call(d,a)});return this},setText:function(a){this.text=a;return this},setOptions:function(a,b){if(a){if(b){var c=a;a={};a[c]=b}g.extend(this.options,a);a.text&&this.setText(a.text)}return this},
t:function(a){if(this.i18nCache[a])return this.i18nCache[a];if(0<a.indexOf(".")){var b=this.text;for(var c=a.split("."),f=0;b&&f<c.length;)b=b[c[f++]]}else b=this.text[a];return b?this.i18nCache[a]=b:(g.log("Handlebars.i18n: translation for the key '"+a+"' could not be found"),this.options.debug?a:"")}};return new f(a,{text:b.config().i18n||{}})});
define("dealerlocator/templates",["handlebars"],function(g){this.JST=this.JST||{};this.JST.dealerLocatorLink_desktop_view=g.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){var c;return'  \x3ca class\x3d"by_dealer_nav_global_dealer" href\x3d"#"\x3e\x3ci\x3e'+(null!=(c=(f.i18n||a&&a.i18n||f.helperMissing).call(null!=a?a:b.nullContext||{},null!=a?a.title:a,{name:"i18n",hash:{},data:d}))?c:"")+"\x3c/i\x3e\x3c/a\x3e\n"},useData:!0});this.JST.detailsDepartment=g.template({1:function(b,
a,f,g,d){var c,h;g="";b=(c=null!=(c=f.departments||(null!=a?a.departments:a))?c:f.helperMissing,h={name:"departments",hash:{},fn:b.program(2,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(null!=a?a:b.nullContext||{},h):c);f.departments||(b=f.blockHelperMissing.call(a,b,h));null!=b&&(g+=b);return g},2:function(b,a,f,g,d){var c,h,e;g=null!=a?a:b.nullContext||{};var l=f.helperMissing,n='\x3cdiv class\x3d"by_dealer_details_depart"\x3e\n  \x3cdiv class\x3d"by_dealer_details_openings_head"\x3e'+
b.escapeExpression((h=null!=(h=f.type||(null!=a?a.type:a))?h:l,"function"===typeof h?h.call(g,{name:"type",hash:{},data:d}):h))+"\x3c/div\x3e\n  "+(null!=(c=f["if"].call(g,null!=a?a.phone:a,{name:"if",hash:{},fn:b.program(3,d,0),inverse:b.noop,data:d}))?c:"")+'\n\n  \x3cul class\x3d"by_opening_list"\x3e\n';c=(h=null!=(h=f.openingHours||(null!=a?a.openingHours:a))?h:l,e={name:"openingHours",hash:{},fn:b.program(8,d,0),inverse:b.noop,data:d},"function"===typeof h?h.call(g,e):h);f.openingHours||(c=f.blockHelperMissing.call(a,
c,e));null!=c&&(n+=c);return n+"  \x3c/ul\x3e\n\x3c/div\x3e\n"},3:function(b,a,f,g,d){var c;return'\x3cdiv class\x3d"by_dealer_info_phone"\x3e\n  '+(null!=(c=f["if"].call(null!=a?a:b.nullContext||{},null!=a?a.formattedPhone:a,{name:"if",hash:{},fn:b.program(4,d,0),inverse:b.program(6,d,0),data:d}))?c:"")+"\n  \x3c/div\x3e"},4:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'\x3ca href\x3d"tel:'+b((c=null!=(c=f.formattedPhone||(null!=a?a.formattedPhone:
a))?c:h,"function"===typeof c?c.call(g,{name:"formattedPhone",hash:{},data:d}):c))+'"\x3e'+b((c=null!=(c=f.phone||(null!=a?a.phone:a))?c:h,"function"===typeof c?c.call(g,{name:"phone",hash:{},data:d}):c))+"\x3c/a\x3e"},6:function(b,a,f,g,d){var c;return b.escapeExpression((c=null!=(c=f.phone||(null!=a?a.phone:a))?c:f.helperMissing,"function"===typeof c?c.call(null!=a?a:b.nullContext||{},{name:"phone",hash:{},data:d}):c))},8:function(b,a,f,g,d){var c,h,e=null!=a?a:b.nullContext||{},l=f.helperMissing,
n="    \x3cli";g=(c=null!=(c=f.active||(null!=a?a.active:a))?c:l,h={name:"active",hash:{},fn:b.program(9,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(e,h):c);f.active||(g=f.blockHelperMissing.call(a,g,h));null!=g&&(n+=g);return n+'\x3e\x3cspan class\x3d"by_opening_day"\x3e'+b.escapeExpression((c=null!=(c=f.day||(null!=a?a.day:a))?c:l,"function"===typeof c?c.call(e,{name:"day",hash:{},data:d}):c))+'\x3c/span\x3e\n          \x3cspan class\x3d"by_opening_hours"\x3e\n            '+(null!=
(g=f["if"].call(e,null!=a?a.appointment:a,{name:"if",hash:{},fn:b.program(11,d,0),inverse:b.noop,data:d}))?g:"")+"\n            "+(null!=(g=f["if"].call(e,null!=a?a.closed:a,{name:"if",hash:{},fn:b.program(13,d,0),inverse:b.noop,data:d}))?g:"")+"\n"+(null!=(g=f["if"].call(e,null!=a?a.periods:a,{name:"if",hash:{},fn:b.program(15,d,0),inverse:b.noop,data:d}))?g:"")+"          \x3c/span\x3e\x3c/li\x3e\n"},9:function(b,a,f,g,d){return' class\x3d"by_active"'},11:function(b,a,f,g,d){return" "+b.escapeExpression((f.i18n||
a&&a.i18n||f.helperMissing).call(null!=a?a:b.nullContext||{},"result.byAppointment",{name:"i18n",hash:{},data:d}))},13:function(b,a,f,g,d){return" "+b.escapeExpression((f.i18n||a&&a.i18n||f.helperMissing).call(null!=a?a:b.nullContext||{},"result.storeClosed",{name:"i18n",hash:{},data:d}))},15:function(b,a,f,g,d){var c,h;g="              ";b=(c=null!=(c=f.periods||(null!=a?a.periods:a))?c:f.helperMissing,h={name:"periods",hash:{},fn:b.program(16,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(null!=
a?a:b.nullContext||{},h):c);f.periods||(b=f.blockHelperMissing.call(a,b,h));null!=b&&(g+=b);return g+"\n"},16:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'\x3cspan class\x3d"by_opening_hours_item"\x3e'+b((c=null!=(c=f.open||(null!=a?a.open:a))?c:h,"function"===typeof c?c.call(g,{name:"open",hash:{},data:d}):c))+" - "+b((c=null!=(c=f.close||(null!=a?a.close:a))?c:h,"function"===typeof c?c.call(g,{name:"close",hash:{},data:d}):c))+"\x3c/span\x3e"},
compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){var c,h;g="\n";b=(c=null!=(c=f.addresses||(null!=a?a.addresses:a))?c:f.helperMissing,h={name:"addresses",hash:{},fn:b.program(1,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(null!=a?a:b.nullContext||{},h):c);f.addresses||(b=f.blockHelperMissing.call(a,b,h));null!=b&&(g+=b);return g},useData:!0});this.JST.detailsHead=g.template({1:function(b,a,f,g,d){var c,h,e=null!=a?a:b.nullContext||{},l=f.helperMissing,n=b.escapeExpression,p='  \x3cdiv class\x3d"by_dealer_details_depart"\x3e\n    \x3cdiv class\x3d"by_dealer_details_openings_head"\x3e\x3cul class\x3d"by_dealer_type_bar"\x3e';
g=(c=null!=(c=f.types||(null!=a?a.types:a))?c:l,h={name:"types",hash:{},fn:b.program(2,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(e,h):c);f.types||(g=f.blockHelperMissing.call(a,g,h));null!=g&&(p+=g);return p+'\x3c/ul\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"by_dealer_details_address"\x3e\n      '+n((c=null!=(c=f.street||(null!=a?a.street:a))?c:l,"function"===typeof c?c.call(e,{name:"street",hash:{},data:d}):c))+"\x3cbr\x3e\n      "+(null!=(g=f["if"].call(e,null!=a?a.secondLine:a,{name:"if",
hash:{},fn:b.program(4,d,0),inverse:b.noop,data:d}))?g:"")+"\n      "+n((c=null!=(c=f.postcode||(null!=a?a.postcode:a))?c:l,"function"===typeof c?c.call(e,{name:"postcode",hash:{},data:d}):c))+", "+n((c=null!=(c=f.city||(null!=a?a.city:a))?c:l,"function"===typeof c?c.call(e,{name:"city",hash:{},data:d}):c))+"\n    \x3c/div\x3e\n  \x3c/div\x3e\n"},2:function(b,a,f,g,d){var c;return"\x3cli\x3e"+b.escapeExpression((c=null!=(c=f.title||(null!=a?a.title:a))?c:f.helperMissing,"function"===typeof c?c.call(null!=
a?a:b.nullContext||{},{name:"title",hash:{},data:d}):c))+"\x3c/li\x3e"},4:function(b,a,f,g,d){var c;return b.escapeExpression((c=null!=(c=f.secondLine||(null!=a?a.secondLine:a))?c:f.helperMissing,"function"===typeof c?c.call(null!=a?a:b.nullContext||{},{name:"secondLine",hash:{},data:d}):c))+"\x3cbr\x3e"},6:function(b,a,f,g,d){return'\x3cli class\x3d"by_dealer_info_direction"\x3e\n      \x3ci class\x3d"by_dealer_icon_direction"\x3e\x3c/i\x3e\n      \x3cspan\x3e'+b.escapeExpression((f.i18n||a&&a.i18n||
f.helperMissing).call(null!=a?a:b.nullContext||{},"result.getDirections",{name:"i18n",hash:{},data:d}))+"\x3c/span\x3e\x3c/li\x3e"},8:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'\x3cli class\x3d"by_dealer_info_contact"\x3e\n      \x3ca href\x3d"'+b((c=null!=(c=f.requestUrl||(null!=a?a.requestUrl:a))?c:h,"function"===typeof c?c.call(g,{name:"requestUrl",hash:{},data:d}):c))+'"\x3e\x3ci class\x3d"by_dealer_icon_contact"\x3e\x3c/i\x3e\x3cspan\x3e'+
b((f.i18n||a&&a.i18n||h).call(g,"result.requestContact",{name:"i18n",hash:{},data:d}))+"\x3c/span\x3e\x3c/a\x3e\n    \x3c/li\x3e"},10:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'\x3cli\x3e\n      \x3ca href\x3d"'+b((c=null!=(c=f.website||(null!=a?a.website:a))?c:h,"function"===typeof c?c.call(g,{name:"website",hash:{},data:d}):c))+'" target\x3d"_blank"\x3e\x3ci class\x3d"by_dealer_icon_website"\x3e\x3c/i\x3e\x3cspan\x3e'+b((f.i18n||a&&
a.i18n||h).call(g,"result.viewDealerWebsite",{name:"i18n",hash:{},data:d}))+"\x3c/span\x3e\x3c/a\x3e\n    \x3c/li\x3e"},12:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'    \x3cli\x3e\n      \x3ca href\x3d"'+b((c=null!=(c=f.preownedUrl||(null!=a?a.preownedUrl:a))?c:h,"function"===typeof c?c.call(g,{name:"preownedUrl",hash:{},data:d}):c))+'" target\x3d"_blank"\x3e\x3ci class\x3d"by_dealer_icon_preowned"\x3e\x3c/i\x3e\x3cspan\x3e'+b((f.i18n||
a&&a.i18n||h).call(g,"result.preowned",{name:"i18n",hash:{},data:d}))+"\x3c/span\x3e\x3c/a\x3e\n    \x3c/li\x3e"},compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){var c,h;g=null!=a?a:b.nullContext||{};var e=f.helperMissing;var l='\x3ch1 class\x3d"by_dealer_headline"\x3e'+b.escapeExpression((c=null!=(c=f.dealerName||(null!=a?a.dealerName:a))?c:e,"function"===typeof c?c.call(g,{name:"dealerName",hash:{},data:d}):c))+'\x3c/h1\x3e\n\n\x3cdiv class\x3d"by_dealer_details_row"\x3e\n';e=(c=null!=(c=
f.addresses||(null!=a?a.addresses:a))?c:e,h={name:"addresses",hash:{},fn:b.program(1,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(g,h):c);f.addresses||(e=f.blockHelperMissing.call(a,e,h));null!=e&&(l+=e);return l+'\x3c/div\x3e\n\n\x3cdiv class\x3d"by_dealer_details_info_container"\x3e\n  \x3cul class\x3d"by_dealer_details_info"\x3e\n    '+(null!=(e=f["if"].call(g,null!=a?a.directions:a,{name:"if",hash:{},fn:b.program(6,d,0),inverse:b.noop,data:d}))?e:"")+"\n    "+(null!=(e=f["if"].call(g,
null!=a?a.requestUrl:a,{name:"if",hash:{},fn:b.program(8,d,0),inverse:b.noop,data:d}))?e:"")+"\n      "+(null!=(e=f["if"].call(g,null!=a?a.website:a,{name:"if",hash:{},fn:b.program(10,d,0),inverse:b.noop,data:d}))?e:"")+"\n"+(null!=(e=f["if"].call(g,null!=a?a.preownedUrl:a,{name:"if",hash:{},fn:b.program(12,d,0),inverse:b.noop,data:d}))?e:"")+"\n  \x3c/ul\x3e\n\x3c/div\x3e"},useData:!0});this.JST.directions=g.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){return'\x3cdiv class\x3d"by_dealer_direction_bar_inner"\x3e\n  \x3cdiv id\x3d"direction_error"\x3e\x3c/div\x3e\n  \x3cdiv class\x3d"by_dealer_direction_location"\x3e\n    \x3cdiv class\x3d"by_dealer_direction_data" id\x3d"direction_origin"\x3e\x3c/div\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"by_dealer_direction_divider"\x3e\n    \x3cdiv class\x3d"by_dealer_direction_divider_hori"\x3e\x3c/div\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"by_dealer_direction_dest"\x3e\n    \x3cdiv class\x3d"by_dealer_direction_data" id\x3d"direction_destination"\x3e\x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e'},
useData:!0});this.JST.mainLayout=g.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){return'\x3cdiv class\x3d"by_dealer_locator_inner"\x3e\n  \x3c!-- back link for mobile devices --\x3e\n  \x3cdiv id\x3d"by_dealer_mobile_back"\x3e\n    \x3cdiv class\x3d"by_dealer_nav_back_button"\x3e'+b.escapeExpression((f.i18n||a&&a.i18n||f.helperMissing).call(null!=a?a:b.nullContext||{},"back",{name:"i18n",hash:{},data:d}))+'\x3c/div\x3e\n  \x3c/div\x3e\n\n  \x3c!-- contains the header, e.g. search bar or dealer details --\x3e\n  \x3cdiv id\x3d"by_dealer_head"\x3e\x3c/div\x3e\n\n  \x3c!-- contains the filter or directions --\x3e\n  \x3cdiv id\x3d"by_dealer_subhead"\x3e\x3c/div\x3e\n\n  \x3c!-- wraps the map (left hand side) and optionally the result list on right hand side --\x3e\n  \x3cdiv class\x3d"by_dealer_main_content"\x3e\n    \x3cdiv id\x3d"by_dealer_map"\x3e\x3c/div\x3e\n    \x3cdiv id\x3d"by_dealer_result"\x3e\x3c/div\x3e\n    \x3cdiv id\x3d"by_dealer_global_button"\x3e\x3c/div\x3e\n  \x3c/div\x3e\n\n  \x3c!-- contains navigation buttons, e.g. "back to result" --\x3e\n  \x3cdiv id\x3d"by_dealer_navigate"\x3e\x3c/div\x3e\n\n  \x3c!-- for the details page: shows opening hours by department --\x3e\n  \x3cdiv id\x3d"by_dealer_department"\x3e\x3c/div\x3e\n\n  \x3c!-- global link for mobile devices --\x3e\n  \x3cdiv id\x3d"by_dealer_mobile_global"\x3e\x3c/div\x3e\n\x3c/div\x3e\n'},
useData:!0});this.JST.map_infowindow=g.template({1:function(b,a,f,g,d){var c;return"\x3cli\x3e"+b.escapeExpression((c=null!=(c=f.title||(null!=a?a.title:a))?c:f.helperMissing,"function"===typeof c?c.call(null!=a?a:b.nullContext||{},{name:"title",hash:{},data:d}):c))+"\x3c/li\x3e"},compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){var c,h,e=null!=a?a:b.nullContext||{},l=f.helperMissing;g='\x3cdiv class\x3d"by_map_infowindow"\x3e\n  \x3cdiv class\x3d"by_map_infowindow_headline"\x3e\n    '+b.escapeExpression((c=
null!=(c=f.dealerName||(null!=a?a.dealerName:a))?c:l,"function"===typeof c?c.call(e,{name:"dealerName",hash:{},data:d}):c))+'\n  \x3c/div\x3e\n  \x3cul class\x3d"by_dealer_type_bar"\x3e\n    ';b=(c=null!=(c=f.types||(null!=a?a.types:a))?c:l,h={name:"types",hash:{},fn:b.program(1,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(e,h):c);f.types||(b=f.blockHelperMissing.call(a,b,h));null!=b&&(g+=b);return g+"\n  \x3c/ul\x3e\n\x3c/div\x3e\n"},useData:!0});this.JST.map=g.template({compiler:[7,
"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){return'\n  \x3cdiv class\x3d"by_dealer_map_inline"\x3e\n    \x3cdiv class\x3d"by_map_canvas" id\x3d"by_map_canvas"\x3e\x3c/div\x3e\n  \x3c/div\x3e\n  \x3cdiv id\x3d"by_map_static"\x3e\n    \x3cimg class\x3d"by_dealer_static_map" alt\x3d""\x3e\n  \x3c/div\x3e\n'},useData:!0});this.JST.mobile_global_button=g.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'\x3ca class\x3d"by_dealer_nav_global_dealer_bottom" href\x3d"'+
b((f.config||a&&a.config||h).call(g,"appBase",{name:"config",hash:{},data:d}))+'global"\x3e'+b((c=null!=(c=f.title||(null!=a?a.title:a))?c:h,"function"===typeof c?c.call(g,{name:"title",hash:{},data:d}):c))+" \x3ci\x3e\x3c/i\x3e\x3c/a\x3e"},useData:!0});this.JST.regionMenu=g.template({1:function(b,a,f,g,d){var c,h;g=null!=a?a:b.nullContext||{};var e=f.helperMissing,l=b.escapeExpression;return'    \x3cli data-key\x3d"'+l((h=null!=(h=f.id||(null!=a?a.id:a))?h:e,"function"===typeof h?h.call(g,{name:"id",
hash:{},data:d}):h))+'" data-amount\x3d"'+l((h=null!=(h=f.amountCountries||(null!=a?a.amountCountries:a))?h:e,"function"===typeof h?h.call(g,{name:"amountCountries",hash:{},data:d}):h))+'"\x3e\n      \x3cdiv class\x3d"by_global_dealer_label"\x3e'+l((h=null!=(h=f.name||(null!=a?a.name:a))?h:e,"function"===typeof h?h.call(g,{name:"name",hash:{},data:d}):h))+"\x3c/div\x3e\n"+(null!=(c=f["if"].call(g,null!=a?a.countries:a,{name:"if",hash:{},fn:b.program(2,d,0),inverse:b.noop,data:d}))?c:"")+"    \x3c/li\x3e\n"},
2:function(b,a,f,g,d){var c,h;g=null!=a?a:b.nullContext||{};var e=f.helperMissing,l=b.escapeExpression;l='        \x3cul data-level\x3d"1"\x3e\n          \x3cli class\x3d"back"\x3e'+l((c=null!=(c=f.name||(null!=a?a.name:a))?c:e,"function"===typeof c?c.call(g,{name:"name",hash:{},data:d}):c))+'\x3c/li\x3e\n          \x3cli class\x3d"by_global_dealer_choose_location"\x3e'+l((f.i18n||a&&a.i18n||e).call(g,"result.chooseLocation",{name:"i18n",hash:{},data:d}))+"\x3c/li\x3e\n";b=(c=null!=(c=f.countries||
(null!=a?a.countries:a))?c:e,h={name:"countries",hash:{},fn:b.program(3,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(g,h):c);f.countries||(b=f.blockHelperMissing.call(a,b,h));null!=b&&(l+=b);return l+"        \x3c/ul\x3e\n"},3:function(b,a,f,g,d){var c,h;g=null!=a?a:b.nullContext||{};var e=f.helperMissing,l=b.escapeExpression;return'          \x3cli data-key\x3d"'+l((h=null!=(h=f.id||(null!=a?a.id:a))?h:e,"function"===typeof h?h.call(g,{name:"id",hash:{},data:d}):h))+'"\x3e\n            \x3cdiv class\x3d"by_global_dealer_label"\x3e'+
l((h=null!=(h=f.name||(null!=a?a.name:a))?h:e,"function"===typeof h?h.call(g,{name:"name",hash:{},data:d}):h))+"\x3c/div\x3e\n"+(null!=(c=f["if"].call(g,null!=a?a.states:a,{name:"if",hash:{},fn:b.program(4,d,0),inverse:b.noop,data:d}))?c:"")+"          \x3c/li\x3e\n"},4:function(b,a,f,g,d){var c,h,e=null!=a?a:b.nullContext||{},l=f.helperMissing;g='             \x3cul data-level\x3d"2"\x3e\n               \x3cli class\x3d"back"\x3e'+b.escapeExpression((c=null!=(c=f.name||(null!=a?a.name:a))?c:l,"function"===
typeof c?c.call(e,{name:"name",hash:{},data:d}):c))+"\x3c/li\x3e\n";b=(c=null!=(c=f.states||(null!=a?a.states:a))?c:l,h={name:"states",hash:{},fn:b.program(5,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(e,h):c);f.states||(b=f.blockHelperMissing.call(a,b,h));null!=b&&(g+=b);return g+"             \x3c/ul\x3e\n"},5:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'                \x3cli data-key\x3d"'+b((c=null!=(c=f.id||(null!=a?a.id:
a))?c:h,"function"===typeof c?c.call(g,{name:"id",hash:{},data:d}):c))+'"\x3e\x3cdiv class\x3d"by_global_dealer_label"\x3e'+b((c=null!=(c=f.name||(null!=a?a.name:a))?c:h,"function"===typeof c?c.call(g,{name:"name",hash:{},data:d}):c))+"\x3c/div\x3e\x3c/li\x3e\n"},compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){var c,h;g=' \x3cul data-level\x3d"0"\x3e\n';b=(c=null!=(c=f.regions||(null!=a?a.regions:a))?c:f.helperMissing,h={name:"regions",hash:{},fn:b.program(1,d,0),inverse:b.noop,data:d},"function"===
typeof c?c.call(null!=a?a:b.nullContext||{},h):c);f.regions||(b=f.blockHelperMissing.call(a,b,h));null!=b&&(g+=b);return g+" \x3c/ul\x3e"},useData:!0});this.JST.result_view=g.template({1:function(b,a,f,g,d){var c,h;g=null!=a?a:b.nullContext||{};var e=f.helperMissing,l=b.escapeExpression;return'              \x3coption value\x3d"'+l((h=null!=(h=f.type||(null!=a?a.type:a))?h:e,"function"===typeof h?h.call(g,{name:"type",hash:{},data:d}):h))+'"'+(null!=(c=f["if"].call(g,null!=a?a.selected:a,{name:"if",
hash:{},fn:b.program(2,d,0),inverse:b.noop,data:d}))?c:"")+"\x3e"+l((h=null!=(h=f.title||(null!=a?a.title:a))?h:e,"function"===typeof h?h.call(g,{name:"title",hash:{},data:d}):h))+"\x3c/option\x3e\n"},2:function(b,a,f,g,d){return' selected\x3d"selected"'},compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){var c,h,e=null!=a?a:b.nullContext||{},l=f.helperMissing,n='  \x3cdiv class\x3d"by_dealer_search_filter_wrapper"\x3e\n    \x3cdiv class\x3d"by_dealer_search_result_col"\x3e\n      \x3cdiv class\x3d"by_dealer_filter_wrapper"\x3e\n        \x3cspan class\x3d"by_form_select_text"\x3e\x3c/span\x3e\n        \x3cselect name\x3d"filterresult" id\x3d"filterresult" class\x3d"by_form_input_select"\x3e\n';
g=(c=null!=(c=f.filterOptions||(null!=a?a.filterOptions:a))?c:l,h={name:"filterOptions",hash:{},fn:b.program(1,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(e,h):c);f.filterOptions||(g=f.blockHelperMissing.call(a,g,h));null!=g&&(n+=g);return n+'        \x3c/select\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"by_dealer_empty_result"\x3e'+b.escapeExpression((f.i18n||a&&a.i18n||l).call(e,"result.empty",{name:"i18n",hash:{},data:d}))+'\x3c/div\x3e\n  \x3cdiv class\x3d"by_dealer_search_result_row"\x3e\n  \x3c/div\x3e'},
useData:!0});this.JST.resultEmpty=g.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){return b.escapeExpression((f.i18n||a&&a.i18n||f.helperMissing).call(null!=a?a:b.nullContext||{},"result.empty",{name:"i18n",hash:{},data:d}))+"\n"},useData:!0});this.JST.resultHead=g.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){var c;return'\x3cdiv class\x3d"by_dealer_global_country"\x3e'+b.escapeExpression(b.lambda(null!=(c=null!=a?a.country:a)?c.name:c,a))+"\x3c/div\x3e\n"},useData:!0});
this.JST.resultInfo=g.template({1:function(b,a,f,g,d){var c,h;g=null!=a?a:b.nullContext||{};var e=f.helperMissing,l=b.escapeExpression;return'      \x3clabel class\x3d"by_ds_filter__list_item"\x3e\n        \x3cinput type\x3d"checkbox" value\x3d"'+l((h=null!=(h=f.type||(null!=a?a.type:a))?h:e,"function"===typeof h?h.call(g,{name:"type",hash:{},data:d}):h))+'" class\x3d"by_js_ds_checkbox" hidden data-exclusive\x3d"'+l((h=null!=(h=f.exclusive||(null!=a?a.exclusive:a))?h:e,"function"===typeof h?h.call(g,
{name:"exclusive",hash:{},data:d}):h))+'"\n          '+(null!=(c=f["if"].call(g,null!=a?a.selected:a,{name:"if",hash:{},fn:b.program(2,d,0),inverse:b.noop,data:d}))?c:"")+'/\x3e\n        \x3cdiv class\x3d"by_ds_filter__checkbox"\x3e\n          \x3cspan class\x3d"by_ds_filter__checkbox_label"\x3e\x26check;\x3c/span\x3e\n        \x3c/div\x3e\n        \x3cspan class\x3d"by_ds_filter__checkbox_text"\x3e'+l((h=null!=(h=f.title||(null!=a?a.title:a))?h:e,"function"===typeof h?h.call(g,{name:"title",hash:{},
data:d}):h))+"\x3c/span\x3e\n      \x3c/label\x3e\n"},2:function(b,a,f,g,d){return' checked\x3d"checked"'},compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){var c,h,e=null!=a?a:b.nullContext||{},l=f.helperMissing;g='\x3cdiv class\x3d"by_dealer_search_info_label"\x3e\n  '+b.escapeExpression((f.i18n||a&&a.i18n||l).call(e,"resultInfo.label",{name:"i18n",hash:{},data:d}))+'\n  \x3cspan class\x3d"by_dealer_search_info_detail"\x3e\x3c/span\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"by_dealer_search_filter"\x3e\n  \x3cdiv class\x3d"by_ds_filter"\x3e\n    \x3ca class\x3d"by_ds_filter__title"\x3e\n      \x3cspan class\x3d"by_ds_filter__badge"\x3e0\x3c/span\x3e\n      \x3cspan class\x3d"by_ds_filter__title_text"\x3eFilter\x3c/span\x3e\n      \x3cspan class\x3d"by_ds_filter__arrow"\x3e\x3c/span\x3e\n    \x3c/a\x3e\n    \x3cdiv class\x3d"by_ds_filter__list"\x3e\n';
b=(c=null!=(c=f.filterOptions||(null!=a?a.filterOptions:a))?c:l,h={name:"filterOptions",hash:{},fn:b.program(1,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(e,h):c);f.filterOptions||(b=f.blockHelperMissing.call(a,b,h));null!=b&&(g+=b);return g+"    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n"},useData:!0});this.JST.resultItem=g.template({1:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'\x3cspan class\x3d"by_dealer_distance"\x3e'+
b((c=null!=(c=f.convertedDistance||(null!=a?a.convertedDistance:a))?c:h,"function"===typeof c?c.call(g,{name:"convertedDistance",hash:{},data:d}):c))+b((f.i18n||a&&a.i18n||h).call(g,"unitName",{name:"i18n",hash:{},data:d}))+"\x3c/span\x3e"},3:function(b,a,f,g,d){var c;return"\x3cli\x3e"+b.escapeExpression((c=null!=(c=f.title||(null!=a?a.title:a))?c:f.helperMissing,"function"===typeof c?c.call(null!=a?a:b.nullContext||{},{name:"title",hash:{},data:d}):c))+"\x3c/li\x3e"},compiler:[7,"\x3e\x3d 4.0.0"],
main:function(b,a,f,g,d){var c,h,e;g=null!=a?a:b.nullContext||{};var l=f.helperMissing,n='  \x3cdiv class\x3d"by_dealer_result_item_visible"\x3e\n    \x3ca href\x3d"#" class\x3d"by_dealer_result_item_opener" aria-label\x3d"show dealer information"\x3e\n      \x3cdiv class\x3d"by_dealer_headline"\x3e'+b.escapeExpression((h=null!=(h=f.dealerName||(null!=a?a.dealerName:a))?h:l,"function"===typeof h?h.call(g,{name:"dealerName",hash:{},data:d}):h))+"\n        "+(null!=(c=f["if"].call(g,null!=a?a.convertedDistance:
a,{name:"if",hash:{},fn:b.program(1,d,0),inverse:b.noop,data:d}))?c:"")+'\n      \x3c/div\x3e\n      \x3cul class\x3d"by_dealer_type_bar"\x3e\n        ';c=(h=null!=(h=f.types||(null!=a?a.types:a))?h:l,e={name:"types",hash:{},fn:b.program(3,d,0),inverse:b.noop,data:d},"function"===typeof h?h.call(g,e):h);f.types||(c=f.blockHelperMissing.call(a,c,e));null!=c&&(n+=c);return n+'\n      \x3c/ul\x3e\n    \x3c/a\x3e\n  \x3c/div\x3e\n\n  \x3cdiv class\x3d"by_dealer_description"\x3e\n\n  \x3c/div\x3e\n'},
useData:!0});this.JST.resultItemDetails=g.template({1:function(b,a,f,g,d){var c,h,e=null!=a?a:b.nullContext||{},l=f.helperMissing,n=f.blockHelperMissing,p=b.escapeExpression,r='\x3cdiv class\x3d"by_dealer_result_item_location"\x3e\n  \x3cul class\x3d"by_dealer_type_bar"\x3e\n    ';g=(c=null!=(c=f.types||(null!=a?a.types:a))?c:l,h={name:"types",hash:{},fn:b.program(2,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(e,h):c);f.types||(g=n.call(a,g,h));null!=g&&(r+=g);r+='\n  \x3c/ul\x3e\n  \x3cdiv class\x3d"by_dealer_address_wrapper"\x3e\n    \x3cdiv class\x3d"by_dealer_image"\x3e\n      '+
(null!=(g=f["if"].call(e,null!=a?a.dealerImage:a,{name:"if",hash:{},fn:b.program(4,d,0),inverse:b.noop,data:d}))?g:"")+'\n    \x3c/div\x3e\n    \x3cdiv class\x3d"by_dealer_address"\x3e\n      '+p((c=null!=(c=f.street||(null!=a?a.street:a))?c:l,"function"===typeof c?c.call(e,{name:"street",hash:{},data:d}):c))+"\x3cbr\x3e\n      "+(null!=(g=f["if"].call(e,null!=a?a.secondLine:a,{name:"if",hash:{},fn:b.program(6,d,0),inverse:b.noop,data:d}))?g:"")+"\n      "+p((c=null!=(c=f.city||(null!=a?a.city:a))?
c:l,"function"===typeof c?c.call(e,{name:"city",hash:{},data:d}):c))+"\x3cbr\x3e\n      "+p((c=null!=(c=f.postcode||(null!=a?a.postcode:a))?c:l,"function"===typeof c?c.call(e,{name:"postcode",hash:{},data:d}):c))+"\n    \x3c/div\x3e\n  \x3c/div\x3e\n\n"+(null!=(g=f["if"].call(e,null!=a?a.phone:a,{name:"if",hash:{},fn:b.program(8,d,0),inverse:b.noop,data:d}))?g:"")+'\n  \x3cdiv class\x3d"by_dealer_opening_hours"\x3e\n    \x3cdiv class\x3d"by_dealer_openings_head"\x3e'+p((f.i18n||a&&a.i18n||l).call(e,
"result.openingHours",{name:"i18n",hash:{},data:d}))+'\x3c/div\x3e\n\n    \x3cul class\x3d"by_dealer_opening_list"\x3e\n';g=(c=null!=(c=f.todayOpenings||(null!=a?a.todayOpenings:a))?c:l,h={name:"todayOpenings",hash:{},fn:b.program(13,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(e,h):c);f.todayOpenings||(g=n.call(a,g,h));null!=g&&(r+=g);return r+'    \x3c/ul\x3e\n  \x3c/div\x3e\n\n  \x3ca href\x3d"'+p((f.config||a&&a.config||l).call(e,"appBase",{name:"config",hash:{},data:d}))+"partner/"+
p((c=null!=(c=f.id||(null!=a?a.id:a))?c:l,"function"===typeof c?c.call(e,{name:"id",hash:{},data:d}):c))+"-"+p((f.encode||a&&a.encode||l).call(e,null!=a?a.dealerName:a,{name:"encode",hash:{},data:d}))+'" class\x3d"by_dealer_view_button"\x3e'+p((f.i18n||a&&a.i18n||l).call(e,"result.viewDetails",{name:"i18n",hash:{},data:d}))+'\x3c/a\x3e\n\n  \x3cul class\x3d"by_dealer_info"\x3e\n    '+(null!=(g=f["if"].call(e,null!=a?a.directions:a,{name:"if",hash:{},fn:b.program(21,d,0),inverse:b.noop,data:d}))?g:
"")+"\n    "+(null!=(g=f["if"].call(e,null!=a?a.requestUrl:a,{name:"if",hash:{},fn:b.program(23,d,0),inverse:b.noop,data:d}))?g:"")+"\n    "+(null!=(g=f["if"].call(e,null!=a?a.website:a,{name:"if",hash:{},fn:b.program(25,d,0),inverse:b.noop,data:d}))?g:"")+"\n  \x3c/ul\x3e\n\x3c/div\x3e\n"},2:function(b,a,f,g,d){var c;return"\x3cli\x3e"+b.escapeExpression((c=null!=(c=f.title||(null!=a?a.title:a))?c:f.helperMissing,"function"===typeof c?c.call(null!=a?a:b.nullContext||{},{name:"title",hash:{},data:d}):
c))+"\x3c/li\x3e"},4:function(b,a,f,g,d){var c;return'\x3cimg class\x3d"by_dealer_image" src\x3d"'+b.escapeExpression((c=null!=(c=f.dealerImage||(null!=a?a.dealerImage:a))?c:f.helperMissing,"function"===typeof c?c.call(null!=a?a:b.nullContext||{},{name:"dealerImage",hash:{},data:d}):c))+'" alt\x3d"dealer icon"\x3e'},6:function(b,a,f,g,d){var c;return b.escapeExpression((c=null!=(c=f.secondLine||(null!=a?a.secondLine:a))?c:f.helperMissing,"function"===typeof c?c.call(null!=a?a:b.nullContext||{},{name:"secondLine",
hash:{},data:d}):c))+"\x3cbr\x3e"},8:function(b,a,f,g,d){var c;return'  \x3cdiv class\x3d"by_dealer_info_phone"\x3e\n    '+(null!=(c=f["if"].call(null!=a?a:b.nullContext||{},null!=a?a.formattedPhone:a,{name:"if",hash:{},fn:b.program(9,d,0),inverse:b.program(11,d,0),data:d}))?c:"")+"\n  \x3c/div\x3e\n"},9:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'\x3ca href\x3d"tel:'+b((c=null!=(c=f.formattedPhone||(null!=a?a.formattedPhone:a))?c:h,"function"===
typeof c?c.call(g,{name:"formattedPhone",hash:{},data:d}):c))+'"\x3e'+b((c=null!=(c=f.phone||(null!=a?a.phone:a))?c:h,"function"===typeof c?c.call(g,{name:"phone",hash:{},data:d}):c))+"\x3c/a\x3e"},11:function(b,a,f,g,d){var c;return b.escapeExpression((c=null!=(c=f.phone||(null!=a?a.phone:a))?c:f.helperMissing,"function"===typeof c?c.call(null!=a?a:b.nullContext||{},{name:"phone",hash:{},data:d}):c))},13:function(b,a,f,g,d){var c,h;g=null!=a?a:b.nullContext||{};var e=f.helperMissing,l=b.escapeExpression;
return'      \x3cli\x3e\x3cspan class\x3d"by_opening_department"\x3e'+l((h=null!=(h=f.department||(null!=a?a.department:a))?h:e,"function"===typeof h?h.call(g,{name:"department",hash:{},data:d}):h))+'\x3c/span\x3e\x3cspan class\x3d"by_opening_day"\x3e'+l((h=null!=(h=f.day||(null!=a?a.day:a))?h:e,"function"===typeof h?h.call(g,{name:"day",hash:{},data:d}):h))+'\x3c/span\x3e\x3cspan class\x3d"by_opening_hours"\x3e\n        '+(null!=(c=f["if"].call(g,null!=a?a.appointment:a,{name:"if",hash:{},fn:b.program(14,
d,0),inverse:b.noop,data:d}))?c:"")+"\n        "+(null!=(c=f["if"].call(g,null!=a?a.closed:a,{name:"if",hash:{},fn:b.program(16,d,0),inverse:b.noop,data:d}))?c:"")+"\n"+(null!=(c=f["if"].call(g,null!=a?a.periods:a,{name:"if",hash:{},fn:b.program(18,d,0),inverse:b.noop,data:d}))?c:"")+"\x3c/span\x3e\x3c/li\x3e\n"},14:function(b,a,f,g,d){return" "+b.escapeExpression((f.i18n||a&&a.i18n||f.helperMissing).call(null!=a?a:b.nullContext||{},"result.byAppointment",{name:"i18n",hash:{},data:d}))},16:function(b,
a,f,g,d){return" "+b.escapeExpression((f.i18n||a&&a.i18n||f.helperMissing).call(null!=a?a:b.nullContext||{},"result.storeClosed",{name:"i18n",hash:{},data:d}))},18:function(b,a,f,g,d){var c,h;g="          ";b=(c=null!=(c=f.periods||(null!=a?a.periods:a))?c:f.helperMissing,h={name:"periods",hash:{},fn:b.program(19,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(null!=a?a:b.nullContext||{},h):c);f.periods||(b=f.blockHelperMissing.call(a,b,h));null!=b&&(g+=b);return g+"\n        "},19:function(b,
a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'\x3cspan class\x3d"by_opening_hours_item"\x3e'+b((c=null!=(c=f.open||(null!=a?a.open:a))?c:h,"function"===typeof c?c.call(g,{name:"open",hash:{},data:d}):c))+" - "+b((c=null!=(c=f.close||(null!=a?a.close:a))?c:h,"function"===typeof c?c.call(g,{name:"close",hash:{},data:d}):c))+"\x3c/span\x3e"},21:function(b,a,f,g,d){return'\x3cli class\x3d"by_dealer_info_direction"\x3e'+b.escapeExpression((f.i18n||a&&a.i18n||
f.helperMissing).call(null!=a?a:b.nullContext||{},"result.getDirections",{name:"i18n",hash:{},data:d}))+"\x3c/li\x3e"},23:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'\x3cli class\x3d"by_dealer_info_contact"\x3e\n      \x3ca href\x3d"'+b((c=null!=(c=f.requestUrl||(null!=a?a.requestUrl:a))?c:h,"function"===typeof c?c.call(g,{name:"requestUrl",hash:{},data:d}):c))+'"\x3e'+b((f.i18n||a&&a.i18n||h).call(g,"result.requestContact",{name:"i18n",
hash:{},data:d}))+"\x3c/a\x3e\n    \x3c/li\x3e"},25:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'\x3cli class\x3d"by_dealer_info_website"\x3e\n      \x3ca href\x3d"'+b((c=null!=(c=f.website||(null!=a?a.website:a))?c:h,"function"===typeof c?c.call(g,{name:"website",hash:{},data:d}):c))+'" target\x3d"_blank"\x3e'+b((f.i18n||a&&a.i18n||h).call(g,"result.viewDealerWebsite",{name:"i18n",hash:{},data:d}))+"\x3c/a\x3e\n    \x3c/li\x3e"},compiler:[7,
"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){var c,h;b=(c=null!=(c=f.addresses||(null!=a?a.addresses:a))?c:f.helperMissing,h={name:"addresses",hash:{},fn:b.program(1,d,0),inverse:b.noop,data:d},"function"===typeof c?c.call(null!=a?a:b.nullContext||{},h):c);f.addresses||(b=f.blockHelperMissing.call(a,b,h));return null!=b?b:""},useData:!0});this.JST.searchForm=g.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){return'\n  \x3cdiv class\x3d"by_dealer_search_notice"\x3e'+b.escapeExpression((f.i18n||
a&&a.i18n||f.helperMissing).call(null!=a?a:b.nullContext||{},"searchBar.label",{name:"i18n",hash:{},data:d}))+'\x3c/div\x3e\n  \x3cdiv class\x3d"by_dealer_search_term_error"\x3e\x3c/div\x3e\n  \x3cdiv class\x3d"by_dealer_search_field"\x3e\n    \x3cform action\x3d"" autocomplete\x3d"off"\x3e\n      \x3cdiv class\x3d"by_input_group"\x3e\n        \x3ci class\x3d"by_dealer_search_prepend by_dealer_icon_location"\x3e\x3c/i\x3e\n        \x3cinput type\x3d"text" name\x3d"searchterm" id\x3d"searchterm" class\x3d"by_dealer_search_input"\x3e\n        \x3cdiv class\x3d"by_dealer_search_input_label"\x3e\x3c/div\x3e\n        \x3ci class\x3d"by_dealer_search_append by_dealer_icon_close"\x3e\x3c/i\x3e\n        \x3cul class\x3d"by_dealer_search_suggestion"\x3e\x3c/ul\x3e\n      \x3c/div\x3e\n      \x3cbutton type\x3d"submit" class\x3d"by_dealer_search_submit"\x3e\x3c/button\x3e\n    \x3c/form\x3e\n  \x3c/div\x3e'},
useData:!0});this.JST.searchOptionItem_view=g.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(b,a,f,g,d){var c;g=null!=a?a:b.nullContext||{};var h=f.helperMissing;b=b.escapeExpression;return'    \x3cdiv class\x3d"by_dealer_search_option_head"\x3e'+b((c=null!=(c=f.title||(null!=a?a.title:a))?c:h,"function"===typeof c?c.call(g,{name:"title",hash:{},data:d}):c))+'\x3c/div\x3e\n    \x3cimg src\x3d"'+b((c=null!=(c=f.imagePath||(null!=a?a.imagePath:a))?c:h,"function"===typeof c?c.call(g,{name:"imagePath",
hash:{},data:d}):c))+'" alt\x3d"'+b((c=null!=(c=f.title||(null!=a?a.title:a))?c:h,"function"===typeof c?c.call(g,{name:"title",hash:{},data:d}):c))+'" /\x3e'},useData:!0});return this.JST});
define("dealerlocator/views/MainLayout",["require","marionette","../templates"],function(g){var b=g("marionette");g=g("../templates");return b.LayoutView.extend({template:g.mainLayout,el:"#by_dealer_locator",regions:{head:"#by_dealer_head",subhead:"#by_dealer_subhead",map:"#by_dealer_map",result:"#by_dealer_result",navigate:"#by_dealer_navigate",department:"#by_dealer_department"},childEvents:{render:function(a){this.$el.removeClass("by_loading")}}})});
define("dealerlocator/app","require jquery marionette ./utils handlebars handlebars.translate ./views/MainLayout".split(" "),function(g){var b=g("jquery"),a=g("marionette"),f=g("./utils"),l=g("handlebars"),d=g("handlebars.translate"),c=g("./views/MainLayout");d.setText(bm.i18n.dealerLocator);var h=new (a.Application.extend({vent:b.extend({},Backbone.Events),viewRef:{},singletonRef:{},_inlineError:{parentClass:"by_inline_error",tagName:"div",className:"by_error_message",retryClass:"by_error_retry"},
errCode:{ABORT:"ABORT",TIMEOUT:"TIMEOUT",PARSE_ERROR:"PARSE_ERROR",NOT_FOUND:"NOT_FOUND",SERVER_ERROR:"SERVER_ERROR",UNKNOWN:"UNKNOWN"},noRetry:["NOT_FOUND"],i18n:{},classPrefix:"by_dealer_page_",classPage:"",initialize:function(a){this.layout=new c;this.layout.render();this.regions=_.keys(this.layout.getRegions());this.dataConfig=this.layout.$el.data();var b=this;this.listenTo(this.vent,"app:action",function(a){a=b.classPrefix+a.replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()});b.layout.$el.removeClass(b.classPage).addClass(a);
b.classPage=a})},onBeforeStart:function(a){a&&(this.i18n=a.i18n,this.config=b.extend(!0,this.config,a.config||{}))},onRun:function(){this.layout.$el.removeClass("by_loading")},getErrorCode:function(a,b){if(b)switch(b){case "timeout":return this.errCode.TIMEOUT;case "abort":return this.errCode.ABORT;case "parsererror":return this.errCode.PARSE_ERROR}return 404===a.status?this.errCode.NOT_FOUND:500<=a.status?this.errCode.SERVER_ERROR:this.errCode.UNKNOWN},inlineError:function(a){var c=this,e=a.timeout||
this.config.errorDisplayTimeout,d=a.el,g=a.message||this.i18n.error,h=b("\x3c"+this._inlineError.tagName+"\x3e").addClass(this._inlineError.className);if(a.errCode){0<=this.noRetry.indexOf(a.errCode)&&(a.retryHandler=void 0);var l=f.constToCamelCase(a.errCode);g.hasOwnProperty(l)?g=g[l]:this.i18n.error.hasOwnProperty(l)?g=this.i18n.error[l]:(b.log("app.js","unknown i18n error key",l),g=this.i18n.error.unknown)}h.text(g);a.retryHandler?(h.addClass(this._inlineError.retryClass),h.one("click",function(){d.empty().removeClass(c._inlineError.parentClass);
a.retryHandler()})):e&&setTimeout(function(){h.fadeOut(function(){d.empty().removeClass(c._inlineError.parentClass)})},e);d.addClass(this._inlineError.parentClass).empty().append(h);return h},removeInlineError:function(a){var b=this,c=a.transition||0,e=a.el;a=e.find(this._inlineError.className);var d=function(){e.removeClass(b._inlineError.parentClass).empty()};c?a.fadeOut(d,c):d()},getView:function(a){return(a=this.layout.getRegion(a))?a.currentView:null},setLayout:function(a,b,c){c||(c={});var e=
void 0===c.unset?!0:c.unset;if("string"===typeof a&&"string"===typeof b){var d={};d[a]=b;a=d}else c=b||{};this.triggerMethod("before:layoutChange",this.layout,c);for(var f,g,h=0,l=this.regions.length;h<l;h++)if(f=this.regions[h],d=this.layout.getRegion(f),a.hasOwnProperty(f))if(g={},"string"===typeof a[f]?b=a[f]:(b=a[f].view,g=a[f].options||g),f=d.hasView()&&d.currentView.preventDestroy,this.singletonRef.hasOwnProperty(b))g=this.singletonRef[b],d.show(g,{preventDestroy:f});else if(this.viewRef.hasOwnProperty(b))g=
new this.viewRef[b](g),g.preventDestroy&&(this.singletonRef[b]=g),d.show(g,{preventDestroy:f});else throw Error("app.js: view with name '"+b+"' could not be found");else e&&d.hasView()&&d.empty(d.currentView.preventDestroy);this.triggerMethod("layoutChange",this.layout,c)},createUrl:function(a,b){var c=[],e;for(e in a)if(a.hasOwnProperty(e)){var d=a[e],f="/";_.isObject(d)&&(f=d.delimiter||f,d=d.value);var g=e;""!==d&&(g+=f+this.encodeUrl(d,b));c.push(g)}return this.config.appBase+c.join("/")},encodeUrl:function(a,
b){b||(b={});return encodeURIComponent(b.allowControls?a:a.replace(/\s+/g,"-"))},changeUrl:function(a,b){b||(b={});var c=this.appState.getState()||{},e="",d;for(d in a)a.hasOwnProperty(d)&&null!==a[d]&&"undefined"!==typeof a[d]&&(e+="/"+d,""!==a[d]&&(e+="/"+this.encodeUrl(a[d],b)));if(!("partner"in a)){a=["defaultTypes","types"];for(var f in c)-1<a.indexOf(f)||c.hasOwnProperty(f)&&"undefined"!==typeof c[f]&&(e+="/"+f+"-"+c[f])}Backbone.history.navigate(e,b)},config:{defaultCoordSystem:"wgs84",staticMap:{defaultPins:{pin:"color:black|label:B|",
pinOrigin:"color:red|label:A|",pinDestination:"color:black|label:Z|"},defaultConfig:{width:600,height:300,markerStyle:{color:"black",label:"B"},pathStyle:{color:"0x0000ff",weight:5,opacity:.5},scale:1}}}}));l.registerHelper("config",function(a,b){return h.config.hasOwnProperty(a)?h.config[a]:""});l.registerHelper("encode",function(a,b){return h.encodeUrl(a)});return h});
define("dealerlocator/routers/AppRouter",["require","jquery","../app","marionette"],function(g){var b=g("jquery"),a=g("../app"),f=g("marionette");return f.AppRouter.extend({constructor:function(a){var b=Array.prototype.slice.call(arguments);f.AppRouter.apply(this,b);this.on("route",this.onRoute,this);this.on("beforeroute",this.onBeforeRoute,this)},appRoutes:{"global(/type-:type)":"globalMenu","region/:region(/type-:type)":"regionMenu","country/:country(/type-:type)":"searchByCountry","search/:term(/type-:type)":"searchByTerm",
"partner/:dealer":"dealerDetails","search\x3d:term(/type\x3d:type)":"searchByTerm","dealer\x3d:id(/type\x3d:type)":"dealerDetails",locator:"globalMenu","country\x3d:id(/type\x3d:type)":"searchByCountry","*invalid":"defaultRoute","":"defaultRoute"},onRoute:function(){},route:function(a,b,c){return f.AppRouter.prototype.route.call(this,a,b,function(){this.trigger.apply(this,["beforeroute:"+b].concat(_.toArray(arguments)));this.trigger.apply(this,["beforeroute",b,_.toArray(arguments)]);c.apply(this,
arguments)})},onBeforeRoute:function(f,d){b.log("onBeforeRoute",f,d);"defaultRoute"!==f&&(f="globalMenu"===f?d[0]:d[1])&&(a.appState.set("type",f),a.appState.set("types",f.split(",").sort()))}})});
define("dealerlocator/services/MapMarkerStub",["jquery","./"+bm.config.dealerLocator.mapService+"/MapMarker"],function(g,b){function a(a){this.lat=a.position.lat;this.lng=a.position.lng;this.bounds=a.bounds;this.options=a;this.options.clickable="boolean"===typeof a.clickable?a.clickable:!0;this.options.draggable="boolean"===typeof a.draggable?a.draggable:!1;this.infoWindow=this.marker=null;this.init();if(null===this.marker)throw Error("MapMarkerStub: error in init, marker not created");}a.prototype=
{hasBounds:function(){return!!this.bounds},boundsContains:function(a){return!1},closeInfoWindow:function(){},init:function(){},setAnimation:function(a){},setTitle:function(a){this.marker.setTitle(a)},setIcon:function(a){},getIcon:function(){return null},getMarker:function(){return this.marker},addEventListener:function(a,b){},setVisible:function(a){},setMap:function(a){},getPosition:function(){return{lat:this.lat,lng:this.lng}},computeDistanceTo:function(a){var b=(a.lat-this.lat)*Math.PI/180,d=(a.lng-
this.lng)*Math.PI/180;a=Math.sin(b/2)*Math.sin(b/2)+Math.cos(this.lat*Math.PI/180)*Math.cos(a.lat*Math.PI/180)*Math.sin(d/2)*Math.sin(d/2);return Math.round(12742E3*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}};g.extend(a.prototype,b);return a});
define("dealerlocator/services/GeocoderStub",["jquery","./"+bm.config.dealerLocator.mapService+"/Geocoder"],function(g,b){function a(){this.init()}a.prototype={STATUS_OK:1,STATUS_ERROR:0,init:function(){},getLocation:function(a,b){g.log("GeocoderService.getLocation not implemented yet!");a=g.Deferred();a.reject("GeocoderService.getLocation not implemented yet!");return a.promise()},getLatLng:function(a){g.log("GeocoderService.getLatLng not implemented yet!");a=g.Deferred();a.reject("GeocoderService.getLatLng not implemented yet!");
return a.promise()}};g.extend(a.prototype,b);return new a});
define("dealerlocator/AppActions","require jquery ./app marionette ./services/MapMarkerStub ./services/GeocoderStub".split(" "),function(g){var b=g("jquery"),a=g("./app"),f=g("marionette"),l=g("./services/MapMarkerStub"),d=g("./services/GeocoderStub");return f.Object.extend({_termCache:{},initialize:function(){this.on("action",function(b){var c=Array.prototype.slice.call(arguments);a.vent.trigger.apply(a.vent,["app:action:"+b.toLowerCase()].concat(c.slice(1)));a.vent.trigger.apply(a.vent,["app:action"].concat(c))});
this.listenTo(a.vent,"regionmenu:forwards regionmenu:backwards",function(b,d){b?a.changeUrl({region:b||""},{allowControls:!0}):a.changeUrl({global:""})});this.listenTo(a.vent,"regionmenu:select",function(b,d){a.changeUrl({country:b+"-"+d});this.searchByCountryId(b)});this.listenTo(a.vent,"positionbyterm:done",function(b){a.module("dealerDataManager").findNearestMarkers(b)});this.listenTo(a.vent,"resultheaditem:clicked",function(b){if(1<b.region.amountCountries)a.changeUrl({region:b.region.id||""},
{allowControls:!0}),this.regionMenu(b.region.id);else this.onGlobalMenu()});this.listenTo(a.vent,"resultitem:clicked",function(a){this.onDealerDetails(a.attributes)});this.listenTo(a.vent,"resultitem:getdirection",function(a){this.onDealerDetails(a.attributes,{getdirection:!0})});this.listenTo(a.vent,"resultinfo:filter:change",function(b){var c=Backbone.history.fragment;if(c){var e=c.match("/type-([^/]+)");e?c=b!==a.config.filterDefault?c.replace(e[1],b):c.replace(e[0],""):b!==a.config.filterDefault&&
(c=c+"/type-"+b);Backbone.history.navigate(c)}});this.listenTo(a.vent,"search:bydealer:notfound department:fail:notfound",function(){this.globalMenu();a.inlineError({el:a.getView("head").ui.error,message:a.i18n.error.departmentNotFound})});this.listenTo(a.vent,"url:invalid",function(){this.globalMenu();a.inlineError({el:a.getView("head").ui.error,message:a.i18n.error.invalidUrl})})},defaultRoute:function(){var b=!1;a.config.userCountryCode&&(b=a.module("dealerDataManager").getCountryById(a.config.userCountryCode));
b?(a.changeUrl({country:b.id+"-"+b.name},{replace:!0}),this.searchByCountryId(b.id)):this.globalMenu()},onGlobalMenu:function(){a.changeUrl({global:""});this.globalMenu()},globalMenu:function(a){b.log("AppRouter:globalMenu");this.regionMenu(null,a)},regionMenu:function(b,d){a.setLayout({head:"SearchFormView",subhead:"ResultInfoView",map:"MapView",result:{view:"RegionMenuView",options:{region:b}}});this.trigger("action","globalMenu",b)},onSearchByTerm:function(c){b.log("AppActions.onSearchByTerm",
c);a.changeUrl({search:c},{allowControls:!0});this.searchByTerm(c)},searchByTerm:function(c){b.log("AppRouter:searchByTerm",c);a.setLayout({head:"SearchFormView",subhead:"ResultInfoView",map:"MapView",result:"ResultView"});this.trigger("action","searchByTerm",c);this.findPositionByTerm(c)},findPositionByTerm:function(c){b.log("findSearchTerm",c);a.vent.trigger("positionbyterm:begin",c);if(""===c)b.log("empty term submitted");else{var f=/(-?\d+.\d+),(-?\d+.\d+)/.exec(c);if(null!==f)f=new l({position:{lat:f[1],
lng:f[2]},title:c}),a.vent.trigger("positionbyterm:done",{term:c,marker:f,isCurrentPosition:!0});else if(this._termCache[c])a.vent.trigger("positionbyterm:done",{term:c,marker:this._termCache[c]});else{var e=this;b.when(d.getLatLng(c)).done(function(d,f){d=new l({position:d,title:c,bounds:f});d.setAnimation("drop");e._termCache[c]=d;b.log("searchterm:submitted",{term:c,marker:d});a.vent.trigger("positionbyterm:done",{term:c,marker:d})}).fail(function(c){b.log("SearchFormView.findSearchTerm [fail], status:",
c);a.vent.trigger("positionbyterm:error",{code:"geocoder."+bm.config.dealerLocator.mapService,status:c})})}}},searchByCountry:function(c){b.log("AppRouter:searchByCountry");(c=c.match(/(\w{2})-([^\/]*)/i))?this.searchByCountryId(c[1]):(b.log("AppActions","invalid country path: could not match country id"),a.vent.trigger("url:invalid"))},searchByCountryId:function(c){var d=a.module("dealerDataManager").getCountryById(c);a.setLayout({head:"SearchFormView",subhead:"ResultInfoView",map:"MapView",result:{view:"ResultView",
options:{country:d}}});d?(this.trigger("action","searchByCountryId",d),a.module("dealerDataManager").findMarkersByCountryId(c)):(b.log("could not find country code '"+c+"'"),this.globalMenu())},onDealerDetails:function(c,d){var e=c.dealerName,f=c.dealerId;c=c.id;f&&c?(a.changeUrl({partner:c+"-"+e}),this.departmentDetails(c,d)):f?(a.changeUrl({partner:f+"-"+e}),this.showDealer(f,d)):(b.log("AppActions","invalid dealer path: could not match dealer id"),a.vent.trigger("url:invalid"))},dealerDetails:function(c){b.log("AppRouter:searchByPartner",
c);(c=c.match(/(\d+)-([^\d]+)/i))?(c=a.module("dealerDataManager").analyzeId(c[1],c[2]),c.isDepartment?this.departmentDetails(c.id):c.isDealer?this.showDealer(c.id):(b.log("AppActions","invalid dealer path: could not match dealer id",c),a.vent.trigger("search:bydealer:notfound",c.id))):(b.log("AppActions","invalid dealer path: could not match regex"),a.vent.trigger("url:invalid"))},showDealer:function(c,d){var e=a.mapMarkers.where({dealerId:c});1===e.length?(c=e[0].get("id"),a.changeUrl({partner:c+
"-"+e[0].get("dealerName")},{replace:!0}),this.departmentDetails(c,d)):(b.log("AppRouter.showDealer",c),a.setLayout({head:"SearchFormView",subhead:"ResultInfoView",map:"MapView",result:"ResultView"}),0<e.length?(this.trigger("action","showDealer",c,e[0].get("dealerName")),a.vent.trigger("search:bydealer:completed",{id:c,dealerName:e[0].get("dealerName")},e)):(b.log("AppActions","could not find dealer with id ",c),a.vent.trigger("search:bydealer:notfound",c)))},departmentDetails:function(c,d){b.log("AppRouter.departmentDetails",
c,d);var e=a.mapMarkers.findWhere({id:c});a.setLayout({head:"DetailsHeadView",subhead:{view:"DirectionView",options:{destination:e,autoStart:d&&d.getdirection}},map:"MapView",department:"DetailsDepartmentView"});e?(b("html, body").animate({scrollTop:a.layout.$el.offset().top},300),a.vent.trigger("marker:zoomin",e),this.trigger("action","departmentDetails",c,e.get("dealerName"),d),e.get("details")?a.vent.trigger("department:completed",e.get("details")):a.module("dealerDataManager").fetchDepartments(e).done(function(b){0===
b.length?a.vent.trigger("department:fail:notfound",c):a.vent.trigger("department:completed",b[0])}).fail(function(b){a.vent.trigger("department:fail",b)})):(a.vent.trigger("department:fail:notfound",c),b.log("AppActions","could not find department with id ",c))}})});
!function(){var g=function(b){var a=new g.Index;return a.pipeline.add(g.trimmer,g.stopWordFilter,g.stemmer),b&&b.call(a,a),a};g.version="0.5.7";g.utils={};g.utils.warn=function(b){return function(a){b.console&&console.warn&&console.warn(a)}}(this);g.EventEmitter=function(){this.events={}};g.EventEmitter.prototype.addListener=function(){var b=Array.prototype.slice.call(arguments),a=b.pop();if("function"!=typeof a)throw new TypeError("last argument must be a function");b.forEach(function(b){this.hasHandler(b)||
(this.events[b]=[]);this.events[b].push(a)},this)};g.EventEmitter.prototype.removeListener=function(b,a){this.hasHandler(b)&&(a=this.events[b].indexOf(a),this.events[b].splice(a,1),this.events[b].length||delete this.events[b])};g.EventEmitter.prototype.emit=function(b){if(this.hasHandler(b)){var a=Array.prototype.slice.call(arguments,1);this.events[b].forEach(function(b){b.apply(void 0,a)})}};g.EventEmitter.prototype.hasHandler=function(b){return b in this.events};g.tokenizer=function(b){if(!arguments.length||
null==b||void 0==b)return[];if(Array.isArray(b))return b.map(function(a){return a.toLowerCase()});for(var a=b.toString().replace(/^\s+/,""),f=a.length-1;0<=f;f--)if(/\S/.test(a.charAt(f))){a=a.substring(0,f+1);break}return a.split(/(?:\s+|\-)/).filter(function(a){return!!a}).map(function(a){return a.toLowerCase()})};g.Pipeline=function(){this._stack=[]};g.Pipeline.registeredFunctions={};g.Pipeline.registerFunction=function(b,a){a in this.registeredFunctions&&g.utils.warn("Overwriting existing registered function: "+
a);b.label=a;g.Pipeline.registeredFunctions[b.label]=b};g.Pipeline.warnIfFunctionNotRegistered=function(b){b.label&&b.label in this.registeredFunctions||g.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",b)};g.Pipeline.load=function(b){var a=new g.Pipeline;return b.forEach(function(b){var f=g.Pipeline.registeredFunctions[b];if(!f)throw Error("Cannot load un-registered function: "+b);a.add(f)}),a};g.Pipeline.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(b){g.Pipeline.warnIfFunctionNotRegistered(b);
this._stack.push(b)},this)};g.Pipeline.prototype.after=function(b,a){g.Pipeline.warnIfFunctionNotRegistered(a);b=this._stack.indexOf(b)+1;this._stack.splice(b,0,a)};g.Pipeline.prototype.before=function(b,a){g.Pipeline.warnIfFunctionNotRegistered(a);b=this._stack.indexOf(b);this._stack.splice(b,0,a)};g.Pipeline.prototype.remove=function(b){b=this._stack.indexOf(b);this._stack.splice(b,1)};g.Pipeline.prototype.run=function(b){for(var a=[],f=b.length,g=this._stack.length,d=0;f>d;d++){for(var c=b[d],
h=0;g>h&&(c=this._stack[h](c,d,b),void 0!==c);h++);void 0!==c&&a.push(c)}return a};g.Pipeline.prototype.reset=function(){this._stack=[]};g.Pipeline.prototype.toJSON=function(){return this._stack.map(function(b){return g.Pipeline.warnIfFunctionNotRegistered(b),b.label})};g.Vector=function(){this._magnitude=null;this.list=void 0;this.length=0};g.Vector.Node=function(b,a,f){this.idx=b;this.val=a;this.next=f};g.Vector.prototype.insert=function(b,a){var f=this.list;if(!f)return this.list=new g.Vector.Node(b,
a,f),this.length++;var l=f;for(f=f.next;void 0!=f&&!(b<f.idx);)l=f,f=f.next;return l.next=new g.Vector.Node(b,a,f),this.length++};g.Vector.prototype.magnitude=function(){if(this._magniture)return this._magnitude;for(var b,a=this.list,f=0;a;)b=a.val,f+=b*b,a=a.next;return this._magnitude=Math.sqrt(f)};g.Vector.prototype.dot=function(b){var a=this.list;b=b.list;for(var f=0;a&&b;)a.idx<b.idx?a=a.next:a.idx>b.idx?b=b.next:(f+=a.val*b.val,a=a.next,b=b.next);return f};g.Vector.prototype.similarity=function(b){return this.dot(b)/
(this.magnitude()*b.magnitude())};g.SortedSet=function(){this.length=0;this.elements=[]};g.SortedSet.load=function(b){var a=new this;return a.elements=b,a.length=b.length,a};g.SortedSet.prototype.add=function(){Array.prototype.slice.call(arguments).forEach(function(b){~this.indexOf(b)||this.elements.splice(this.locationFor(b),0,b)},this);this.length=this.elements.length};g.SortedSet.prototype.toArray=function(){return this.elements.slice()};g.SortedSet.prototype.map=function(b,a){return this.elements.map(b,
a)};g.SortedSet.prototype.forEach=function(b,a){return this.elements.forEach(b,a)};g.SortedSet.prototype.indexOf=function(b,a,f){a=a||0;f=f||this.elements.length;var g=f-a,d=a+Math.floor(g/2),c=this.elements[d];return 1>=g?c===b?d:-1:b>c?this.indexOf(b,d,f):c>b?this.indexOf(b,a,d):c===b?d:void 0};g.SortedSet.prototype.locationFor=function(b,a,f){a=a||0;f=f||this.elements.length;var g=f-a,d=a+Math.floor(g/2),c=this.elements[d];if(1>=g){if(c>b)return d;if(b>c)return d+1}return b>c?this.locationFor(b,
d,f):c>b?this.locationFor(b,a,d):void 0};g.SortedSet.prototype.intersect=function(b){var a=new g.SortedSet,f=0,l=0,d=this.length,c=b.length,h=this.elements;for(b=b.elements;!(f>d-1||l>c-1);)h[f]!==b[l]?h[f]<b[l]?f++:h[f]>b[l]&&l++:(a.add(h[f]),f++,l++);return a};g.SortedSet.prototype.clone=function(){var b=new g.SortedSet;return b.elements=this.toArray(),b.length=b.elements.length,b};g.SortedSet.prototype.union=function(b){var a,f,g;return this.length>=b.length?(a=this,f=b):(a=b,f=this),g=a.clone(),
g.add.apply(g,f.toArray()),g};g.SortedSet.prototype.toJSON=function(){return this.toArray()};g.Index=function(){this._fields=[];this._ref="id";this.pipeline=new g.Pipeline;this.documentStore=new g.Store;this.tokenStore=new g.TokenStore;this.corpusTokens=new g.SortedSet;this.eventEmitter=new g.EventEmitter;this._idfCache={};this.on("add","remove","update",function(){this._idfCache={}}.bind(this))};g.Index.prototype.on=function(){var b=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,
b)};g.Index.prototype.off=function(b,a){return this.eventEmitter.removeListener(b,a)};g.Index.load=function(b){b.version!==g.version&&g.utils.warn("version mismatch: current "+g.version+" importing "+b.version);var a=new this;return a._fields=b.fields,a._ref=b.ref,a.documentStore=g.Store.load(b.documentStore),a.tokenStore=g.TokenStore.load(b.tokenStore),a.corpusTokens=g.SortedSet.load(b.corpusTokens),a.pipeline=g.Pipeline.load(b.pipeline),a};g.Index.prototype.field=function(b,a){a=a||{};return this._fields.push({name:b,
boost:a.boost||1}),this};g.Index.prototype.ref=function(b){return this._ref=b,this};g.Index.prototype.add=function(b,a){var f={},l=new g.SortedSet,d=b[this._ref];a=void 0===a?!0:a;this._fields.forEach(function(a){var c=this.pipeline.run(g.tokenizer(b[a.name]));f[a.name]=c;g.SortedSet.prototype.add.apply(l,c)},this);this.documentStore.set(d,l);g.SortedSet.prototype.add.apply(this.corpusTokens,l.toArray());for(var c=0;c<l.length;c++){var h=l.elements[c],e=this._fields.reduce(function(a,b){var c=f[b.name].length;
if(!c)return a;var e=f[b.name].filter(function(a){return a===h}).length;return a+e/c*b.boost},0);this.tokenStore.add(h,{ref:d,tf:e})}a&&this.eventEmitter.emit("add",b,this)};g.Index.prototype.remove=function(b,a){var f=b[this._ref];a=void 0===a?!0:a;if(this.documentStore.has(f)){var g=this.documentStore.get(f);this.documentStore.remove(f);g.forEach(function(a){this.tokenStore.remove(a,f)},this);a&&this.eventEmitter.emit("remove",b,this)}};g.Index.prototype.update=function(b,a){a=void 0===a?!0:a;this.remove(b,
!1);this.add(b,!1);a&&this.eventEmitter.emit("update",b,this)};g.Index.prototype.idf=function(b){var a="@"+b;if(Object.prototype.hasOwnProperty.call(this._idfCache,a))return this._idfCache[a];b=this.tokenStore.count(b);var f=1;return 0<b&&(f=1+Math.log(this.tokenStore.length/b)),this._idfCache[a]=f};g.Index.prototype.search=function(b){b=this.pipeline.run(g.tokenizer(b));var a=new g.Vector,f=[],l=this._fields.reduce(function(a,b){return a+b.boost},0);if(!b.some(function(a){return this.tokenStore.has(a)},
this))return[];b.forEach(function(b,c,h){var e=1/h.length*this._fields.length*l,d=this;c=this.tokenStore.expand(b).reduce(function(c,f){var h=d.corpusTokens.indexOf(f),l=d.idf(f),m=1,n=new g.SortedSet;f!==b&&(m=1/Math.log(Math.max(3,f.length-b.length)));return-1<h&&a.insert(h,e*l*m),Object.keys(d.tokenStore.get(f)).forEach(function(a){n.add(a)}),c.union(n)},new g.SortedSet);f.push(c)},this);return f.reduce(function(a,b){return a.intersect(b)}).map(function(b){return{ref:b,score:a.similarity(this.documentVector(b))}},
this).sort(function(a,b){return b.score-a.score})};g.Index.prototype.documentVector=function(b){for(var a=this.documentStore.get(b),f=a.length,l=new g.Vector,d=0;f>d;d++){var c=a.elements[d],h=this.tokenStore.get(c)[b].tf,e=this.idf(c);l.insert(this.corpusTokens.indexOf(c),h*e)}return l};g.Index.prototype.toJSON=function(){return{version:g.version,fields:this._fields,ref:this._ref,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),
pipeline:this.pipeline.toJSON()}};g.Index.prototype.use=function(b){var a=Array.prototype.slice.call(arguments,1);a.unshift(this);b.apply(this,a)};g.Store=function(){this.store={};this.length=0};g.Store.load=function(b){var a=new this;return a.length=b.length,a.store=Object.keys(b.store).reduce(function(a,l){return a[l]=g.SortedSet.load(b.store[l]),a},{}),a};g.Store.prototype.set=function(b,a){this.has(b)||this.length++;this.store[b]=a};g.Store.prototype.get=function(b){return this.store[b]};g.Store.prototype.has=
function(b){return b in this.store};g.Store.prototype.remove=function(b){this.has(b)&&(delete this.store[b],this.length--)};g.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}};g.stemmer=function(){var b={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},a={icate:"ic",ative:"",
alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},f=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,d=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$/,c=/^([^aeiou][^aeiouy]*)?[aeiouy]/,h=/^(.+?)(ss|i)es$/,e=/^(.+?)([^s])s$/,m=/^(.+?)eed$/,n=/^(.+?)(ed|ing)$/,p=/.$/,r=/(at|bl|iz)$/,w=/([^aeiouylsz])\1$/,v=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,z=/^(.+?[^aeiou])y$/,
C=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,k=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,y=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,x=/^(.+?)(s|t)(ion)$/,G=/^(.+?)e$/,J=/ll$/,H=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/;return function(l){var u,t,q,E;if(3>l.length)return l;if(t=l.substr(0,1),"y"==t&&(l=t.toUpperCase()+l.substr(1)),q=h,u=e,q.test(l)?l=l.replace(q,
"$1$2"):u.test(l)&&(l=l.replace(u,"$1$2")),q=m,u=n,q.test(l)){var B=q.exec(l);q=f;q.test(B[1])&&(q=p,l=l.replace(q,""))}else if(u.test(l)){B=u.exec(l);var A=B[1];u=c;u.test(A)&&(l=A,u=r,E=w,u.test(l)?l+="e":E.test(l)?(q=p,l=l.replace(q,"")):v.test(l)&&(l+="e"))}if(q=z,q.test(l))B=q.exec(l),A=B[1],l=A+"i";if(q=C,q.test(l))B=q.exec(l),A=B[1],u=B[2],q=f,q.test(A)&&(l=A+b[u]);if(q=k,q.test(l))B=q.exec(l),A=B[1],u=B[2],q=f,q.test(A)&&(l=A+a[u]);(q=y,u=x,q.test(l))?(B=q.exec(l),A=B[1],q=g,q.test(A)&&(l=
A)):u.test(l)&&(B=u.exec(l),A=B[1]+B[2],u=g,u.test(A)&&(l=A));if(q=G,q.test(l))B=q.exec(l),A=B[1],q=g,u=d,E=H,(q.test(A)||u.test(A)&&!E.test(A))&&(l=A);return q=J,u=g,q.test(l)&&u.test(l)&&(q=p,l=l.replace(q,"")),"y"==t&&(l=t.toLowerCase()+l.substr(1)),l}}();g.Pipeline.registerFunction(g.stemmer,"stemmer");g.stopWordFilter=function(b){return-1===g.stopWordFilter.stopWords.indexOf(b)?b:void 0};g.stopWordFilter.stopWords=new g.SortedSet;g.stopWordFilter.stopWords.length=119;g.stopWordFilter.stopWords.elements=
" a able about across after all almost also am among an and any are as at be because been but by can cannot could dear did do does either else ever every for from get got had has have he her hers him his how however i if in into is it its just least let like likely may me might most must my neither no nor not of off often on only or other our own rather said say says she should since so some than that the their them then there these they this tis to too twas us wants was we were what when where which while who whom why will with would yet you your".split(" ");
g.Pipeline.registerFunction(g.stopWordFilter,"stopWordFilter");g.trimmer=function(b){return b.replace(/^\W+/,"").replace(/\W+$/,"")};g.Pipeline.registerFunction(g.trimmer,"trimmer");g.TokenStore=function(){this.root={docs:{}};this.length=0};g.TokenStore.load=function(b){var a=new this;return a.root=b.root,a.length=b.length,a};g.TokenStore.prototype.add=function(b,a,f){f=f||this.root;var g=b[0];b=b.slice(1);return g in f||(f[g]={docs:{}}),0===b.length?(f[g].docs[a.ref]=a,void(this.length+=1)):this.add(b,
a,f[g])};g.TokenStore.prototype.has=function(b){if(!b)return!1;for(var a=this.root,f=0;f<b.length;f++){if(!a[b[f]])return!1;a=a[b[f]]}return!0};g.TokenStore.prototype.getNode=function(b){if(!b)return{};for(var a=this.root,f=0;f<b.length;f++){if(!a[b[f]])return{};a=a[b[f]]}return a};g.TokenStore.prototype.get=function(b,a){return this.getNode(b,a).docs||{}};g.TokenStore.prototype.count=function(b,a){return Object.keys(this.get(b,a)).length};g.TokenStore.prototype.remove=function(b,a){if(b){for(var f=
this.root,g=0;g<b.length;g++){if(!(b[g]in f))return;f=f[b[g]]}delete f.docs[a]}};g.TokenStore.prototype.expand=function(b,a){var f=this.getNode(b),g=f.docs||{};a=a||[];return Object.keys(g).length&&a.push(b),Object.keys(f).forEach(function(d){"docs"!==d&&a.concat(this.expand(b+d,a))},this),a};g.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}};(function(b,a){"function"==typeof define&&define.amd?define("lunr",a):"object"==typeof exports?module.exports=a():b.lunr=a()})(this,
function(){return g})}();
define("dealerlocator/models/Marker","require jquery backbone ../app ../services/MapMarkerStub ../services/MapUtilsStub".split(" "),function(g){var b=g("jquery"),a=g("backbone"),f=g("../app"),l=g("../services/MapMarkerStub"),d=g("../services/MapUtilsStub");return a.Model.extend({defaults:{id:null,dealerName:"Bentley Bethesda",live:!0,dealerId:"1337",lat:52.474,lng:-1.868,url:"../dummy/json/department_data.json",country:"",region:"",types:[],details:null},_defaultIcon:void 0,_unselectIcon:void 0,initialize:function(){_.bindAll(this,
"selected","distanceTo");var a={},b=[];_.each(this.get("types"),function(c){a.hasOwnProperty(c)||(a[c]=c,b.push({title:bm.i18n.dealerLocator.filterOptions[c]}))});this.set("types",b);this.set("_types",a);this._defaultIcon=d.createIcon(f.config.inlineMap.icons.pin);this._unselectIcon=d.createIcon(f.config.inlineMap.icons.pinUnselected);var e=new l({title:this.get("dealerName"),position:{lat:this.get("lat"),lng:this.get("lng")},icon:this._defaultIcon});e.addEventListener("click",this.selected);this.set("latlng",
e.getPosition());this.set("gmarker",e);this.on("change:distance",function(a,b){var c=bm.i18n.dealerLocator.unitConversion||1;b?a.attributes.convertedDistance=(b*c).toFixed(2):delete a.attributes.convertedDistance})},addType:function(a){if(_.isString(a))this.attributes._types.hasOwnProperty(a)||(this.attributes._types[a]=a,this.attributes.types.push({title:bm.i18n.dealerLocator.filterOptions[a]}));else for(var b in a)a.hasOwnProperty(b)&&this.addType(a[b])},selected:function(){b.log("Marker.selected",
this);f.vent.trigger("marker:selected",this)},selectIcon:function(){this.get("gmarker").setIcon(this._defaultIcon)},unselectIcon:function(){this.get("gmarker").setIcon(this._unselectIcon)},distanceTo:function(a){return this.get("gmarker").computeDistanceTo(a)/1E3},hasAtLeastOneType:function(a){return a?!!_.find(a,function(a){return this.attributes._types.hasOwnProperty(a)},this):!0}})});
define("dealerlocator/countries",["require"],function(g){g=[{id:"1",long_name:"Afghanistan",short_name:"AF",center_lat:"33.939110",center_lng:"67.709953",sw_lat:"29.377200",sw_lng:"60.517000",ne_lat:"38.490877",ne_lng:"74.889862"},{id:"2",long_name:"Albania",short_name:"AL",center_lat:"41.153332",center_lng:"20.168331",sw_lat:"39.644730",sw_lng:"19.263904",ne_lat:"42.661082",ne_lng:"21.057239"},{id:"3",long_name:"Algeria",short_name:"DZ",center_lat:"28.033886",center_lng:"1.659626",sw_lat:"18.968147",
sw_lng:"-8.666667",ne_lat:"37.089821",ne_lng:"12.000000"},{id:"4",long_name:"Andorra",short_name:"AD",center_lat:"42.506285",center_lng:"1.521801",sw_lat:"42.428749",sw_lng:"1.408705",ne_lat:"42.655791",ne_lng:"1.786639"},{id:"5",long_name:"Angola",short_name:"AO",center_lat:"-11.202692",center_lng:"17.873887",sw_lat:"-18.039104",sw_lng:"11.669562",ne_lat:"-4.387944",ne_lng:"24.084444"},{id:"6",long_name:"Antigua",short_name:"Antigua",center_lat:"17.074656",center_lng:"-61.817521",sw_lat:"16.997626",
sw_lng:"-61.906251",ne_lat:"17.173760",ne_lng:"-61.673155"},{id:"7",long_name:"Argentina",short_name:"AR",center_lat:"-38.416097",center_lng:"-63.616672",sw_lat:"-55.057715",sw_lng:"-73.560360",ne_lat:"-21.780814",ne_lng:"-53.637481"},{id:"8",long_name:"Armenia",short_name:"AM",center_lat:"40.069099",center_lng:"45.038189",sw_lat:"38.840244",sw_lng:"43.447212",ne_lat:"41.300993",ne_lng:"46.634222"},{id:"9",long_name:"Australia",short_name:"AU",center_lat:"-25.274398",center_lng:"133.775136",sw_lat:"-44.2160369651",
sw_lng:"112.921454",ne_lat:"-9.221084",ne_lng:"159.255528"},{id:"10",long_name:"Austria",short_name:"AT",center_lat:"47.516231",center_lng:"14.550072",sw_lat:"46.372336",sw_lng:"9.530783",ne_lat:"49.020608",ne_lng:"17.160686"},{id:"11",long_name:"Azerbaijan",short_name:"AZ",center_lat:"40.143105",center_lng:"47.576927",sw_lat:"38.391990",sw_lng:"44.764683",ne_lat:"41.912340",ne_lng:"50.467866"},{id:"12",long_name:"The Bahamas",short_name:"BS",center_lat:"25.034280",center_lng:"-77.396280",sw_lat:"20.912131",
sw_lng:"-80.474947",ne_lat:"27.263362",ne_lng:"-72.712069"},{id:"13",long_name:"Bahrain",short_name:"BH",center_lat:"26.066700",center_lng:"50.557700",sw_lat:"25.556458",sw_lng:"50.378151",ne_lat:"26.330394",ne_lng:"50.824846"},{id:"14",long_name:"Bangladesh",short_name:"BD",center_lat:"23.684994",center_lng:"90.356331",sw_lat:"20.754380",sw_lng:"88.008589",ne_lat:"26.634243",ne_lng:"92.680115"},{id:"15",long_name:"Barbados",short_name:"BB",center_lat:"13.193887",center_lng:"-59.543198",sw_lat:"13.045000",
sw_lng:"-59.651030",ne_lat:"13.335126",ne_lng:"-59.420098"},{id:"16",long_name:"Belarus",short_name:"BY",center_lat:"53.709807",center_lng:"27.953389",sw_lat:"51.262011",sw_lng:"23.178338",ne_lat:"56.171872",ne_lng:"32.776820"},{id:"17",long_name:"Belgium",short_name:"BE",center_lat:"50.503887",center_lng:"4.469936",sw_lat:"49.497013",sw_lng:"2.544795",ne_lat:"51.505145",ne_lng:"6.408124"},{id:"18",long_name:"Belize",short_name:"BZ",center_lat:"17.189877",center_lng:"-88.497650",sw_lat:"15.885619",
sw_lng:"-89.227588",ne_lat:"18.495942",ne_lng:"-87.491727"},{id:"19",long_name:"Benin",short_name:"BJ",center_lat:"9.307690",center_lng:"2.315834",sw_lat:"6.234832",sw_lng:"0.776667",ne_lat:"12.408611",ne_lng:"3.843343"},{id:"20",long_name:"Bhutan",short_name:"BT",center_lat:"27.514162",center_lng:"90.433601",sw_lat:"26.702016",sw_lng:"88.746473",ne_lat:"28.360825",ne_lng:"92.125232"},{id:"21",long_name:"Bolivia",short_name:"BO",center_lat:"-16.290154",center_lng:"-63.588653",sw_lat:"-22.898090",
sw_lng:"-69.644990",ne_lat:"-9.669323",ne_lng:"-57.453803"},{id:"22",long_name:"Botswana",short_name:"BW",center_lat:"-22.328474",center_lng:"24.684866",sw_lat:"-26.907545",sw_lng:"19.998905",ne_lat:"-17.778137",ne_lng:"29.375304"},{id:"23",long_name:"Brazil",short_name:"BR",center_lat:"-14.235004",center_lng:"-51.925280",sw_lat:"-33.751748",sw_lng:"-73.982817",ne_lat:"5.271602",ne_lng:"-29.345024"},{id:"24",long_name:"Brunei",short_name:"BN",center_lat:"4.535277",center_lng:"114.727669",sw_lat:"4.002508",
sw_lng:"114.076063",ne_lat:"5.082646",ne_lng:"115.363562"},{id:"25",long_name:"Bulgaria",short_name:"BG",center_lat:"42.733883",center_lng:"25.485830",sw_lat:"41.235447",sw_lng:"22.357345",ne_lat:"44.215233",ne_lng:"28.609263"},{id:"26",long_name:"Burkina Faso",short_name:"BF",center_lat:"12.238333",center_lng:"-1.561593",sw_lat:"9.393889",sw_lng:"-5.521111",ne_lat:"15.085111",ne_lng:"2.404293"},{id:"27",long_name:"Burundi",short_name:"BI",center_lat:"-3.373056",center_lng:"29.918886",sw_lat:"-4.469228",
sw_lng:"29.000993",ne_lat:"-2.309987",ne_lng:"30.850173"},{id:"28",long_name:"Cambodia",short_name:"KH",center_lat:"12.565679",center_lng:"104.990963",sw_lat:"9.276808",sw_lng:"102.333542",ne_lat:"14.690179",ne_lng:"107.627687"},{id:"29",long_name:"Cameroon",short_name:"CM",center_lat:"7.369722",center_lng:"12.354722",sw_lat:"1.655900",sw_lng:"8.494763",ne_lat:"13.083335",ne_lng:"16.194408"},{id:"30",long_name:"Canada",short_name:"CA",center_lat:"56.130366",center_lng:"-106.346771",sw_lat:"41.676556",
sw_lng:"-141.001870",ne_lat:"61.2084660899",ne_lng:"-52.619409"},{id:"31",long_name:"Cape Verde",short_name:"CV",center_lat:"15.120142",center_lng:"-23.605172",sw_lat:"14.802351",sw_lng:"-25.360994",ne_lat:"17.205287",ne_lng:"-22.657778"},{id:"32",long_name:"Chad",short_name:"TD",center_lat:"15.454166",center_lng:"18.732207",sw_lat:"7.442975",sw_lng:"13.470000",ne_lat:"23.449235",ne_lng:"24.000001"},{id:"33",long_name:"Chile",short_name:"CL",center_lat:"-35.675147",center_lng:"-71.542969",sw_lat:"-55.979781",
sw_lng:"-109.454881",ne_lat:"-17.498329",ne_lng:"-66.418202"},{id:"34",long_name:"China",short_name:"CN",center_lat:"35.861660",center_lng:"104.195397",sw_lat:"18.153522",sw_lng:"73.499414",ne_lat:"53.560974",ne_lng:"134.772810"},{id:"35",long_name:"Colombia",short_name:"CO",center_lat:"4.570868",center_lng:"-74.297333",sw_lat:"-4.227110",sw_lng:"-81.735930",ne_lat:"13.397350",ne_lng:"-66.851923"},{id:"36",long_name:"Comoros",short_name:"KM",center_lat:"-11.645500",center_lng:"43.333300",sw_lat:"-12.413821",
sw_lng:"43.219421",ne_lat:"-11.364639",ne_lng:"44.540570"},{id:"37",long_name:"Congo",short_name:"CG",center_lat:"-0.228021",center_lng:"15.827659",sw_lat:"-5.028949",sw_lng:"11.149548",ne_lat:"3.707791",ne_lng:"18.643611"},{id:"38",long_name:"Costa Rica",short_name:"CR",center_lat:"9.748917",center_lng:"-83.753428",sw_lat:"5.499153",sw_lng:"-87.094513",ne_lat:"11.219681",ne_lng:"-82.552657"},{id:"39",long_name:"Croatia",short_name:"HR",center_lat:"45.100000",center_lng:"15.200000",sw_lat:"42.392265",
sw_lng:"13.489691",ne_lat:"46.555223",ne_lng:"19.448052"},{id:"40",long_name:"Cuba",short_name:"CU",center_lat:"21.521757",center_lng:"-77.781167",sw_lat:"19.825899",sw_lng:"-85.071247",ne_lat:"23.276752",ne_lng:"-74.132223"},{id:"41",long_name:"Cyprus",short_name:"CY",center_lat:"35.126413",center_lng:"33.429859",sw_lat:"34.632303",sw_lng:"32.268708",ne_lat:"35.707200",ne_lng:"34.604500"},{id:"42",long_name:"Czech Republic",short_name:"CZ",center_lat:"49.817492",center_lng:"15.472962",sw_lat:"48.551808",
sw_lng:"12.090589",ne_lat:"51.055719",ne_lng:"18.859236"},{id:"43",long_name:"Denmark",short_name:"DK",center_lat:"56.1554671",center_lng:"10.4309955",sw_lat:"54.464597",sw_lng:"8.072241",ne_lat:"57.751813",ne_lng:"15.197281"},{id:"44",long_name:"Djibouti",short_name:"DJ",center_lat:"11.825138",center_lng:"42.590275",sw_lat:"10.931944",sw_lng:"41.759722",ne_lat:"12.713396",ne_lng:"43.416973"},{id:"45",long_name:"Dominica",short_name:"DM",center_lat:"15.414999",center_lng:"-61.370976",sw_lat:"15.207682",
sw_lng:"-61.479830",ne_lat:"15.640064",ne_lng:"-61.240303"},{id:"46",long_name:"Timor-Leste",short_name:"TL",center_lat:"-8.874217",center_lng:"125.727539",sw_lat:"-9.504195",sw_lng:"124.041738",ne_lat:"-8.126807",ne_lng:"127.341635"},{id:"47",long_name:"Ecuador",short_name:"EC",center_lat:"-1.831239",center_lng:"-78.183406",sw_lat:"-5.014351",sw_lng:"-92.013048",ne_lat:"1.687211",ne_lng:"-75.188794"},{id:"48",long_name:"Egypt",short_name:"EG",center_lat:"26.820553",center_lng:"30.802498",sw_lat:"22.000000",
sw_lng:"24.696775",ne_lat:"31.671535",ne_lng:"36.894545"},{id:"49",long_name:"El Salvador",short_name:"SV",center_lat:"13.794185",center_lng:"-88.896530",sw_lat:"13.155431",sw_lng:"-90.126810",ne_lat:"14.450557",ne_lng:"-87.683752"},{id:"50",long_name:"Eritrea",short_name:"ER",center_lat:"15.179384",center_lng:"39.782334",sw_lat:"12.354723",sw_lng:"36.433348",ne_lat:"18.021210",ne_lng:"43.142977"},{id:"51",long_name:"Estonia",short_name:"EE",center_lat:"58.595272",center_lng:"25.013607",sw_lat:"57.509316",
sw_lng:"21.764313",ne_lat:"59.685685",ne_lng:"28.210139"},{id:"52",long_name:"Ethiopia",short_name:"ET",center_lat:"9.145000",center_lng:"40.489673",sw_lat:"3.404136",sw_lng:"32.997734",ne_lat:"14.894215",ne_lng:"48.000000"},{id:"53",long_name:"Fiji",short_name:"FJ",center_lat:"-17.713371",center_lng:"178.065032",sw_lat:"-20.669430",sw_lng:"176.909494",ne_lat:"-12.479535",ne_lng:"-178.230107"},{id:"54",long_name:"Finland",short_name:"FI",center_lat:"61.924110",center_lng:"25.748151",sw_lat:"59.705440",
sw_lng:"20.547411",ne_lat:"70.092293",ne_lng:"31.587100"},{id:"55",long_name:"France",short_name:"FR",center_lat:"46.227638",center_lng:"2.213749",sw_lat:"41.342328",sw_lng:"-5.141228",ne_lat:"51.089166",ne_lng:"9.560068"},{id:"56",long_name:"Gabon",short_name:"GA",center_lat:"-0.803689",center_lng:"11.609444",sw_lat:"-3.958372",sw_lng:"8.699053",ne_lat:"2.318109",ne_lng:"14.520556"},{id:"57",long_name:"The Gambia",short_name:"GM",center_lat:"13.443182",center_lng:"-15.310139",sw_lat:"13.065183",
sw_lng:"-16.813631",ne_lat:"13.826389",ne_lng:"-13.798611"},{id:"58",long_name:"Georgia",short_name:"GA",center_lat:"32.165622",center_lng:"-82.900075",sw_lat:"30.355591",sw_lng:"-85.605165",ne_lat:"35.000659",ne_lng:"-80.840787"},{id:"59",long_name:"Germany",short_name:"DE",center_lat:"51.165691",center_lng:"10.451526",sw_lat:"47.270112",sw_lng:"5.866342",ne_lat:"55.058347",ne_lng:"15.041896"},{id:"60",long_name:"Ghana",short_name:"GH",center_lat:"7.946527",center_lng:"-1.023194",sw_lat:"4.738874",
sw_lng:"-3.260786",ne_lat:"11.166668",ne_lng:"1.199363"},{id:"61",long_name:"Greece",short_name:"GR",center_lat:"39.074208",center_lng:"21.824312",sw_lat:"34.801021",sw_lng:"19.372423",ne_lat:"41.748878",ne_lng:"29.645148"},{id:"62",long_name:"Grenada",short_name:"GD",center_lat:"12.116500",center_lng:"-61.679000",sw_lat:"11.984873",sw_lng:"-61.802728",ne_lat:"12.530183",ne_lng:"-61.377997"},{id:"63",long_name:"Guatemala",short_name:"GT",center_lat:"15.783471",center_lng:"-90.230759",sw_lat:"13.740021",
sw_lng:"-92.231836",ne_lat:"17.815697",ne_lng:"-88.225615"},{id:"64",long_name:"Guinea",short_name:"GN",center_lat:"9.945587",center_lng:"-9.696645",sw_lat:"7.190909",sw_lng:"-15.078206",ne_lat:"12.674617",ne_lng:"-7.637853"},{id:"65",long_name:"Guinea-Bissau",short_name:"GW",center_lat:"11.803749",center_lng:"-15.180413",sw_lat:"10.859970",sw_lng:"-16.711736",ne_lat:"12.684723",ne_lng:"-13.627504"},{id:"66",long_name:"Guyana",short_name:"GY",center_lat:"4.860416",center_lng:"-58.930180",sw_lat:"1.164724",
sw_lng:"-61.414905",ne_lat:"8.546628",ne_lng:"-56.491120"},{id:"67",long_name:"Haiti",short_name:"HT",center_lat:"18.971187",center_lng:"-72.285215",sw_lat:"18.022078",sw_lng:"-74.480910",ne_lat:"20.089614",ne_lng:"-71.621754"},{id:"68",long_name:"Honduras",short_name:"HN",center_lat:"15.199999",center_lng:"-86.241905",sw_lat:"12.984225",sw_lng:"-89.355148",ne_lat:"17.417104",ne_lng:"-83.127534"},{id:"69",long_name:"Hungary",short_name:"HU",center_lat:"47.162494",center_lng:"19.503304",sw_lat:"45.737089",
sw_lng:"16.113387",ne_lat:"48.585234",ne_lng:"22.898122"},{id:"70",long_name:"Iceland",short_name:"IS",center_lat:"64.963051",center_lng:"-19.020835",sw_lat:"63.296102",sw_lng:"-24.546524",ne_lat:"66.566318",ne_lng:"-13.495815"},{id:"71",long_name:"India",short_name:"IN",center_lat:"20.593684",center_lng:"78.962880",sw_lat:"6.753516",sw_lng:"68.162386",ne_lat:"35.504475",ne_lng:"97.395555"},{id:"72",long_name:"Indonesia",short_name:"ID",center_lat:"-0.789275",center_lng:"113.921327",sw_lat:"-11.007436",
sw_lng:"95.009707",ne_lat:"6.076912",ne_lng:"141.019562"},{id:"73",long_name:"Iran",short_name:"IR",center_lat:"32.427908",center_lng:"53.688046",sw_lat:"25.059429",sw_lng:"44.031891",ne_lat:"39.781676",ne_lng:"63.333337"},{id:"74",long_name:"Iraq",short_name:"IQ",center_lat:"33.223191",center_lng:"43.679291",sw_lat:"29.061208",sw_lng:"38.793603",ne_lat:"37.380932",ne_lng:"48.575916"},{id:"75",long_name:"Ireland",short_name:"IE",center_lat:"53.412910",center_lng:"-8.243890",sw_lat:"51.421938",sw_lng:"-10.669580",
ne_lat:"55.388490",ne_lng:"-5.994700"},{id:"76",long_name:"Israel",short_name:"IL",center_lat:"31.046051",center_lng:"34.851612",sw_lat:"29.479700",sw_lng:"34.267387",ne_lat:"33.332805",ne_lng:"35.896244"},{id:"77",long_name:"Italy",short_name:"IT",center_lat:"41.871940",center_lng:"12.567380",sw_lat:"35.492920",sw_lng:"6.626720",ne_lat:"47.092000",ne_lng:"18.520502"},{id:"78",long_name:"Jamaica",short_name:"JM",center_lat:"18.109581",center_lng:"-77.297508",sw_lat:"17.705724",sw_lng:"-78.368846",
ne_lat:"18.525310",ne_lng:"-76.183159"},{id:"79",long_name:"Japan",short_name:"JP",center_lat:"36.204824",center_lng:"138.252924",sw_lat:"24.046045",sw_lng:"122.933830",ne_lat:"45.522772",ne_lng:"153.987430"},{id:"80",long_name:"Jordan",short_name:"JO",center_lat:"30.585164",center_lng:"36.238414",sw_lat:"29.185036",sw_lng:"34.958337",ne_lat:"33.374688",ne_lng:"39.301154"},{id:"81",long_name:"Kazakhstan",short_name:"KZ",center_lat:"48.019573",center_lng:"66.923684",sw_lat:"40.568584",sw_lng:"46.493672",
ne_lat:"55.441984",ne_lng:"87.315415"},{id:"82",long_name:"Kenya",short_name:"KE",center_lat:"-0.023559",center_lng:"37.906193",sw_lat:"-4.679682",sw_lng:"33.909821",ne_lat:"5.033421",ne_lng:"41.906832"},{id:"83",long_name:"Kiribati",short_name:"KI",center_lat:"1.870919",center_lng:"-157.362601",sw_lat:"-11.446519",sw_lng:"169.521532",ne_lat:"4.699959",ne_lng:"-150.196032"},{id:"84",long_name:"North Korea",short_name:"KP",center_lat:"40.339852",center_lng:"127.510093",sw_lat:"37.673332",sw_lng:"124.173553",
ne_lat:"43.011590",ne_lng:"130.688500"},{id:"85",long_name:"South Korea",short_name:"KR",center_lat:"35.907757",center_lng:"127.766922",sw_lat:"33.106110",sw_lng:"124.608139",ne_lat:"38.616931",ne_lng:"130.923218"},{id:"86",long_name:"Kosovo",short_name:"XK",center_lat:"42.581372",center_lng:"20.889336",sw_lat:"41.857641",sw_lng:"20.014284",ne_lat:"43.268899",ne_lng:"21.789867"},{id:"87",long_name:"Kuwait",short_name:"KW",center_lat:"29.311660",center_lng:"47.481766",sw_lat:"28.524446",sw_lng:"46.553040",
ne_lat:"30.103699",ne_lng:"48.430458"},{id:"88",long_name:"Kyrgyzstan",short_name:"KG",center_lat:"41.204380",center_lng:"74.766098",sw_lat:"39.180254",sw_lng:"69.250998",ne_lat:"43.265357",ne_lng:"80.226559"},{id:"89",long_name:"Laos",short_name:"LA",center_lat:"19.856270",center_lng:"102.495496",sw_lat:"13.909720",sw_lng:"100.083214",ne_lat:"22.502872",ne_lng:"107.694830"},{id:"90",long_name:"Latvia",short_name:"LV",center_lat:"56.879635",center_lng:"24.603189",sw_lat:"55.674777",sw_lng:"20.962343",
ne_lat:"58.085569",ne_lng:"28.241403"},{id:"91",long_name:"Lebanon",short_name:"LB",center_lat:"33.854721",center_lng:"35.862285",sw_lat:"33.055026",sw_lng:"35.103778",ne_lat:"34.692090",ne_lng:"36.623720"},{id:"92",long_name:"Lesotho",short_name:"LS",center_lat:"-29.609988",center_lng:"28.233608",sw_lat:"-30.675579",sw_lng:"27.011231",ne_lat:"-28.570801",ne_lng:"29.455709"},{id:"93",long_name:"Liberia",short_name:"LR",center_lat:"6.428055",center_lng:"-9.429499",sw_lat:"4.315414",sw_lng:"-11.474248",
ne_lat:"8.551986",ne_lng:"-7.369255"},{id:"94",long_name:"Libya",short_name:"LY",center_lat:"26.335100",center_lng:"17.228331",sw_lat:"19.500430",sw_lng:"9.391466",ne_lat:"33.166787",ne_lng:"25.146954"},{id:"95",long_name:"Liechtenstein",short_name:"LI",center_lat:"47.166000",center_lng:"9.555373",sw_lat:"47.048290",sw_lng:"9.471620",ne_lat:"47.270547",ne_lng:"9.635650"},{id:"96",long_name:"Lithuania",short_name:"LT",center_lat:"55.169438",center_lng:"23.881275",sw_lat:"53.896879",sw_lng:"20.954368",
ne_lat:"56.450321",ne_lng:"26.835591"},{id:"97",long_name:"Luxembourg",short_name:"LU",center_lat:"49.815273",center_lng:"6.129583",sw_lat:"49.447779",sw_lng:"5.735670",ne_lat:"50.182820",ne_lng:"6.530970"},{id:"98",long_name:"Madagascar",short_name:"MG",center_lat:"-18.766947",center_lng:"46.869107",sw_lat:"-25.606572",sw_lng:"43.185139",ne_lat:"-11.951964",ne_lng:"50.483780"},{id:"99",long_name:"Malawi",short_name:"MW",center_lat:"-13.254308",center_lng:"34.301525",sw_lat:"-17.135278",sw_lng:"32.678889",
ne_lat:"-9.367154",ne_lng:"35.924166"},{id:"100",long_name:"Malaysia",short_name:"MY",center_lat:"4.210484",center_lng:"101.975766",sw_lat:"0.853821",sw_lng:"99.640573",ne_lat:"7.363468",ne_lng:"119.269362"},{id:"101",long_name:"Maldives",short_name:"MV",center_lat:"1.977247",center_lng:"73.536103",sw_lat:"-0.703585",sw_lng:"72.638581",ne_lat:"7.106280",ne_lng:"73.759654"},{id:"102",long_name:"Mali",short_name:"ML",center_lat:"17.570692",center_lng:"-3.996166",sw_lat:"10.147811",sw_lng:"-12.238885",
ne_lat:"25.000012",ne_lng:"4.266667"},{id:"103",long_name:"Malta",short_name:"MT",center_lat:"35.937496",center_lng:"14.375416",sw_lat:"35.805811",sw_lng:"14.183548",ne_lat:"36.082224",ne_lng:"14.575500"},{id:"104",long_name:"Marshall Islands",short_name:"MH",center_lat:"7.131474",center_lng:"171.184478",sw_lat:"4.572956",sw_lng:"160.797959",ne_lat:"14.673255",ne_lng:"172.170181"},{id:"105",long_name:"Mauritania",short_name:"MR",center_lat:"21.007890",center_lng:"-10.940835",sw_lat:"14.721273",sw_lng:"-17.070134",
ne_lat:"27.294445",ne_lng:"-4.833334"},{id:"106",long_name:"Mauritius",short_name:"MU",center_lat:"-20.348404",center_lng:"57.552152",sw_lat:"-20.525512",sw_lng:"56.514367",ne_lat:"-10.336323",ne_lng:"63.503594"},{id:"107",long_name:"Mexico",short_name:"MX",center_lat:"23.634501",center_lng:"-102.552784",sw_lat:"14.534549",sw_lng:"-118.364430",ne_lat:"32.718763",ne_lng:"-86.710571"},{id:"108",long_name:"Micronesia",short_name:"FM",center_lat:"6.887351",center_lng:"158.215072",sw_lat:"3.822442",sw_lng:"138.054982",
ne_lat:"10.090378",ne_lng:"163.035591"},{id:"109",long_name:"Moldova",short_name:"MD",center_lat:"47.411631",center_lng:"28.369885",sw_lat:"45.466904",sw_lng:"26.616856",ne_lat:"48.491944",ne_lng:"30.162538"},{id:"110",long_name:"Monaco",short_name:"MC",center_lat:"43.738418",center_lng:"7.424616",sw_lat:"43.724743",sw_lng:"7.409105",ne_lat:"43.751903",ne_lng:"7.439811"},{id:"111",long_name:"Mongolia",short_name:"MN",center_lat:"46.862496",center_lng:"103.846656",sw_lat:"41.581520",sw_lng:"87.737620",
ne_lat:"52.148697",ne_lng:"119.931949"},{id:"112",long_name:"Montenegro",short_name:"ME",center_lat:"42.708678",center_lng:"19.374390",sw_lat:"41.849731",sw_lng:"18.433792",ne_lat:"43.558743",ne_lng:"20.357765"},{id:"113",long_name:"Morocco",short_name:"MA",center_lat:"31.791702",center_lng:"-7.092620",sw_lat:"27.666667",sw_lng:"-13.172891",ne_lat:"35.922507",ne_lng:"-0.996976"},{id:"114",long_name:"Mozambique",short_name:"MZ",center_lat:"-18.665695",center_lng:"35.529562",sw_lat:"-26.868109",sw_lng:"30.215550",
ne_lat:"-10.471202",ne_lng:"40.839121"},{id:"115",long_name:"Namibia",short_name:"NA",center_lat:"-22.957640",center_lng:"18.490410",sw_lat:"-28.970639",sw_lng:"11.724247",ne_lat:"-16.963486",ne_lng:"25.261752"},{id:"116",long_name:"Nauru",short_name:"NR",center_lat:"-0.522778",center_lng:"166.931503",sw_lat:"-0.554189",sw_lng:"166.909549",ne_lat:"-0.502640",ne_lng:"166.958928"},{id:"117",long_name:"Nepal",short_name:"NP",center_lat:"28.394857",center_lng:"84.124008",sw_lat:"26.347779",sw_lng:"80.052222",
ne_lat:"30.446945",ne_lng:"88.199298"},{id:"118",long_name:"The Netherlands",short_name:"NL",center_lat:"52.132633",center_lng:"5.291266",sw_lat:"50.750384",sw_lng:"3.357962",ne_lat:"53.556021",ne_lng:"7.227510"},{id:"119",long_name:"New Zealand",short_name:"NZ",center_lat:"-40.900557",center_lng:"174.885971",sw_lat:"-52.619418",sw_lng:"165.869437",ne_lat:"-29.231342",ne_lng:"-175.831536"},{id:"120",long_name:"Nicaragua",short_name:"NI",center_lat:"12.865416",center_lng:"-85.207229",sw_lat:"10.708055",
sw_lng:"-87.691069",ne_lat:"15.030276",ne_lng:"-82.592071"},{id:"121",long_name:"Niger",short_name:"NE",center_lat:"17.607789",center_lng:"8.081666",sw_lat:"11.693756",sw_lng:"0.166667",ne_lat:"23.500000",ne_lng:"15.999034"},{id:"122",long_name:"Nigeria",short_name:"NG",center_lat:"9.081999",center_lng:"8.675277",sw_lat:"4.269857",sw_lng:"2.676932",ne_lat:"13.885645",ne_lng:"14.677981"},{id:"123",long_name:"Norway",short_name:"NO",center_lat:"60.472024",center_lng:"8.468946",sw_lat:"57.959744",sw_lng:"4.500096",
ne_lat:"71.185476",ne_lng:"31.168268"},{id:"124",long_name:"Oman",short_name:"OM",center_lat:"21.512583",center_lng:"55.923255",sw_lat:"16.650336",sw_lng:"52.000002",ne_lat:"26.405395",ne_lng:"59.839397"},{id:"125",long_name:"Pakistan",short_name:"PK",center_lat:"30.375321",center_lng:"69.345116",sw_lat:"23.694695",sw_lng:"60.872972",ne_lat:"37.084107",ne_lng:"77.833469"},{id:"126",long_name:"Palau",short_name:"PW",center_lat:"7.514980",center_lng:"134.582520",sw_lat:"2.812743",sw_lng:"131.120110",
ne_lat:"8.094023",ne_lng:"134.721099"},{id:"127",long_name:"Panama",short_name:"PA",center_lat:"8.537981",center_lng:"-80.782127",sw_lat:"7.203556",sw_lng:"-83.052241",ne_lat:"9.647779",ne_lng:"-77.158488"},{id:"128",long_name:"Papua New Guinea",short_name:"PG",center_lat:"-6.314993",center_lng:"143.955550",sw_lat:"-11.657861",sw_lng:"140.841970",ne_lat:"-0.871319",ne_lng:"159.492959"},{id:"129",long_name:"Paraguay",short_name:"PY",center_lat:"-23.442503",center_lng:"-58.443832",sw_lat:"-27.588334",
sw_lng:"-62.638051",ne_lat:"-19.287707",ne_lng:"-54.258562"},{id:"130",long_name:"Peru",short_name:"PE",center_lat:"-9.189967",center_lng:"-75.015152",sw_lat:"-18.351580",sw_lng:"-81.328504",ne_lat:"-0.038777",ne_lng:"-68.652329"},{id:"131",long_name:"Philippines",short_name:"PH",center_lat:"12.879721",center_lng:"121.774017",sw_lat:"4.613444",sw_lng:"116.931557",ne_lat:"19.574024",ne_lng:"126.604384"},{id:"132",long_name:"Poland",short_name:"PL",center_lat:"51.919438",center_lng:"19.145136",sw_lat:"49.002025",
sw_lng:"14.122864",ne_lat:"54.835812",ne_lng:"24.145893"},{id:"133",long_name:"Portugal",short_name:"PT",center_lat:"39.399872",center_lng:"-8.224454",sw_lat:"32.403740",sw_lng:"-31.275330",ne_lat:"42.154205",ne_lng:"-6.190209"},{id:"134",long_name:"Qatar",short_name:"QA",center_lat:"25.354826",center_lng:"51.183884",sw_lat:"24.471118",sw_lng:"50.750055",ne_lat:"26.183093",ne_lng:"51.643260"},{id:"135",long_name:"Romania",short_name:"RO",center_lat:"45.943161",center_lng:"24.966760",sw_lat:"43.618619",
sw_lng:"20.261759",ne_lat:"48.265274",ne_lng:"29.757101"},{id:"136",long_name:"Russia",short_name:"RU",center_lat:"61.524010",center_lng:"105.318756",sw_lat:"42.9468549286",sw_lng:"27.638400175",ne_lat:"65.0258609921",ne_lng:"144.987915125"},{id:"137",long_name:"Rwanda",short_name:"RW",center_lat:"-1.940278",center_lng:"29.873888",sw_lat:"-2.839840",sw_lng:"28.861755",ne_lat:"-1.047572",ne_lng:"30.899401"},{id:"138",long_name:"Samoa",short_name:"WS",center_lat:"-13.759029",center_lng:"-172.104629",
sw_lat:"-14.076588",sw_lng:"-172.803676",ne_lat:"-13.440033",ne_lng:"-171.405859"},{id:"139",long_name:"San Marino",short_name:"SM",center_lat:"43.942360",center_lng:"12.457777",sw_lat:"43.893681",sw_lng:"12.403482",ne_lat:"43.992075",ne_lng:"12.516704"},{id:"140",long_name:"Saudi Arabia",short_name:"SA",center_lat:"23.885942",center_lng:"45.079162",sw_lat:"16.379528",sw_lng:"34.548998",ne_lat:"32.154284",ne_lng:"55.666700"},{id:"141",long_name:"Senegal",short_name:"SN",center_lat:"14.497401",center_lng:"-14.452362",
sw_lat:"12.307289",sw_lng:"-17.529848",ne_lat:"16.693054",ne_lng:"-11.348607"},{id:"142",long_name:"Serbia",short_name:"RS",center_lat:"44.016521",center_lng:"21.005859",sw_lat:"42.231503",sw_lng:"18.838522",ne_lat:"46.190032",ne_lng:"23.006310"},{id:"143",long_name:"Seychelles",short_name:"SC",center_lat:"-4.679574",center_lng:"55.491977",sw_lat:"-10.227033",sw_lng:"46.197785",ne_lat:"-4.209786",ne_lng:"56.294294"},{id:"144",long_name:"Sierra Leone",short_name:"SL",center_lat:"8.460555",center_lng:"-11.779889",
sw_lat:"6.899025",sw_lng:"-13.302007",ne_lat:"9.999972",ne_lng:"-10.271651"},{id:"145",long_name:"Singapore",short_name:"SG",center_lat:"1.352083",center_lng:"103.819836",sw_lat:"1.166398",sw_lng:"103.605575",ne_lat:"1.470772",ne_lng:"104.085557"},{id:"146",long_name:"Slovakia",short_name:"SK",center_lat:"48.669026",center_lng:"19.699024",sw_lat:"47.731159",sw_lng:"16.833182",ne_lat:"49.613805",ne_lng:"22.558934"},{id:"147",long_name:"Slovenia",short_name:"SI",center_lat:"46.151241",center_lng:"14.995463",
sw_lat:"45.421674",sw_lng:"13.375336",ne_lat:"46.876659",ne_lng:"16.596686"},{id:"148",long_name:"Solomon Islands",short_name:"SB",center_lat:"-9.645710",center_lng:"160.156194",sw_lat:"-11.863458",sw_lng:"155.486241",ne_lat:"-6.589240",ne_lng:"167.283081"},{id:"149",long_name:"Somalia",short_name:"SO",center_lat:"5.152149",center_lng:"46.199616",sw_lat:"-1.662041",sw_lng:"40.994373",ne_lat:"11.988614",ne_lng:"51.413029"},{id:"150",long_name:"South Africa",short_name:"ZA",center_lat:"-30.559482",
center_lng:"22.937506",sw_lat:"-34.833138",sw_lng:"16.454436",ne_lat:"-22.125387",ne_lng:"32.890991"},{id:"151",long_name:"South Sudan",short_name:"SS",center_lat:"7.963092",center_lng:"30.158930",sw_lat:"3.488980",sw_lng:"23.440849",ne_lat:"12.236389",ne_lng:"35.948997"},{id:"152",long_name:"Spain",short_name:"ES",center_lat:"40.463667",center_lng:"-3.749220",sw_lat:"27.637789",sw_lng:"-18.160788",ne_lat:"43.792380",ne_lng:"4.327784"},{id:"153",long_name:"Sri Lanka",short_name:"LK",center_lat:"7.873054",
center_lng:"80.771797",sw_lat:"5.919078",sw_lng:"79.521983",ne_lat:"9.836001",ne_lng:"81.878703"},{id:"154",long_name:"Saint Lucia",short_name:"LC",center_lat:"13.909444",center_lng:"-60.978893",sw_lat:"13.708118",sw_lng:"-61.079672",ne_lat:"14.110932",ne_lng:"-60.873098"},{id:"155",long_name:"Sudan",short_name:"SD",center_lat:"12.862807",center_lng:"30.217636",sw_lat:"9.347221",sw_lng:"21.814939",ne_lat:"22.224918",ne_lng:"38.584219"},{id:"156",long_name:"Suriname",short_name:"SR",center_lat:"3.919305",
center_lng:"-56.027783",sw_lat:"1.837306",sw_lng:"-58.070506",ne_lat:"6.009283",ne_lng:"-53.951024"},{id:"157",long_name:"Swaziland",short_name:"SZ",center_lat:"-26.522503",center_lng:"31.465866",sw_lat:"-27.317363",sw_lng:"30.791094",ne_lat:"-25.718520",ne_lng:"32.134844"},{id:"158",long_name:"Sweden",short_name:"SE",center_lat:"60.128161",center_lng:"18.643501",sw_lat:"55.328720",sw_lng:"10.963187",ne_lat:"69.059971",ne_lng:"24.166809"},{id:"159",long_name:"Switzerland",short_name:"CH",center_lat:"46.818188",
center_lng:"8.227512",sw_lat:"45.817920",sw_lng:"5.956080",ne_lat:"47.808455",ne_lng:"10.492340"},{id:"160",long_name:"Syria",short_name:"SY",center_lat:"34.802075",center_lng:"38.996815",sw_lat:"32.311136",sw_lng:"35.716596",ne_lat:"37.320569",ne_lng:"42.376309"},{id:"161",long_name:"Taiwan",short_name:"TW",center_lat:"23.697810",center_lng:"120.960515",sw_lat:"20.563791",sw_lng:"116.711860",ne_lat:"26.387353",ne_lng:"122.006905"},{id:"162",long_name:"Tajikistan",short_name:"TJ",center_lat:"38.861034",
center_lng:"71.276093",sw_lat:"36.671990",sw_lng:"67.342012",ne_lat:"41.044367",ne_lng:"75.153956"},{id:"163",long_name:"Tanzania",short_name:"TZ",center_lat:"-6.369028",center_lng:"34.888822",sw_lat:"-11.761254",sw_lng:"29.340000",ne_lat:"-0.984397",ne_lng:"40.444965"},{id:"164",long_name:"Thailand",short_name:"TH",center_lat:"15.870032",center_lng:"100.992541",sw_lat:"5.612729",sw_lng:"97.343396",ne_lat:"20.465143",ne_lng:"105.636812"},{id:"165",long_name:"Togo",short_name:"TG",center_lat:"8.619543",
center_lng:"0.824782",sw_lat:"6.112358",sw_lng:"-0.144042",ne_lat:"11.139496",ne_lng:"1.809050"},{id:"166",long_name:"Tonga",short_name:"TO",center_lat:"-21.178986",center_lng:"-175.198242",sw_lat:"-21.473461",sw_lng:"-175.679616",ne_lat:"-15.566393",ne_lng:"-173.702484"},{id:"167",long_name:"Tunisia",short_name:"TN",center_lat:"33.886917",center_lng:"9.537499",sw_lat:"30.228034",sw_lng:"7.522313",ne_lat:"37.358287",ne_lng:"11.599217"},{id:"168",long_name:"Turkey",short_name:"TR",center_lat:"38.963745",
center_lng:"35.243322",sw_lat:"35.807680",sw_lng:"25.663637",ne_lat:"42.106239",ne_lng:"44.818128"},{id:"169",long_name:"Turkmenistan",short_name:"TM",center_lat:"38.969719",center_lng:"59.556278",sw_lat:"35.128760",sw_lng:"52.447845",ne_lat:"42.798844",ne_lng:"66.707353"},{id:"170",long_name:"Tuvalu",short_name:"TV",center_lat:"-7.478442",center_lng:"178.679921",sw_lat:"-10.791659",sw_lng:"176.058891",ne_lat:"-5.642230",ne_lng:"179.872261"},{id:"171",long_name:"Uganda",short_name:"UG",center_lat:"1.373333",
center_lng:"32.290275",sw_lat:"-1.481542",sw_lng:"29.573433",ne_lat:"4.223001",ne_lng:"35.033049"},{id:"172",long_name:"Ukraine",short_name:"UA",center_lat:"48.379433",center_lng:"31.165580",sw_lat:"44.386463",sw_lng:"22.137159",ne_lat:"52.379581",ne_lng:"40.228581"},{id:"173",long_name:"United Kingdom",short_name:"GB",center_lat:"55.378051",center_lng:"-3.435973",sw_lat:"49.562515",sw_lng:"-12.649357",ne_lat:"59.860670",ne_lng:"3.976555"},{id:"174",long_name:"United States",short_name:"US",center_lat:"39.500240",
center_lng:"-98.350891",sw_lat:"25.820898",sw_lng:"-124.712891",ne_lat:"49.380240",ne_lng:"-66.940662"},{id:"175",long_name:"Uruguay",short_name:"UY",center_lat:"-32.522779",center_lng:"-55.765835",sw_lat:"-35.031419",sw_lng:"-58.439150",ne_lat:"-30.085215",ne_lng:"-53.184292"},{id:"176",long_name:"Uzbekistan",short_name:"UZ",center_lat:"41.377491",center_lng:"64.585262",sw_lat:"37.172257",sw_lng:"55.998218",ne_lat:"45.590075",ne_lng:"73.148946"},{id:"177",long_name:"Vanuatu",short_name:"VU",center_lat:"-15.376706",
center_lng:"166.959158",sw_lat:"-20.252293",sw_lng:"166.541759",ne_lat:"-13.072455",ne_lng:"170.238460"},{id:"178",long_name:"Vatican City",short_name:"VA",center_lat:"41.902916",center_lng:"12.453389",sw_lat:"41.900198",sw_lng:"12.445687",ne_lat:"41.907561",ne_lng:"12.458480"},{id:"179",long_name:"Venezuela",short_name:"VE",center_lat:"6.423750",center_lng:"-66.589730",sw_lat:"0.647529",sw_lng:"-73.351558",ne_lat:"12.486694",ne_lng:"-59.805666"},{id:"180",long_name:"Vietnam",short_name:"VN",center_lat:"14.058324",
center_lng:"108.277199",sw_lat:"8.412730",sw_lng:"102.144410",ne_lat:"23.393395",ne_lng:"109.468975"},{id:"181",long_name:"Yemen",short_name:"YE",center_lat:"15.552727",center_lng:"48.516388",sw_lat:"12.108166",sw_lng:"41.816055",ne_lat:"18.999633",ne_lng:"54.533555"},{id:"182",long_name:"Zambia",short_name:"ZM",center_lat:"-13.133897",center_lng:"27.849332",sw_lat:"-18.077418",sw_lng:"21.996388",ne_lat:"-8.203284",ne_lng:"33.702222"},{id:"183",long_name:"Zimbabwe",short_name:"ZW",center_lat:"-19.015438",
center_lng:"29.154857",sw_lat:"-22.424523",sw_lng:"25.237368",ne_lat:"-15.609319",ne_lng:"33.068236"},{id:"184",long_name:"Dominican Republic",short_name:"DO",center_lat:"18.735693",center_lng:"-70.162651",sw_lat:"17.542698512",sw_lng:"-72.0514552125",ne_lat:"20.0357495335",ne_lng:"-68.1849506984"},{id:"185",long_name:"Puerto Rico",short_name:"PR",center_lat:"18.245678",center_lng:"-66.462538",sw_lat:"17.8473454838",sw_lng:"-67.5340973312",ne_lat:"18.5968280921",ne_lng:"-65.1675515504"}];for(var b=
{},a=0,f=g.length;a<f;a++)b[g[a].short_name]=g[a];return{system:"wgs84",list:g,map:b}});
define("dealerlocator/models/MarkersCollection",["require","backbone","./Marker","../app"],function(g){var b=g("backbone"),a=g("./Marker"),f=g("../app");return b.Collection.extend({model:a,_filterCache:{},_originCollection:null,_currentFilter:null,initialize:function(a,b){b||(b={});this.listenTo(this,"reset",this.onReset,this);this._originCollection=a;this.listenTo(f.vent,"app:action",function(){this.selectMarkers()});this.listenTo(f.vent,"resultitem:active",function(a){this.unselectMarkers();a.model.selectIcon()});
this.listenTo(f.vent,"resultitem:inactive resultinfo:filter:change",function(a){this.selectMarkers()})},selectMarkers:function(){_.invoke(this.models,"selectIcon")},unselectMarkers:function(){_.invoke(this.models,"unselectIcon")},onReset:function(a,b){b.filtered||(this._filterCache={},this._originCollection=a.models,this._currentFilter=null)},getFilterType:function(){return this._currentFilter}})});
define("dealerlocator/models/DealerLocatorDataModel","require jquery backbone lunr ./Marker ../countries ./MarkersCollection".split(" "),function(g){var b=g("jquery"),a=g("backbone"),f=g("lunr"),l=g("./Marker"),d=g("../countries"),c=g("./MarkersCollection");return a.Model.extend({defaults:{regions:null,regionsById:{},countriesById:{},markers:null},_dataByDealerId:{},_byDealerId:{},_byDepartmentId:{},_searchIndex:void 0,initialize:function(){_.bindAll(this,"parse");this._searchIndex=f(function(){this.ref("id");
this.field("dealerName")})},getCountryBoundingBox:function(a){if(d.system===bm.config.dealerLocator.coordSystem&&d.map.hasOwnProperty(a)){a=d.map[a];var b=[];b.push({lat:a.center_lat,lng:a.center_lng});b.push({lat:a.sw_lat,lng:a.sw_lng});b.push({lat:a.ne_lat,lng:a.ne_lng});return b}},parse:function(a){var e=!!bm.config.dealerLocator.countryFilter&&0<bm.config.dealerLocator.countryFilter.length,d={};if(e)for(var f=0,g=bm.config.dealerLocator.countryFilter.length;f<g;f++)d[bm.config.dealerLocator.countryFilter[f]]=
!0;var h=bm.config.dealerLocator.coordSystem,w=[],v={},z={},C=[],k=this;_.each(a.dealers,function(a){if(a.dealerId&&a.dealerName&&a.coordinates&&a.countryId&&a.url){if(e){for(var c=[],f=0,g=a.coordinates.length;f<g;f++)"undefined"!==typeof(d[a.coordinates[f].country]&&a.coordinates[f])&&c.push(a.coordinates[f]);if(0===c.length)return;a.coordinates=c}k._searchIndex.add({id:a.dealerId,dealerName:a.dealerName});var m=v[a.region];m||(m={id:a.region,name:a.region,countries:[]},w.push(m),v[a.region]=m);
var n=a.countryId,p=_.omit(a,"coordinates");k._byDealerId[p.dealerId]||(k._byDealerId[p.dealerId]=[]);var r=[],q={};_.each(a.coordinates,function(a){if(a.hasOwnProperty(h))if(a.lat=a[h].lat,a.lng=a[h].lng,q.hasOwnProperty(a.lat+"|"+a.lng))a.types&&q[a.lat+"|"+a.lng].addType(a.types);else{if(!z.hasOwnProperty(n)){var b={id:n,name:a.country,bounds:k.getCountryBoundingBox(n),markerPos:[],region:m};m.countries.push(b);z[n]=b}b=new l(_.extend(a,p));q[a.lat+"|"+a.lng]=b;z[n].markerPos.push(b.get("latlng"));
k._byDepartmentId[a.id]=b;k._byDealerId[p.dealerId].push(b);r.push(b)}});k._dataByDealerId[p.dealerId]=p;k._dataByDealerId[p.dealerId].countryName=z[n].name;m.countries.sort(function(a,b){return a.name.localeCompare(b.name)});m.amountCountries=m.countries.length;C=C.concat(r)}else b.log("DealerLocatorDataModel: skipped invalid dealer.",a),b.log("required attributes: dealerId, dealerName, coordinates, countryId, url")});C.sort(function(a,b){return a.attributes.dealerName.localeCompare(b.attributes.dealerName)});
this.set("markers",new c(C));w.sort(function(a,b){return a.name.localeCompare(b.name)});this.set("regions",w);this.set("countriesById",z);this.set("regionsById",v)}})});
define("dealerlocator/models/ResultItem",["require","backbone"],function(g){return g("backbone").Model.extend({defaults:{dealerName:"Test Dealer",dealerImage:"",dealerId:"42",markerId:"",marker:null,types:[],website:null,address:{},departments:[]},initialize:function(){var b={};_.each(this.get("types"),function(a){b[a.key]=a.key});this.set("_types",b)},hasAtLeastOneType:function(b){return b?!!_.find(b,function(a){return this.attributes._types.hasOwnProperty(a)},this):!0}})});
define("dealerlocator/models/DealerModel",["require","backbone","./ResultItem"],function(g){var b=g("backbone"),a=g("./ResultItem");return b.Model.extend({defaults:{businessName:"",dealerName:"Test Dealer",dealerImage:bm.config.dealerLocator.defaultImage,id:"",requestUrl:null,email:null,website:"",operatingCompany:"",tradingName:"",type:"",locations:[]},url:function(){return this.get("url")},parse:function(b){var f=this;this.set("id",b.id);var d=[],c=bm.config.dealerLocator.coordSystem,g=!!bm.config.dealerLocator.directionsService,
e={};b.website&&this.set("website",f.externalizeUrl(b.website));_.each(b.addresses,function(h){var l={dealerName:b.dealerName,dealerImage:null,dealerId:b.id,markerId:"",directions:g,requestUrl:f.get("requestUrl"),types:[],addresses:[]},m=_.omit(h,"departments");m.dealerName=l.dealerName;m.dealerId=l.dealerId;m.directions=l.directions;m.requestUrl=l.requestUrl;var r={},w=h.hasOwnProperty(c)?c:bm.config.dealerLocator.defaultCoordSystem;l.lat=h[w].lat;l.lng=h[w].lng;b.website&&(l.website=f.externalizeUrl(b.website));
b.phone&&(m.phone=b.phone);m.types=[];m.departments=[];_.each(h.departments,function(a){if(!r[a.name]){var c={key:a.name,title:bm.i18n.dealerLocator.filterOptions[a.name]};l.types.push(c);m.types.push(c);r[a.name]=bm.i18n.dealerLocator.filterOptions[a.name]}!m.dealerImage&&a.dealerImage&&(m.dealerImage=a.dealerImage);a.website?"pre-owned"===a.name?l.preownedUrl=m.preownedUrl=f.externalizeUrl(a.website):m.website||(m.website=f.externalizeUrl(a.website)):b.website&&!m.website&&(m.website=f.externalizeUrl(b.website));
!m.phone&&a.phone&&(m.phone=a.phone);!m.requestUrl&&a.email&&(m.requestUrl=f.getRequestUrl(a.email));m.departments.push({id:a.id,type:r[a.name],phone:a.phone,openingHours:a.openingHours})});h=l.lat+"|"+l.lng;e[h]?e[h].get("addresses").push(m):(l.addresses.push(m),w=new a(l),e[h]=w,d.push(w))});this.set("locations",d)},externalizeUrl:function(a){0!==a.indexOf("http")&&(a="http://"+a);return a},getRequestUrl:function(a){return"mailto:"+a},getIconPathForType:function(a){return a=_.findWhere(bm.config.dealerLocator.filterOptions,
{id:a})||{},a.iconPath||""}})});
define("dealerlocator/controllers/DealerDataManager","require jquery ../app marionette ../models/DealerLocatorDataModel ../models/DealerModel".split(" "),function(g){var b=g("jquery"),a=g("../app"),f=g("marionette"),l=g("../models/DealerLocatorDataModel"),d=g("../models/DealerModel");return f.Module.extend({startWithParent:!1,data:new l,_dealerModelCache:{},initialize:function(){_.bindAll.apply(_,[this].concat(_.functions(this)));this.listenTo(this,"marker:clicked",this.fetchDepartments,this)},onBeforeStart:function(a){a||
(a={});var c=this,e=a.url||this.app.dataConfig.url;this.set("requestUrl",a.requestUrl||this.app.dataConfig.requestUrl);this.fetch({url:e,success:function(a){c.trigger("init:success")},error:function(a){b.log("JSON:load:fail");c.trigger("init:error")}})},fetch:function(a){this.data.fetch(a)},get:function(a){return this.data.get(a)},set:function(a,b){this.data.set(a,b)},getCountryById:function(a){return this.data.get("countriesById")[a]||null},getRegionById:function(a){return this.data.get("regionsById")[a]||
null},queryDealer:function(a){var b=[],c=this;2<=a.length&&(b=_.map(this.data._searchIndex.search(a),function(a){return c.data._dataByDealerId[a.ref]}));return b},analyzeId:function(a,b){var c={id:a,isDepartment:!1,isDealer:!1,data:void 0},d=this.data._byDealerId.hasOwnProperty(a),f=this.data._byDepartmentId.hasOwnProperty(a),g=function(a){return a.replace(/\s+/gi,"").replace(/-/gi,"").toLowerCase()};if(d&&f&&b){var h=this.data._byDealerId[a],l=this.data._byDepartmentId[a];b=g(b);_.each(h,function(a){c.data||
b!==g(a.get("dealerName"))||(c.isDealer=!0,c.data=h)});c.data||b!==g(l.get("dealerName"))||(c.isDepartment=!0,c.data=l)}!c.data&&d?(c.isDealer=!0,c.data=this.data._byDealerId[a]):!c.data&&f&&(c.isDepartment=!0,c.data=this.data._byDepartmentId[a]);return c},findNearestMarkers:function(c){b.log("DealerDataManager.findNearestMarkers",c);a.vent.trigger("search:byterm:loading");var d=[],e=[],f={},g=c.marker,l=g.getPosition(),r=g.hasBounds(),w=[];this.data.get("markers").each(function(a){var b=a.get("lat"),
c=a.get("lng"),d=b+"|"+c;r&&g.boundsContains({lat:b,lng:c})&&w.push(a);f[d]?a.set("distance",f[d]):(b=a.distanceTo(l),f[d]=b,a.set("distance",b));e.push(a)});if(0<w.length)d=w,d.sort(function(a,b){return a.get("distance")-b.get("distance")}),b.log("DealerDataManager.findNearestMarkers:markerInBounds",w);else{e.sort(function(a,b){return a.get("distance")-b.get("distance")});for(var v=0,z=e.length;v<z&&!(e[v].get("distance")>bm.config.dealerLocator.searchThreshold);v++)d.push(e[v]);0===d.length&&(d=
e.slice(0,bm.config.dealerLocator.searchNearest))}a.vent.trigger("search:byterm:completed",c.term,d)},findMarkersByCountryId:function(c){b.log("DealerDataManager.findMarkersByCountryId",c);a.vent.trigger("search:bycountry:loading");var d=this.data.get("markers").where({countryId:c});a.vent.trigger("search:bycountry:completed",this.getCountryById(c),d)},fetchDepartments:function(c,f){f||(f={});var e=b.Deferred(),g=[],h=[],l=this,r=f.eventPrefix||"";_.isArray(c)||(c=[c]);var w={};_.each(c,function(a){var c=
a.get("dealerId");w.hasOwnProperty(c)||(w[c]=!0,l._dealerModelCache[c]?(b.log("cached data: "+a.get("url")),a=l._dealerModelCache[a.get("dealerId")],h.push(a)):(b.log("fetch data: "+a.get("url")),a=new d({url:a.get("url"),requestUrl:l.get("requestUrl")}),g.push(a)))});if(0===g.length){var v=l.fetchDepartmentsDone(h,c,f);e.resolve(v)}else{var z=_.invoke(g,"fetch");b.when.apply(b,z).done(function(){_.each(g,function(a){var b=a.get("id");l._dealerModelCache[b]=a});v=l.fetchDepartmentsDone(g.concat(h),
c,f);e.resolve(v)}).fail(function(b,c,d){b=a.getErrorCode(b,c);f.silent&&(l.trigger(r+"toggle:loading",!1),l.trigger(r+"fetchdepartments:error",b));e.reject(b)})}return e.promise()},fetchDepartmentsDone:function(b,d,e){for(var c=e.eventPrefix||"",f=[],g={},h=0,l=b.length;h<l;h++)g[b[h].id]=b[h];_.each(d,function(a){var b=g[a.get("dealerId")],c=a.get("id");(b=_.filter(b.get("locations"),function(b){var d=!1;_.each(b.get("addresses"),function(a){if(a.id===c)return d=!0});if(!d)return!1;b.set("marker",
a);return!0}))&&(f=f.concat(b))});e.silent&&(a.vent.trigger(c+"fetchdepartments:completed",f),this.trigger(c+"toggle:loading",!1));return f}})});
define("dealerlocator/models/ResultCollection",["require","backbone","./Marker","../app"],function(g){var b=g("backbone"),a=g("./Marker"),f=g("../app");return b.Collection.extend({model:a,_filterCache:{},_originCollection:null,_currentFilter:null,initialize:function(a,b){this.listenTo(this,"reset",this.onReset,this);this.listenTo(f.vent,"currentposition:remove",function(){this.each(function(a){a.set("distance",void 0)});this.trigger("model:distance")});this.listenTo(f.vent,"resultinfo:filter:change",
this.filterByType.bind(this));this.listenTo(f.vent,"positionbyterm:error",function(){this.reset()});this._originCollection=a||[]},onReset:function(a,b){b.filtered||(this._filterCache={},this._originCollection=a.models,this._currentFilter=null)},getFilterType:function(){return this._currentFilter},filterByType:function(a){var b=a.sort().join();if(b!==this._currentFilter){this._currentFilter=b;this._filterCache.hasOwnProperty(b)||(this._filterCache[b]=this._originCollection.filter(function(b){return b.hasAtLeastOneType(a)}));
var c={previousModels:this.models,filtered:!0};this.models=this._filterCache[b];this.length=this.models.length;this.trigger("reset",this,c)}}})});
define("dealerlocator/models/AppState",["require","backbone","../app"],function(g){var b=g("backbone"),a=g("../app");return b.Model.extend({defaults:{type:a.config.filterDefault},initialize:function(){this.listenTo(a.vent,"resultinfo:filter:change",function(a){this.set("type",a)})},getState:function(){var b=this.toJSON();b.type===a.config.filterDefault&&delete b.type;return b}})});
define("dealerlocator/views/BreadcrumbView",["require","jquery","../app","marionette"],function(g){var b=g("jquery"),a=g("../app");return g("marionette").ItemView.extend({appRoot:"",initialize:function(f){f=a.createUrl({global:""});bm.i18n.dealerLocator.breadcrumb.appName?b.Breadcrumb.swap(bm.i18n.dealerLocator.breadcrumb.appName,a.createUrl({global:""})):b.Breadcrumb.setHomeUrl(f);this.model=new Backbone.Model;this.listenTo(a.actions,"action",function(f,d,c,g){switch(f){case "globalMenu":b.Breadcrumb.removeAll();
d&&b.Breadcrumb.add(d,a.createUrl({region:d},{allowControls:!0}));break;case "searchByTerm":b.Breadcrumb.removeAll();b.Breadcrumb.add(a.i18n.breadcrumb.result,a.createUrl({search:d},{allowControls:!0}));break;case "searchByCountryId":b.Breadcrumb.removeAll();b.Breadcrumb.add(d.region.name,a.createUrl({region:d.region.id},{allowControls:!0}));b.Breadcrumb.add(d.name,a.createUrl({country:d.id+"-"+d.name}));break;case "showDealer":b.Breadcrumb.removeAll();b.Breadcrumb.add(a.i18n.breadcrumb.dealerResult.replace("{dealerName}",
c),a.createUrl({partner:d+"-"+c}));break;case "departmentDetails":g&&g.fromSuggestion&&b.Breadcrumb.removeAll(),b.Breadcrumb.add(c,a.createUrl({partner:d+"-"+c}))}});this.listenTo(a.vent,"regionmenu:forwards",function(f,d){b.Breadcrumb.add(d,a.createUrl({region:f}))});this.listenTo(a.vent,"regionmenu:backwards",function(){b.Breadcrumb.remove()})},clear:function(){b.Breadcrumb.removeAll()}})});
define("dealerlocator/services/AutocompleteStub",["jquery","./"+bm.config.dealerLocator.mapService+"/Autocomplete"],function(g,b){function a(){this.init()}a.prototype={STATUS_OK:1,STATUS_ERROR:0,_tagName:"li",init:function(a){},getSuggestions:function(a,b){g.log("Autocomplete.getSuggestions not implemented yet!");a=g.Deferred();a.reject("Autocomplete.getSuggestions not implemented yet!");return a.promise()}};g.extend(a.prototype,b);return new a});
define("dealerlocator/views/SearchFormView","require jquery ../app ../services/MapUtilsStub ../services/AutocompleteStub marionette ../countries ../templates".split(" "),function(g){var b=g("jquery"),a=g("../app"),f=g("../services/MapUtilsStub"),l=g("../services/AutocompleteStub"),d=g("marionette"),c=g("../countries");g=g("../templates");return d.ItemView.extend({i18n:bm.i18n.dealerLocator.searchBar,template:g.searchForm,className:"by_dealer_search_bar",ui:{field:".by_dealer_search_field",error:".by_dealer_search_term_error",
term:"#searchterm",termLabel:".by_dealer_search_input_label",iconPosition:".by_dealer_icon_location",suggestions:".by_dealer_search_suggestion"},events:{"submit form":"searchTermSubmitted","keydown @ui.term":"keyDownTerm","keyup @ui.term":"keyUpTerm","click .by_dealer_search_submit":"searchTermSubmitted","click @ui.termLabel":"handleLabelCLick","click .by_dealer_icon_close":"clearField","click @ui.iconPosition":"getUserPosition"},_bentleyPinClass:"by_bentley_dealer",_loadingClass:"by_loading",_disabledClass:"by_disabled",
_activeClass:"by_active",suggestionItem:"li",suggestionOpen:!1,lastValue:"",preventDestroy:!0,ventPrefix:"searchformview",_getcurrentposRunning:!1,_isLabelMode:void 0,initialize:function(c){this.listenTo(a.vent,"positionbyterm:done",function(c){b.log("positionbyterm:done",c.isCurrentPosition,this._isLabelMode);this.toggleLabelMode(!!c.isCurrentPosition);c.isCurrentPosition?this.ui.termLabel.text(a.i18n.searchBar.currentLocation):this.ui.term.val(c.term)});this.listenTo(a.vent,"search:bydealer:completed",
function(a){this.ui.term.val(a.dealerName);this.toggleLabelMode(!1)});this.listenTo(a.vent,"regionmenu:forwards regionmenu:backwards",function(a,b){this.clearField()});this.listenTo(a.actions,"action",function(a,b){this.clearField()});this.listenTo(a.vent,"positionbyterm:error",function(b){a.inlineError({el:this.ui.error,message:a.i18n.error[b.code],errCode:b.status})})},toggleLabelMode:function(a){void 0===a?(this.ui.term.toggle(this._isLabelMode),this.ui.termLabel.toggle(!this._isLabelMode),this._isLabelMode=
!this._isLabelMode):a!==this._isLabelMode&&(this.ui.term.toggle(!a),this.ui.termLabel.toggle(a),this._isLabelMode=a)},onRender:function(){this._isLabelMode=void 0;this.toggleLabelMode(!1);navigator.geolocation||this.ui.iconPosition.hide();this.outsideClick=bm.utils.outsideHandler(this.ui.field,this._closeSuggestions,{ctx:this,checkPos:!1})},searchTermSubmitted:function(c){c.preventDefault();this.ui.term.blur();this._closeSuggestions();c=b.trim(this.ui.term.val());""!==c&&a.actions.triggerMethod("searchByTerm",
c)},clearField:function(c){b.log("SearchFormView.clearField");this.ui.term.val("");this.toggleLabelMode(!1);a.removeInlineError({el:this.ui.error});this._closeSuggestions();a.vent.trigger("currentposition:remove")},getUserPosition:function(){if(!this._getcurrentposRunning){this._getcurrentposRunning=!0;this.toggleLabelMode(!0);this.ui.termLabel.addClass(this._disabledClass).text(a.i18n.searchBar.searchPositionState);this.ui.iconPosition.addClass(this._loadingClass);a.removeInlineError({el:this.ui.error});
var c=this.ui.term.val(),d=this;f.getCurrentPosition().always(function(){d.ui.termLabel.removeClass(d._disabledClass);d.ui.iconPosition.removeClass(d._loadingClass);d._getcurrentposRunning=!1}).done(function(b,c){d.ui.termLabel.text(a.i18n.searchBar.currentLocation);a.actions.triggerMethod("searchByTerm",b+","+c)}).fail(function(e){b.log("SearchFormView","getUserPosition failed, status",e);d.ui.term.val(c);d.toggleLabelMode(!1);a.inlineError({el:d.ui.error,message:a.i18n.error.geolocation,errCode:e,
retryHandler:b.proxy(d.getUserPosition,d)})})}},handleLabelCLick:function(a){var c=this;this._getcurrentposRunning||(this.ui.term.val(""),this.toggleLabelMode(!1),this.ui.term.focus(),this.ui.term.on("blur",function(){""===b.trim(c.ui.term.val())&&c.toggleLabelMode(!0);c.ui.term.off("blur")}))},keyDownTerm:function(a){if(this.suggestionOpen&&0<=[9,13,27,38,40].indexOf(a.which)){a.stopPropagation();a.preventDefault();var c=this.ui.suggestions.find(this.suggestionItem),d=c.filter("."+this._activeClass),
f=d.index();switch(a.which){case 13:0<=f?(this._handleSuggestionItem(d),this.ui.term.blur()):this.searchTermSubmitted(a);break;case 27:this.clearField(a);break;case 38:0<=f&&d.removeClass(this._activeClass);f--; -1>f&&(f=c.length-1);0>f?this.ui.term.val(this.lastValue):b(c.get(f)).addClass(this._activeClass);break;case 40:0<=f&&d.removeClass(this._activeClass),f++,f>=c.length?this.ui.term.val(this.lastValue):b(c.get(f)).addClass(this._activeClass)}}},keyUpTerm:function(a){a=this.ui.term.val();2<a.length?
(this.suggestionOpen||this.outsideClick.bind(),this.suggestionOpen=!0,this.ui.suggestions.show(),this._predictiveSearch()):(b.log("SearchFormView.keyUpTerm","_closeSuggestions",a.length),this._closeSuggestions())},_predictiveSearch:function(){var d=this,e=d.ui.term.val();if(this.lastValue!==e){b.log("_predictiveSearch",this.lastValue,this.lastValue===e);this.lastValue=e;this.ui.suggestions.empty();var f=a.module("dealerDataManager").queryDealer(e),g=f.length,p=a.config.suggestions.total;if(g<=a.config.suggestions.maxDealers){p-=
g;var r=new RegExp("("+e+")","gi");_.each(f,function(a){var c='\x3cspan class\x3d"'+d._bentleyPinClass+'"\x3e\x3c/span\x3e';c+=a.dealerName.replace(r,"\x3cstrong\x3e$1\x3c/strong\x3e");c+=", "+a.countryName;a=b("\x3c"+d.suggestionItem+"\x3e").data("dealer",a).on("click",b.proxy(d._clickSuggestionItem,d)).html(c);d.ui.suggestions.append(a)})}a.config.autocompleteService&&(f=a.config.autocomplete,a.config.userCountryCode&&c.map.hasOwnProperty(a.config.userCountryCode)&&(f.searchInBounds=c.map[a.config.userCountryCode]),
l.getSuggestions(e,f).done(function(a){for(var c=0,e=Math.min(p,a.length);c<e;c++){var f=b("\x3c"+d.suggestionItem+"\x3e").data("poi",a[c]).on("click",b.proxy(d._clickSuggestionItem,d)).html(a[c].formatted_label);d.ui.suggestions.append(f)}}))}},_clickSuggestionItem:function(a){this._handleSuggestionItem(b(a.currentTarget))},_handleSuggestionItem:function(c){var d={};c.data("dealer")?(c=c.data("dealer"),d.fromSuggestion=!0,b.log("SearchFormView._clickSuggestionItem",c,d),a.actions.triggerMethod("dealerDetails",
c,d)):c.data("poi")&&(c=c.data("poi"),b.log("SearchFormView._clickSuggestionItem - poi",c),a.actions.triggerMethod("searchByTerm",c.label));this._closeSuggestions()},_closeSuggestions:function(){this.outsideClick.unbind();this.suggestionOpen=!1;this.lastValue="";this.ui.suggestions.empty().hide()}})});
define("dealerlocator/views/RegionMenuView",["require","jquery","marionette","../templates","../app"],function(g){var b=g("jquery"),a=g("marionette"),f=g("../templates"),l=g("../app");return a.ItemView.extend({template:f.regionMenu,tagName:"nav",className:"by_global_dealer_locator",_animationRuns:!1,ventPrefix:"regionmenu",stateActive:"by_active",transitionTime:0,events:{"click .back":"backwards","click .by_global_dealer_label":"forwards"},initialize:function(a){_.bindAll.apply(_,[this].concat(_.functions(this)));
this.model=new Backbone.Model({regions:this._getSortedRegions()});this.preSelectedRegion=a&&a.region?a.region:void 0;this.listenTo(l.vent,"marker:selected",function(a){l.setLayout("result","ResultView",{unset:!1});l.resultMarkers.reset([a]);l.vent.trigger("marker:select",a)})},serializeData:function(){for(var a=this.model.toJSON(),b=0,f=a.regions.length;b<f;b++)1>=a.regions[b].amountCountries&&(a.regions[b].skipCountries=!0);return a},_getSortedRegions:function(){var a=l.module("dealerDataManager").get("regions"),
b=l.module("dealerDataManager").get("regionsById");if(!l.config.sortRegions)return a;for(var f=[],e={},g=0,n=l.config.sortRegions.length;g<n;g++){var p=l.config.sortRegions[g];b[p]&&(f.push(b[p]),e[p]=!0)}_.each(a,function(a){e[a.id]||f.push(b[a.id])});return f},itemClicked:function(a){a.stopPropagation();a.preventDefault();b.log("itemClicked",a,this._animationRuns);this._animationRuns||(a=b(a.currentTarget),a.hasClass("back")?this.backwards(a):this.forwards(a))},onRender:function(){if(this.preSelectedRegion){var a=
this.$el.find("li[data-key\x3d'"+this.preSelectedRegion+"']");a.addClass(this.stateActive);a.siblings("li").hide();a.children(".by_global_dealer_label").hide();a.children("ul").show()}},forwards:function(a){a.stopPropagation();a.preventDefault();b.log("RegionMenuView:forwards");var c=b(a.currentTarget),d=c.closest("li"),e=d.data("amount");a=d.data("key");var f=c.text(),g=d.siblings("li"),p=d.children("ul").first(),r=this;0<p.length?1===e?(c=l.module("dealerDataManager").get("regionsById"),c[a]&&(a=
c[a].countries[0],l.vent.trigger(r.ventPrefix+":select",a.id,a.name))):(l.vent.trigger(r.ventPrefix+":forwards",a,f),r.transitionTime?(r._animationRuns=!0,g.add(c).fadeOut(r.transitionTime,function(){p.fadeIn(r.transitionTime,function(){d.addClass(r.stateActive);r._animationRuns=!1})})):(g.add(c).hide(),p.show(),d.addClass(r.stateActive))):l.vent.trigger(r.ventPrefix+":select",a,f)},backwards:function(a){a=b(a.currentTarget);var c=a.data("key");a=a.closest("ul");var d=a.closest("li"),e=d.siblings("li"),
f=a.siblings(".by_global_dealer_label"),g=this;0<a.data("level")?g.transitionTime?(g._animationRuns=!0,a.fadeOut(g.transitionTime,function(){d.removeClass(g.stateActive);l.vent.trigger(g.ventPrefix+":backwards",c);e.add(f).fadeIn(g.transitionTime,function(){g._animationRuns=!1})})):(a.hide(),d.removeClass(g.stateActive),l.vent.trigger(g.ventPrefix+":backwards",c),e.add(f).show()):this.trigger("menu:back")}})});
define("dealerlocator/views/ResultItemView","require jquery ../app marionette ../templates ../utils".split(" "),function(g){var b=g("jquery"),a=g("../app"),f=g("marionette"),l=g("../templates"),d=g("../utils");return f.ItemView.extend({template:l.resultItem,templateDetails:l.resultItemDetails,tagName:"div",className:"by_dealer_result_item",_activeClass:"by_active",_transitionClass:"by_transition",_loadingClass:"by_loading",ui:{description:".by_dealer_description"},modelEvents:{"change:distance":"render"},
events:{"click .by_dealer_info_direction":"itemGetDirection","click .by_dealer_result_item_opener":"_toggleHandler","click .by_dealer_view_button":"itemClicked"},_hasRenderedDetails:!1,transitionTime:0,toggleOnRender:!1,initialize:function(b){a.currentPosView.hasModel()||this.model.unset("convertedDistance",{silent:!0});this.toggleOnRender=0===b.childIndex&&b.model.has("convertedDistance")},_renderSubTemplate:function(){if(!this._hasRenderedDetails&&this.isRendered){this._hasRenderedDetails=!0;for(var a=
_.clone(this.model.attributes.details.attributes),b=((new Date).getDay()+6)%7,e,g=0,l=a.addresses.length;g<l;g++){for(var p=[],r=0,w=a.addresses[g].departments.length;r<w;r++){var v=a.addresses[g].departments[r];v.hasOwnProperty("openingHours")&&v.openingHours.length>b&&(e=v.openingHours[b],v={department:v.type,day:e.day},e.appointments?v.appointment=1:e.closed?v.closed=1:v.periods=e.periods,p.push(v))}a.addresses[g].todayOpenings=p;a.addresses[g].phone&&(a.addresses[g].formattedPhone=d.formatPhone(a.addresses[g].phone))}a=
this.mixinTemplateHelpers(a);a=f.Renderer.render(this.templateDetails,a,this);this.ui.description.html(a);this._delegateDOMEvents(this.events)}},_showDetails:!1,_loadingState:!1,_hasError:!1,_toggleHandler:function(a){b.log("_toggleHandler");a.preventDefault();this.toggleVisibility()},toggleVisibility:function(a,d){b.log("toggleVisibility",a);d||(d={});if(_.isObject(a))d=a,a=!this._showDetails;else if(!_.isBoolean(a))a=!this._showDetails;else if(a===this._showDetails)return;b.log("check toggleVisibility",
a,this.ui);a?this._openDetails(d):this._closeDetails(d)},_openDetails:function(b){if(!this._showDetails)if(b||(b={}),this._showDetails=!0,this._hasError||this.model.get("details")){var c=this;this.transitionTime?(c.$el.addClass(c._transitionClass).addClass(c._activeClass),this.ui.description.slideDown(this.transitionTime,function(){c.$el.removeClass(c._transitionClass)})):(c.$el.addClass(c._activeClass),this.ui.description.show());b||(b={});b.silent||(this.trigger("toggle:active"),a.vent.trigger("resultitem:active",
this))}else this._loadingDetails(b)},_closeDetails:function(b){if(this._showDetails){b||(b={});var c=this;b.silent||(this.trigger("toggle:inactive"),a.vent.trigger("resultitem:inactive",this));this._showDetails=!1;if(this._hasError||this.model.get("details"))this.transitionTime?(c.$el.addClass(c._transitionClass).removeClass(c._activeClass),this.ui.description.slideUp(this.transitionTime,function(){c.$el.removeClass(c._transitionClass)})):(c.$el.removeClass(c._activeClass),this.ui.description.hide())}},
_loadingDetails:function(c){if(!this._loadingState){this.$el.addClass(this._loadingClass);this._loadingState=!0;var d=this;a.module("dealerDataManager").fetchDepartments(this.model,{silent:!0}).done(function(a){d._loadingComplete(a,c);d._loadingState=!1}).fail(function(c){b.log("fetching dealer failed");d.$el.removeClass(d._loadingClass);d._loadingState=!1;d._hasError=!0;a.inlineError({errCode:c,el:d.ui.description,message:{notFound:a.i18n.error.dealerNotFound},retryHandler:b.proxy(d._loadingDetails,
d)})})}},_loadingComplete:function(c,d){this.$el.removeClass(this._loadingClass);if(0===c.length)this._hasError=!0,b.log("ResultItemView","error in fetching details"),a.inlineError({el:this.ui.description,message:a.i18n.error.departmentNotFound});else if(this.model.set("details",c[0],{silent:!0}),this.isRendered){this._renderSubTemplate();if(this._showDetails){var e=this;this.transitionTime?(e.$el.addClass(e._transitionClass).addClass(e._activeClass),this.ui.description.slideDown(this.transitionTime,
function(){e.$el.removeClass(e._transitionClass)})):(e.$el.addClass(e._activeClass),this.ui.description.show())}d||(d={});d.silent||(this.trigger("toggle:active"),a.vent.trigger("resultitem:active",this))}},onRender:function(){this.model.get("details")&&this._renderSubTemplate();this.toggleOnRender&&(this.toggleOnRender=!1,this.toggleVisibility(!0))},itemClicked:function(c){c.preventDefault();b.log("resultitem:clicked",this.model);a.vent.trigger("resultitem:clicked",this.model)},itemGetDirection:function(c){b.log("resultitem:clicked",
this.model);a.vent.trigger("resultitem:getdirection",this.model)}})});
define("dealerlocator/views/ResultHeadItemView",["require","marionette","../app","../templates"],function(g){var b=g("marionette"),a=g("../app");g=g("../templates");return b.ItemView.extend({template:g.resultHead,className:"by_dealer_result_item_country",events:{"click .by_dealer_global_country":"headClicked"},_country:void 0,serializeData:function(){return{country:this._country}},initialize:function(a){this._country=a.country},headClicked:function(b){a.vent.trigger("resultheaditem:clicked",this._country)}})});
define("dealerlocator/views/ResultEmptyView",["require","marionette","../templates"],function(g){var b=g("marionette");g=g("../templates");return b.ItemView.extend({template:g.resultEmpty,className:"by_dealer_result_empty"})});
define("dealerlocator/views/ResultView","require jquery marionette ../app ./ResultItemView ./ResultHeadItemView ./ResultEmptyView".split(" "),function(g){var b=g("jquery"),a=g("marionette"),f=g("../app"),l=g("./ResultItemView"),d=g("./ResultHeadItemView"),c=g("./ResultEmptyView");return a.CollectionView.extend({childView:l,getEmptyView:function(){if(this.initialized)return c},childViewOptions:function(a,b){return{childIndex:b}},className:"by_dealer_result_container",resultDisplayValue:null,ui:{filter:"#filterresult",
emptyResult:".by_dealer_empty_result"},templateHelpers:{filterOptions:[]},collectionEvents:{reset:function(){this.initialized=!0}},loadingClass:"by_loading",initialized:!1,_itemHeadView:void 0,initialize:function(a){_.bindAll(this,"render","getResultDisplayValue");b(document).on(bm.config.breakPoints.eventName,this.getResultDisplayValue);this.collection=f.resultMarkers;this.listenTo(f.vent,"search:bycountry:completed search:byterm:completed search:bydealer:completed",function(a,b){this.collection.reset(b);
a=f.appState.get("types")||f.appState.get("defaultTypes");this.collection.filterByType(a)});this.listenTo(this,"childview:toggle:active",function(a){var c=this.children.find(function(b){return b.cid!==a.cid&&b._showDetails});c&&c.toggleVisibility(!1,{silent:!0});this.resultDisplayValue||this.getResultDisplayValue();if("block"===this.resultDisplayValue)c=a.$el.offset().top,b("body, html").animate({scrollTop:c});else{c=a.$el.position();var d=this.$el.scrollTop();this.$el.animate({scrollTop:d+c.top})}});
this.listenTo(f.vent,"marker:selected marker:select",function(a){var b=this.findChildViewByModelId(a.id);if(b){if(b._showDetails)return}else this.collection.add(a,{at:0}),b=this.findChildViewByModelId(a.id);b.toggleVisibility(!0);a=b.$el.position();b=this.$el.scrollTop();this.$el.animate({scrollTop:b+a.top})});a&&a.country&&(this._itemHeadView=new d({country:a.country}))},getResultDisplayValue:function(a,b){if(this._parent&&this._parent.el&&this._parent.el.id)this.resultDisplayValue=this.$el.parents("#"+
this._parent.el.id).css("display");else return!1},onRender:function(){this._itemHeadView&&(this._itemHeadView.render(),this.$el.prepend(this._itemHeadView.$el));this.$el.toggleClass(this.loadingClass,!this.initialized)},onBeforeDestroy:function(){this._itemHeadView&&(this._itemHeadView.destroy(),this._itemHeadView=null)},findChildViewByModelId:function(a){var b=null;this.children.each(function(c){if(c.model.id===a)return b=c,!1});return b},selectFilter:function(a){a&&a.type&&_.each(this.templateHelpers.filterOptions,
function(b){b.selected=a.type===b.type})},changeFilter:function(a){a=this.ui.filter.val();a===bm.config.dealerLocator.filterDefault?this.collection.filterByType():this.collection.filterByType(a);this.trigger("filteroption:change",a)}})});
define("dealerlocator/services/MapStub",["jquery","./MapMarkerStub","./"+bm.config.dealerLocator.mapService+"/Map"],function(g,b,a){function f(a,b,c){this.el=a;this.options=b||{};this.options.scrollwheel="boolean"===typeof this.options.scrollwheel?this.options.scrollwheel:!0;this.context=c;this.map=null;this.init()}f.prototype={init:function(){},getMap:function(){return this.map},triggerMapEvent:function(a,b){},fitTo:function(a){},getZoom:function(){return this.map.getZoom()},setZoom:function(a){this.map.setZoom(a)},
setOptions:function(a){},panTo:function(a){},fitToWorld:function(){},createClusterer:function(a){return null},directionService:function(){}};g.extend(f.prototype,a);return f});
define("dealerlocator/services/MarkerClustererStub",["jquery","./"+bm.config.dealerLocator.mapService+"/MarkerClusterer"],function(g,b){function a(a,b,d){this.map=a;this.markers=b;this.options=d;this.cluster=null;this.options.styles||(this.options.styles=[]);a=0;for(d=b.length;a<d;a++)b[a].setMap(this.map.getMap()),b[a].setVisible(!0);this.init();if(null===this.cluster)throw Error("MarkerClustererStub: error in init, cluster not created");}a.prototype={init:function(){},getCluster:function(){return this.cluster},
resetMarkers:function(a){},show:function(){_.each(this.markers,function(a){a.setVisible(!0)})},hide:function(){_.each(this.markers,function(a){a.setVisible(!1)})},fitMapToMarkers:function(){this.map.fitTo(this.markers)},setStyles:function(a){}};g.extend(a.prototype,b);return a});
define("dealerlocator/views/MapView","require jquery ../app ../services/MapUtilsStub ../services/MapStub ../services/MarkerClustererStub marionette ../templates".split(" "),function(g){var b=g("jquery"),a=g("../app"),f=g("../services/MapUtilsStub"),l=g("../services/MapStub"),d=g("../services/MarkerClustererStub"),c=g("marionette");g=g("../templates");return c.ItemView.extend({template:g.map,templateHelpers:{viewOnMaps:"viewOnMaps."+bm.config.dealerLocator.mapService},preventDestroy:!0,className:"by_dealer_locator_map",
ui:{canvas:"#by_map_canvas",loader:"#by_dealer_loader",staticMap:"#by_map_static",staticMapLink:".by_dealer_nav_link",staticMapView:".by_dealer_static_map",inlineMap:".by_dealer_map_inline"},staticDefaultPins:a.config.staticMap.defaultPins,mapService:null,_mapIsInline:!1,_mapInitialized:!1,_mapReady:!1,_markerClusterer:null,_markerClustererType:null,_clusterCache:{},_directions:null,_directionMarkers:[],_lastAction:{fn:null,args:[]},isDefaultClusterStyle:!0,_clusterStyle:[{url:bm.config.dealerLocator.inlineMap.icons.pinCluster.url,
width:bm.config.dealerLocator.inlineMap.icons.pinCluster.width+bm.config.dealerLocator.pinCluster.offsetWidth,height:bm.config.dealerLocator.inlineMap.icons.pinCluster.height+bm.config.dealerLocator.pinCluster.offsetHeight,anchor:bm.config.dealerLocator.pinCluster.anchor,textColor:"#333332",textSize:bm.config.dealerLocator.pinCluster.textSize}],_clusterStyleUnselected:[{url:bm.config.dealerLocator.inlineMap.icons.pinClusterUnselected.url,width:bm.config.dealerLocator.inlineMap.icons.pinClusterUnselected.width+
bm.config.dealerLocator.pinCluster.offsetWidth,height:bm.config.dealerLocator.inlineMap.icons.pinClusterUnselected.height+bm.config.dealerLocator.pinCluster.offsetHeight,anchor:bm.config.dealerLocator.pinCluster.anchor,textColor:"#757777",textSize:bm.config.dealerLocator.pinCluster.textSize}],initialize:function(c){bm.config.dealerLocator.staticMap.defaultConfig=this.defaultConfig;_.bindAll.apply(_,[this].concat(_.functions(this)));var d=this;this._mapIsInline=!0;this.collection=a.mapMarkers;_.each(bm.config.dealerLocator.staticMap.icons,
function(a,b){"http"===a.slice(0,4)&&(d.staticDefaultPins[b]={icon:encodeURIComponent(a)})});this.listenTo(a.vent,"app:action",function(){this.isDefaultClusterStyle||(this.isDefaultClusterStyle=!0,this._markerClusterer.setStyles(this._clusterStyle))});this.listenTo(a.vent,"resultitem:active",function(a){this.isDefaultClusterStyle&&(this.isDefaultClusterStyle=!1,this._markerClusterer.setStyles(this._clusterStyleUnselected))});this.listenTo(a.vent,"resultitem:inactive",function(a){this.isDefaultClusterStyle||
(this.isDefaultClusterStyle=!0,this._markerClusterer.setStyles(this._clusterStyle))});this.listenTo(a,"layoutChange",function(){this._mapInitialized&&this.mapService.triggerMapEvent("resize")});this.listenTo(a.vent,"resultinfo:filter:change",function(a){this.isDefaultClusterStyle||(this.isDefaultClusterStyle=!0,this._markerClusterer.setStyles(this._clusterStyle));this.filterMarkerCluster(a)});this.listenTo(a.vent,"search:byterm:completed search:bydealer:completed",function(a,b){this.showNearest(_.invoke(b,
"get","latlng"))});this.listenTo(a.vent,"app:action",function(a){this.removeDirections()});this.listenTo(a.vent,"app:action:globalmenu regionmenu:forwards",function(c){b.log("app:action:globalMenu",c);var d=[];c&&(c=a.module("dealerDataManager").getRegionById(c))&&_.each(c.countries,function(a){d=d.concat(a.markerPos)});0<d.length?this.showNearest(d):this.fitToWorld()});this.listenTo(a.vent,"regionmenu:backwards",this.fitToWorld);this.listenTo(a.vent,"mapview:showdirections",this.directionsService);
this.listenTo(a.vent,"resultitem:clicked marker:zoomin",this.modelSelected);this.listenTo(a.vent,"search:bycountry:completed",function(a,b){this.showNearest(a.bounds||_.invoke(b,"get","latlng"))});b(document).on(bm.config.breakPoints.eventName,this.resizeHandler)},fitToWorld:function(){b.log("MapView.fitToWorld",this._mapReady);if(this._mapReady)this.mapService.fitToWorld();else this.onMapReady(function(){this.mapService.fitToWorld()})},hideMap:function(){this.ui.staticMap.hide();this.ui.inlineMap.hide()},
lastAction:function(a){this._lastAction.fn=a;this._lastAction.args=Array.prototype.slice.call(arguments,1,arguments.length)},setMapLink:function(a){if(bm.config.dealerLocator.mapPositionUrl){var b=a.position?bm.config.dealerLocator.mapPositionUrl:bm.config.dealerLocator.mapDirectionsUrl;b=b.replace(/%(\w+)%/g,function(b,c){return encodeURIComponent(a[c])||""});this.ui.staticMapLink.attr("href",b)}},showStatic:function(c){if(!c.markers)return b.log("GoogleMapView.showStatic: missing property 'markers' in options",
c),null;_.isArray(c.markers)||(c.markers=[c.markers]);c=_.extend({},a.config.staticMap.defaultConfig,c);c=f.getStaticMapUrl(c);null!==c&&(this.ui.staticMapView.attr("src",c),this.ui.staticMap.show())},toggleLoading:function(a){this.ui.loader.toggle(a)},getMapConfig:function(){return{zoom:5,minZoom:3,maxZoom:17,scrollwheel:!1}},appendHtml:function(a,b,c){},onMapReady:function(){var a=Array.prototype.slice.call(arguments);if(!(1>a.length)){var b=a.shift();this.listenTo(this,"map:ready",function(){b.apply(this,
a)},this)}},modelSelected:function(a){b.log("MapView.modelSelected",this._mapReady);if(this._mapIsInline&&!this._mapReady)return this.onMapReady(this.modelSelected,a);this.lastAction(this.modelSelected,a);this.removeDirections();var c=a.get("latlng");this._mapIsInline?(this.mapService.setZoom(17),this.mapService.panTo(c)):(this.setMapLink({position:c.lat+","+c.lng,name:a.get("dealerName"),zoom:17}),this.showStatic({zoom:17,markers:{position:c,style:this.staticDefaultPins.pin}}))},fitMap:function(){if(!this._mapReady)return this.onMapReady(this.fitMap);
this.lastAction(this.fitMap);this.removeDirections();this._mapIsInline?this._markerClusterer.fitMapToMarkers():this.ui.staticMap.hide()},createMap:function(){if(this._mapIsInline){if(!this._mapInitialized){var b=this.getMapConfig();this._mapReady=!1;this.mapService=new l(this.ui.canvas[0],b,this);a.map=this.mapService.getMap();this.filterMarkerCluster();this._markerClusterer.fitMapToMarkers();this._mapInitialized=!0}}else this.ui.inlineMap.hide()},filterMarkerCluster:function(b){if(this._mapIsInline){b||
(b=a.appState.get("types")||a.appState.get("defaultTypes")||[]);var c=b.sort().join();if(c!==this._markerClustererType||null===this._markerClusterer){this._markerClustererType=c;var f=[];this.collection.each(function(a){var c=a.get("gmarker");0===b.length||a.hasAtLeastOneType(b)?f.push(c):c.setMap(null)});this._markerClusterer&&(this._markerClusterer.cluster.clearMarkers(),this._markerClusterer.cluster=null);this._markerClusterer=new d(this.mapService,f,{gridSize:bm.config.dealerLocator.gridSize,
maxZoom:bm.config.dealerLocator.maxZoom,styles:this._clusterStyle})}}},hideMarkers:function(){this._markerClusterer.hide();a.currentPosView.hide()},showMarkers:function(){this._markerClusterer.show();a.currentPosView.show()},resizeHandler:function(a,b){var c;a=this._mapIsInline;b||(b=bm.bps.getBreakpoint());this._mapIsInline=1<b;this._mapIsInline!==a&&(this.ui.inlineMap.toggle(this._mapIsInline),a||(this._mapInitialized?this.mapService.triggerMapEvent("resize"):this.createMap()),"function"===typeof this._lastAction.fn&&
this._lastAction.fn.apply(this,this._lastAction.args),this._mapIsInline&&this.ui.staticMap.hide());this._mapReady&&(a=this.mapService.getZoom(),2.1>=b?c=_.extend(this.getMapConfig(),{minZoom:bm.config.dealerLocator.zoomLevel.tablet,zoom:a}):3.3>b?c=_.extend(this.getMapConfig(),{minZoom:bm.config.dealerLocator.zoomLevel.desktop,zoom:a}):3.3<=b&&(c=_.extend(this.getMapConfig(),{minZoom:bm.config.dealerLocator.zoomLevel.largeDesktop,zoom:a})),this.mapService.setOptions(c))},onRender:function(){bm.config.dealerLocator.mapPositionUrl||
this.ui.staticMapLink.hide();this.onMapReady(this.resizeHandler);this.createMap()},showNearest:function(c,d){b.log("show nearest");this.lastAction(this.showNearest,c,d);this.removeDirections();if(this._mapIsInline){var e=a.currentPosView.model;e&&!d&&c.push(e.getPosition());if(0!==c.length)if(d=function(a){this.mapService.fitTo(a)},this._mapReady)this.mapService.fitTo(c);else this.onMapReady(d,c)}else this.ui.staticMap.hide()},removeDirections:function(){null!==this._directions&&(this._directions.setMap(null),
this._directions=null,this.showMarkers());var a;if(0<(a=this._directionMarkers.length))for(;0<a;a--)this._directionMarkers.pop().setMap(null)},directionsService:function(c,d){if(window.google){this.toggleLoading(!0);c=new google.maps.LatLng(c.lat,c.lng);d=new google.maps.LatLng(d.lat,d.lng);d={origin:c,destination:d,travelMode:google.maps.TravelMode.DRIVING};var e=this;(new google.maps.DirectionsService).route(d,function(c,d){b.log("directionsService.route",c,d);switch(d){case google.maps.DirectionsStatus.OK:c.routes=
c.routes.slice(0,1);d=0;var f=c.routes[0].legs;var g=0;for(var h=f.length;g<h;++g)d+=f[g].distance.value;d=g=d/1E3;g*=bm.i18n.dealerLocator.unitConversion||1;c.routes[0].totalDistance=d;c.routes[0].totalDistanceConverted=g.toFixed(2);e.showDirections(f[0],f[f.length-1],c);a.vent.trigger("directions:done",c.routes[0]);break;default:b.log("GoogleMapView.directionsService: DirectionsService responses with an error",d),a.vent.trigger("directions:error",d)}e.toggleLoading(!1)})}},showDirections:function(b,
c,d){this.lastAction(this.showDirections,b,c,d);this._mapIsInline?(this.removeDirections(),this.hideMarkers(),this._directionMarkers.push(new google.maps.Marker({position:b.start_location,title:b.start_address,icon:bm.config.dealerLocator.inlineMap.icons.pinOrigin.url,iconWidth:bm.config.dealerLocator.inlineMap.icons.pinOrigin.width,iconHeight:bm.config.dealerLocator.inlineMap.icons.pinOrigin.height,map:a.map,clickable:!1})),this._directionMarkers.push(new google.maps.Marker({position:c.end_location,
title:c.end_address,icon:bm.config.dealerLocator.inlineMap.icons.pinDestination.url,iconWidth:bm.config.dealerLocator.inlineMap.icons.pinDestination.width,iconHeight:bm.config.dealerLocator.inlineMap.icons.pinDestination.height,map:a.map,clickable:!1})),this._directions=new google.maps.DirectionsRenderer({suppressMarkers:!0,map:a.map,directions:d}),this.mapService.triggerMapEvent("resize")):this.showStatic({markers:[{position:{lat:b.start_location.lat(),lng:b.start_location.lng()},style:this.staticDefaultPins.pinOrigin},
{position:{lat:c.end_location.lat(),lng:c.end_location.lng()},style:this.staticDefaultPins.pinDestination}],path:d.routes[0].overview_path})}})});
define("dealerlocator/views/DetailsHeadView",["require","marionette","../app","../templates"],function(g){var b=g("marionette"),a=g("../app"),f=g("../templates");return b.ItemView.extend({getTemplate:function(){return this.hasData?f.detailsHead:!1},className:"by_dealer_details_head",events:{"click .by_dealer_info_direction":"getdirection"},loadingClass:"by_loading",hasData:!1,initialize:function(b){this.listenTo(a.vent,"department:completed",function(a){this.hasData=!0;this.model=a;this._prepareRequestUrl();
this.render()})},_prepareRequestUrl:function(){if(!this.model.get("requestUrl")){var a=this.model.get("addresses");_.isArray(a)&&0<a.length&&this.model.set("requestUrl",a[0].requestUrl)}},_analyzeOpeningHours:function(a){if(a){var b=((new Date).getDay()+6)%7;_.each(a,function(a,d){d===b?a.active=!0:delete a.active;a.closed?(delete a.periods,a.closed=1):delete a.closed})}},onRender:function(){this.$el.toggleClass(this.loadingClass,!this.hasData);navigator.geolocation||this.$el.find(".by_dealer_info_direction").hide()},
getdirection:function(b){a.vent.trigger("getdirection:clicked",this.model)}})});
define("dealerlocator/views/DirectionView","require jquery ../app ../services/MapUtilsStub marionette ../templates".split(" "),function(g){var b=g("jquery"),a=g("../app"),f=g("../services/MapUtilsStub"),l=g("marionette"),d=g("../templates");return l.ItemView.extend({className:"by_dealer_direction_bar",renderTemplate:!1,getTemplate:function(){return this.renderTemplate?d.directions:!1},ui:{location:".by_dealer_direction_location",origin:"#direction_origin",destination:"#direction_destination",error:"#direction_error"},
_loadingClass:"by_loading",initialize:function(c){this.origin=c.origin||null;(this.destination=c.destination)?(this.listenTo(a.vent,"getdirection:clicked",this.searchRoute),this.listenTo(a.vent,"directions:error",function(b){a.inlineError({el:this.ui.error,message:a.i18n.error.googleDirectonsService,errCode:b})}),c.autoStart&&(this.renderTemplate=!0,this.once("render",this.searchRoute))):b.log("DirectionView","destination not defined",this.destination)},searchRoute:function(){b.log("DirectionView.searchRoute");
this.renderTemplate||(this.renderTemplate=!0,this.render());this.ui.origin.text(a.i18n.searchBar.searchPositionState);this.ui.location.addClass(this._loadingClass);this.ui.destination.text(this.destination.get("dealerName"));var c=this;f.getCurrentPosition().always(function(){c.ui.location.removeClass(c._loadingClass)}).done(function(b,d){c.ui.origin.text(a.i18n.searchBar.currentLocation);a.vent.trigger("mapview:showdirections",{lat:b,lng:d},c.destination.get("latlng"))}).fail(function(d){b.log("DirectionView",
"getCurrentPosition failed, status",d);a.inlineError({el:c.ui.error,message:a.i18n.error.geolocation,errCode:d,retryHandler:b.proxy(c.searchRoute,c)})})}})});
define("dealerlocator/views/CurrentMarkerView",["require","../app","marionette"],function(g){var b=g("../app");return g("marionette").ItemView.extend({initialize:function(a){this.listenTo(b.vent,"positionbyterm:done",this._setMarker);this.listenTo(b.vent,"currentposition:remove",function(){this.close()});this.listenTo(b.vent,"app:action",this.close)},_setMarker:function(a){this.setModel(a.marker)},hide:function(){this.model&&null!==this.model&&this.model.setVisible(!1)},show:function(){this.model&&
null!==this.model&&this.model.setVisible(!0)},setModel:function(a){this.close();this.model=a;this.render()},close:function(){this.model&&null!==this.model&&(this.model.setMap(null),this.model=null)},hasModel:function(){return this.model&&null!==this.model},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);this.model.setMap(b.map);this.model.setVisible(!0);this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);
return this}})});
define("dealerlocator/views/DetailsDepartmentView",["require","marionette","../app","../utils","../templates"],function(g){var b=g("marionette"),a=g("../app"),f=g("../utils"),l=g("../templates");return b.ItemView.extend({getTemplate:function(){return this.hasData?l.detailsDepartment:!1},className:"by_dealer_details_row",loadingClass:"by_loading",hasData:!1,initialize:function(b){this.listenTo(a.vent,"department:completed",function(a){this.hasData=!0;this.model=this._analyzeModel(a);this.render()})},
_analyzeOpeningHours:function(a){if(a){var b=((new Date).getDay()+6)%7;_.each(a,function(a,c){c===b?a.active=!0:delete a.active;a.appointments?(delete a.periods,delete a.closed,a.appointment=1):a.closed?(delete a.periods,a.closed=1):delete a.closed})}},onRender:function(){this.$el.toggleClass(this.loadingClass,!this.hasData)},_analyzeModel:function(a){var b=this,d=a.get("addresses");_.each(d,function(a){if(a=a.departments)for(var c=0,d=a.length;c<d;c++)b._analyzeOpeningHours(a[c].openingHours),a[c].phone&&
(a[c].formattedPhone=f.formatPhone(a[c].phone))});return a},getdirection:function(a){this.trigger("getdirection:clicked",this.model)}})});
define("dealerlocator/views/ResultInfoView",["require","jquery","marionette","../app","../templates"],function(g){var b=g("jquery"),a=g("marionette"),f=g("../app");g=g("../templates");return a.ItemView.extend({template:g.resultInfo,className:"by_dealer_search_info",ventPrefix:"resultinfo",activeClass:"by_active",ui:{detail:".by_dealer_search_info_detail",filter:".by_ds_filter",filterItems:".by_ds_filter__list_item input",filterTitle:".by_ds_filter__title",filterWrapper:".by_dealer_search_filter",
filterCheckboxes:".by_js_ds_checkbox",emptyResult:".by_dealer_empty_result",mobileFilterBadge:".by_ds_filter__badge"},events:{"click @ui.filterTitle":"onFilterTitleClick","click @ui.filter":"onFilterClick","change @ui.filter":"onFilterChange"},detailText:bm.i18n.dealerLocator.resultInfo.detailText,templateHelpers:{filterOptions:[]},initialize:function(){_.bindAll(this,"render");this._initTemplateHelpers();this._bindEvents()},scrollToFilterWrapper:function(){if(this._isRendered){var a=this.ui.filterWrapper.position(),
d=b(document).scrollTop();a.top<d&&b("html,body").animate({scrollTop:a.top})}},updateDetail:function(a,b){a?(a=(0===b?this.detailText.empty:1===b?this.detailText.one:this.detailText.multi).replace("{count}",b).replace("{term}",a),this.ui.detail.text(a)):this.ui.detail.text("")},onRender:function(){this._highlightActive(f.appState.get("type")||this._getSelectedTypes());this.ui.mobileFilterBadge.text(this.ui.filterCheckboxes.filter(":checked").length)},showEmpty:function(){this.ui.emptyResult.toggle(0===
this.collection.length)},onFilterTitleClick:function(){this.ui.filter.toggleClass("by_ds_filter--open")},onFilterClick:function(a){"INPUT"!==a.target.nodeName||a.target.checked||0!==this.ui.filterCheckboxes.filter(":checked").length||a.preventDefault()},onFilterChange:function(a){a=b(a.target);var d=this.ui.filterCheckboxes.not(a);a.data("exclusive")?d.prop("checked",!1):d.filter("[data-exclusive\x3d'true']").prop("checked",!1);d=this._getSelectedTypes();this.ui.mobileFilterBadge.text(d.length);b.log("ResultInfoView.clickFilter",
a.val());f.vent.trigger(this.ventPrefix+":filter:change",d)},_initTemplateHelpers:function(){var a=[];this.templateHelpers.filterOptions=bm.config.dealerLocator.filterOptions.filter(function(a){return a.id in bm.i18n.dealerLocator.filterOptions}).map(function(b){var c={title:bm.i18n.dealerLocator.filterOptions[b.id],type:b.id,selected:b.initial,exclusive:b.exclusive};b.initial&&a.push(c.type);return c});f.appState.set("defaultTypes",a.sort())},_bindEvents:function(){this.listenTo(f.vent,"search:byterm:completed",
function(a,b){a.match(/(-?\d+.\d+),(-?\d+.\d+)/)&&(a=f.i18n.searchBar.currentLocation);this.updateDetail(a,b.length)});this.listenTo(f.vent,"search:bycountry:completed",function(a,b){this.updateDetail(a.name,b.length);this.scrollToFilterWrapper()});this.listenTo(f.actions,"globalMenu",this.scrollToFilterWrapper.bind(this))},_highlightActive:function(a){this.ui.filterItems.each(function(){this.checked=-1<a.indexOf(this.value)});this.ui.mobileFilterBadge.text(this.ui.filterItems.filter(":checked").length)},
_getSelectedTypes:function(){return this.ui.filterItems.filter(":checked").map(function(){return this.value}).toArray().sort()}})});
define("dealerlocator/views/MobileGlobalButtonView",["require","../templates","../app","marionette"],function(g){var b=g("../templates"),a=g("../app");return g("marionette").ItemView.extend({template:b.mobile_global_button,linkTitle:"",events:{"click .by_dealer_nav_global_dealer_bottom":"handleClick"},serializeData:function(){return{title:this.linkTitle}},initialize:function(b){this.linkTitle=a.i18n.title[a.config.country]},handleClick:function(b){b.preventDefault();a.actions.triggerMethod("globalMenu")}})});
define("dealerlocator/appRunner","require jquery ./app ./routers/AppRouter ./AppActions ./controllers/DealerDataManager ./models/ResultCollection ./models/AppState ./views/BreadcrumbView ./views/SearchFormView ./views/RegionMenuView ./views/ResultView ./views/MapView ./views/DetailsHeadView ./views/DirectionView ./views/CurrentMarkerView ./views/DetailsDepartmentView ./views/ResultInfoView ./views/MobileGlobalButtonView".split(" "),function(g){var b=g("jquery"),a=g("./app"),f=g("./routers/AppRouter"),
l=g("./AppActions"),d=g("./controllers/DealerDataManager"),c=g("./models/ResultCollection"),h=g("./models/AppState"),e=g("./views/BreadcrumbView"),m=g("./views/SearchFormView"),n=g("./views/RegionMenuView"),p=g("./views/ResultView"),r=g("./views/MapView"),w=g("./views/DetailsHeadView"),v=g("./views/DirectionView"),z=g("./views/CurrentMarkerView"),C=g("./views/DetailsDepartmentView"),k=g("./views/ResultInfoView"),y=g("./views/MobileGlobalButtonView");a.module("dealerDataManager",{moduleClass:d,config:a.dataConfig});
a.on("before:start",function(a){this.viewRef={SearchFormView:m,RegionMenuView:n,ResultInfoView:k,ResultView:p,DetailsHeadView:w,DetailsDepartmentView:C,MapView:r,DirectionView:v}});a.on("start",function(c){c||(c={});a.module("dealerDataManager").on("init:success",function(){this.app.triggerMethod("run",c);b.log("appRunner","init:success",this)}).on("init:error",function(){this.app.triggerMethod("fail");b.log("appRunner","init:error",this)}).start()});a.on("run",function(a){this.currentPosView=new z;
this.mapMarkers=this.module("dealerDataManager").get("markers");this.resultMarkers=new c;a=b("meta[name\x3dpagebase]").attr("content");b.log("AppRouter root:",a);Backbone.history.start({pushState:this.config.usePushState,root:a,silent:!0});this.config.usePushState=Backbone.history._hasPushState&&Backbone.history._wantsPushState;this.config.appBase=this.config.usePushState?Backbone.history.root:"#";this.config.countryCookieName&&(a=bm.utils.getCookie(this.config.countryCookieName))&&(this.config.userCountryCode=
a.toUpperCase());this.appState=new h;this.actions=new l;this.router=new f({controller:this.actions});this.breadcrumb=new e;a=new y;a.render();this.layout.$el.find("#by_dealer_mobile_global").html(a.$el);a=new y;a.render();this.layout.$el.find("#by_dealer_global_button").html(a.$el);Backbone.history.loadUrl()});return a});"function"===typeof bm_jquery&&define("jquery",function(){return bm_jquery});"object"===typeof Handlebars&&define("handlebars",function(){return Handlebars});requirejs.config(bm.config.dealerLocator.requirejs);
define("dealerlocator/main",["require","jquery","./services/MapUtilsStub"],function(g){var b=g("jquery"),a=g("./services/MapUtilsStub"),f=bm.config.dealerLocator.mapServiceConfig,l=function(){a.loadApi("apiLoaded",function(){b.log("API could not be loaded. Check your internet connection.")})};window.apiLoaded=function(){b.log("api successfully loaded");var a=f[bm.config.dealerLocator.mapService],c;for(c in a)a.hasOwnProperty(c)&&(bm.config.dealerLocator[c]&&"object"===typeof a[c]?b.extend(bm.config.dealerLocator[c],
a[c]):bm.config.dealerLocator[c]=a[c]);g(["./appRunner"],function(a){a.start({i18n:bm.i18n.dealerLocator,config:bm.config.dealerLocator})})};"google"===bm.config.dealerLocator.mapService?bm.utils.getConsentManagementService().then(function(a){if(a&&a.isEnabled){var c=function(c){var d=b("#by_dealer_locator");b('\x3cdiv class\x3d"by_dealer_locator_consent_placeholder"\x3e\x3c/div\x3e').appendTo(d);d.addClass("by-state-consent-required");a.appendBlockOverlay(d[0],c||{})};a.checkConsent("google_maps").then(function(a){a?
l():c()}).catch(function(){c({error:!0})})}else l()}):l()});define("dealerlocator/services/baidu/Autocomplete",["require"],function(g){return{}});
define("dealerlocator/services/baidu/Geocoder",["require","jquery"],function(g){var b=g("jquery");return{getLocation:function(a,f){var g=b.Deferred();a=new BMap.Point(f,a);(new BMap.Geocoder).getLocation(a,function(a){a?g.resolve(a):g.reject(this.STATUS_ERROR)});return g.promise()},getLatLng:function(a){b.log("Geocoder.getLatLng",a);var f=b.Deferred(),g=this;(new BMap.Geocoder).getPoint(a,function(d){b.log("Geocoder.getLatLng [done]",a,d);d?f.resolve({lat:d.lat,lng:d.lng}):f.reject(g.STATUS_ERROR)});
return f.promise()}}});
define("dealerlocator/services/baidu/Map",["jquery"],function(g){return{currentCenter:null,init:function(){var b=this.options.zoom||8;this.map=new BMap.Map(this.el,this.options);this.map.addControl(new BMap.NavigationControl);this.options.scrollwheel?this.map.enableScrollWheelZoom():this.map.disableScrollWheelZoom();var a=this;this.map.addEventListener("load",function(b){setTimeout(function(){a.context._mapReady=!0;a.context.trigger("map:ready")},100)});this.map.addEventListener("moveend",function(b){a.currentCenter=
b.target.getCenter()});this.map.addEventListener("zoomend",function(b){a.currentCenter=b.target.getCenter()});g(window).on("resize",bm.utils.debounce(g.proxy(this._handleResize,this),100));this.map.centerAndZoom(new BMap.Point(121.487899,31.249162),b)},_handleResize:function(b){null!==this.currentCenter&&this.map.setCenter(this.currentCenter)},_resizeTimeout:function(){setTimeout(g.proxy(this._handleResize,this),50)},triggerMapEvent:function(b){this.map.dispatchEvent(b)},setOptions:function(b){this.options=
b;b.minZoom&&this.map.setMinZoom(b.minZoom);b.maxZoom&&this.map.setMaxZoom(b.maxZoom);b.zoom&&this.map.setZoom(b.zoom)},fitTo:function(b){for(var a=[],f=0,g=b.length;f<g;f++)a.push(new BMap.Point(b[f].lng,b[f].lat));this.map.setViewport(a);this._resizeTimeout()},fitToWorld:function(){this.map.centerAndZoom(new BMap.Point(113.72474151633,34.778646592175),1);this._resizeTimeout()},panTo:function(b){b=new BMap.Point(b.lng,b.lat);this.map.panTo(b);this._resizeTimeout()}}});
define("dealerlocator/services/baidu/MapUtils",["jquery"],function(g){return{stringifyOption:function(b,a){for(var f=[],g=0,d=a.length;g<d;g++)f.push(b[a[g]]?b[a[g]]:"");return f.join(",")},stringifyMarkerStyle:function(b){return b?b.icon?"-1,"+b.icon+",-1":this.stringifyOption(b,["size","label","color"]):""},stringifyPathStyle:function(b){return b?this.stringifyOption(b,["color","weight","opacity"]):""},getStaticMapUrl:function(b){var a=this.stringifyMarkerStyle(b.markerStyle),f=[],l=[],d=this;_.each(b.markers,
function(b){if(b.position){var c=b.style?d.stringifyMarkerStyle(b.style):a;f.push(b.position.lng+","+b.position.lat);l.push(c)}});var c=[];c.push("width\x3d"+b.width);c.push("height\x3d"+b.height);b.zoom&&c.push("zoom\x3d"+b.zoom);c.push("markers\x3d"+f.join("|"));c.push("markerStyles\x3d"+l.join("|"));b.scale&&c.push("scale\x3d"+b.scale);c=bm.config.dealerLocator.staticMap.url+c.join("\x26");if(b.path&&b.pathStyle){for(var h="\x26path\x3d",e=0,m=b.path.length;e<m;e++)0<e&&(h+=";"),h+=b.path[e].lng+
","+b.path[e].lat;b.pathStyle&&(h+="\x26pathStyle\x3d"+this.stringifyPathStyle(b.pathStyle));c.length+h.length<=bm.config.dealerLocator.staticMap.maxUrlLength?c+=h:g.log("encoding string too long: ","URL \x3d "+c.length,", PATH \x3d "+h.length)}return c},getCurrentPosition:function(b){var a=g.Deferred(),f=new BMap.Geolocation;f.getCurrentPosition(function(b){if(null!==b)a.resolve(b.point.lat,b.point.lng);else{b=f.getStatus();var d=null;switch(b){case BMAP_STATUS_PERMISSION_DENIED:d="PERMISSION_DENIED";
break;case BMAP_STATUS_UNKNOWN_LOCATION:case BMAP_STATUS_SERVICE_UNAVAILABLE:d="POSITION_UNAVAILABLE";break;case BMAP_STATUS_TIMEOUT:d="TIMEOUT"}g.log("MapUtils.getCurrentPosition: [error] "+b+", "+d);a.reject(d)}},b);return a.promise()},createIcon:function(b){var a=new BMap.Size(b.width,b.height);return new BMap.Icon(b.url,a)}}});
define("dealerlocator/services/baidu/MapMarker",["require","./MapUtils"],function(g){var b=g("./MapUtils");return{init:function(){var a=new BMap.Point(this.lng,this.lat);this.options.icon&&(this.options.icon=b.createIcon(this.options.icon));this.options.enableClicking=this.options.clickable;this.options.enableDragging=this.options.draggable;this.marker=new BMap.Marker(a,this.options)},setAnimation:function(a){switch(a){case "bounce":this.marker.setAnimation(BMAP_ANIMATION_BOUNCE);break;case "drop":this.marker.setAnimation(BMAP_ANIMATION_DROP)}},
addEventListener:function(a,b){this.marker.addEventListener(a,b)},setVisible:function(a){a!==this.marker.isVisible()&&(a?this.marker.show():this.marker.hide())},setIcon:function(a){this.marker.setIcon(a)},getIcon:function(){return this.marker.getIcon()},setMap:function(a){a?a.addOverlay(this.marker):this.marker.hide()},getPosition:function(){var a=this.marker.getPosition();return{lat:a.lat,lng:a.lng}}}});
define("dealerlocator/services/baidu/MarkerClusterer",["jquery"],function(g){return{init:function(){this.cluster={clearMarkers:function(){}}}}});
define("dealerlocator/services/google/Autocomplete",["require","jquery"],function(g){var b=g("jquery");return{getSuggestions:function(a,f){var g=b.Deferred(),d=this;f||(f={});f.tagName||(f.tagName=this._tagName);a={input:a};f.types&&(a.types=f.types);f.location&&(a.location=new google.maps.LatLng(f.location.lat,f.location.lng));f.searchInBounds&&(delete a.location,a.bounds=new google.maps.LatLngBounds(new google.maps.LatLng(f.searchInBounds.sw_lat,f.searchInBounds.sw_lng),new google.maps.LatLng(f.searchInBounds.ne_lat,
f.searchInBounds.ne_lng)));(new google.maps.places.AutocompleteService(a)).getPlacePredictions(a,function(a,b){switch(b){case google.maps.places.PlacesServiceStatus.OK:g.resolve(d._convertResult(a,f));break;default:g.reject(b)}});return g.promise()},_latlng2object:function(a){return{lat:a.lat(),lng:a.lng()}},getDetailsFromItem:function(a){var f=b.Deferred(),g=this;if(a.place_id){var d=document.createElement("div");(new google.maps.places.PlacesService(d)).getDetails({placeId:a.place_id},function(a,
b){b!==google.maps.places.PlacesServiceStatus.OK?f.reject():(b={position:g._latlng2object(a.geometry.location),address:a.formatted_address},a.geometry.viewport&&(b.bounds={ne:g._latlng2object(a.geometry.viewport.getNorthEast()),sw:g._latlng2object(a.geometry.viewport.getSouthWest())}),f.resolve(b))})}else f.reject();return f.promise()},_convertResult:function(a,b){b=[];for(var f=0,d=a.length;f<d;f++){for(var c=a[f].description,g=a[f].matched_substrings.length-1,e,m;0<=g;)e=a[f].matched_substrings[g],
m=e.offset,e=m+e.length,c=c.substr(0,e)+"\x3c/strong\x3e"+c.substr(e),c=c.substr(0,m)+"\x3cstrong\x3e"+c.substr(m),g--;a[f].label=a[f].description;a[f].formatted_label=c;b.push(a[f])}return b}}});
define("dealerlocator/services/google/Geocoder",["require","jquery"],function(g){var b=g("jquery");return{getLocation:function(a,f){var g=b.Deferred();a=new google.maps.LatLng(a,f);(new google.maps.Geocoder).geocode({location:a},function(a,b){switch(b){case google.maps.GeocoderStatus.OK:g.resolve(a[0].formatted_address);break;default:g.reject(b)}});return g.promise()},getLatLng:function(a){var f=b.Deferred();(new google.maps.Geocoder).geocode({address:a},function(a,b){switch(b){case google.maps.GeocoderStatus.OK:b=
a[0].geometry.location;f.resolve({lat:b.lat(),lng:b.lng()},a[0].geometry.bounds);break;default:f.reject(b)}});return f.promise()}}});
define("dealerlocator/services/google/Map",["jquery"],function(g){return{init:function(){this.map=new google.maps.Map(this.el,this.options);var b=this;google.maps.event.addListenerOnce(b.map,"idle",function(){b.context._mapReady=!0;b.context.trigger("map:ready")});g(window).on("resize",function(a){a=b.map.getCenter();google.maps.event.trigger(b.map,"resize");b.map.setCenter(a)});this._initMapBounds()},_initMapBounds:function(){this.allowedBounds=new google.maps.LatLngBounds(new google.maps.LatLng(-85,
-122.591),new google.maps.LatLng(85,-122.333));var b=this;google.maps.event.addListener(this.map,"idle",function(){b._checkMapBounds()});google.maps.event.addListener(this.map,"drag",function(){b._checkMapBounds()})},_checkMapBounds:function(){var b=this.map.getBounds();if(!this.isValidBound(b)){var a=b.getNorthEast().lat(),f=b.getSouthWest().lat(),l=this.allowedBounds.getNorthEast().lat(),d=this.allowedBounds.getSouthWest().lat();if(a>l){g.log("google/Map.js _checkMapBounds","northern limit exceeds",
a,"\x3e",l);var c=new google.maps.LatLngBounds(new google.maps.LatLng(l,b.getNorthEast().lng()),b.getSouthWest())}else f<d&&(g.log("google/Map.js _checkMapBounds","southern limit exceeds",f,"\x3c",d),c=new google.maps.LatLngBounds(b.getNorthEast(),new google.maps.LatLng(d,b.getSouthWest().lng())));this.map.setCenter(new google.maps.LatLng(c.getCenter().lat(),this.map.getCenter().lng()))}},isValidBound:function(b){return this.allowedBounds.getNorthEast().lat()>b.getNorthEast().lat()&&this.allowedBounds.getSouthWest().lat()<
b.getSouthWest().lat()},triggerMapEvent:function(b,a){google.maps.event.trigger(this.map,b)},setOptions:function(b){this.map.setOptions(b)},fitTo:function(b){for(var a=new google.maps.LatLngBounds,f=0,g=b.length;f<g;f++)a.extend(new google.maps.LatLng(b[f].lat,b[f].lng));this.map.fitBounds(a)},fitToWorld:function(){this.map.panTo(new google.maps.LatLng(0,0));this.map.setZoom(1)},panTo:function(b){b=new google.maps.LatLng(b.lat,b.lng);this.map.panTo(b)}}});
define("dealerlocator/services/google/MapMarker",["require"],function(g){return{closeInfoWindow:function(){this.infoWindow&&this.infoWindow.close()},init:function(){var b=this;this.options.position=new google.maps.LatLng(this.lat,this.lng);this.marker=new google.maps.Marker(this.options);this.options.infoWindow&&(this.infoWindow=new google.maps.InfoWindow({content:this.options.infoWindow}),this.options.map&&google.maps.event.addListener(this.marker,"click",function(){b.infoWindow.open(b.options.map.getMap(),
b.marker)}))},boundsContains:function(b){return this.bounds&&b?this.bounds.contains(new google.maps.LatLng(b.lat,b.lng)):!1},setAnimation:function(b){switch(b){case "bounce":this.marker.setAnimation(google.maps.Animation.BOUNCE);break;case "drop":this.marker.setAnimation(google.maps.Animation.DROP)}},addEventListener:function(b,a){google.maps.event.addListener(this.marker,b,a)},setVisible:function(b){this.marker.setVisible(b)},setIcon:function(b){this.marker.setIcon(b)},getIcon:function(){return this.marker.getIcon()},
setMap:function(b){var a=this;this.marker.setMap(b);null!==this.infoWindow&&google.maps.event.addListener(this.marker,"click",function(){a.infoWindow.open(b,a.marker)})},getPosition:function(){var b=this.marker.getPosition();return{lat:b.lat(),lng:b.lng()}},computeDistanceTo:function(b){var a=new google.maps.LatLng(this.lat,this.lng);b=new google.maps.LatLng(b.lat,b.lng);return Math.round(google.maps.geometry.spherical.computeDistanceBetween(a,b))}}});
define("dealerlocator/services/google/MapUtils",["jquery"],function(g){return{stringifyMarkerStyle:function(b){return b?this.stringifyOption(b,":","|"):""},stringifyPathStyle:function(b){if(!b)return"";if(b.opacity&&b.color){var a=Math.round(256*b.opacity).toString(16).toUpperCase();1===a.length&&(a="0"+a);b.color+=a}delete b.opacity;return this.stringifyOption(b,":","|")},getStaticMapUrl:function(b){var a=this.stringifyMarkerStyle(b.markerStyle),f={},l=this;_.each(b.markers,function(b){b.position&&
(b.style=b.style?l.stringifyMarkerStyle(b.style):a,f[b.style]||(f[b.style]=[]),f[b.style].push(b.position.lat+","+b.position.lng))});b.markers=f;var d=[];d.push("size\x3d"+b.width+"x"+b.height);b.zoom&&d.push("zoom\x3d"+b.zoom);for(var c in b.markers)b.markers.hasOwnProperty(c)&&d.push("markers\x3d"+c+"|"+b.markers[c].join("|"));b.scale&&d.push("scale\x3d"+b.scale);d=bm.config.dealerLocator.staticMap.url+d.join("\x26");b.path&&b.pathStyle&&(c=this.encodePath(b.path),b.pathStyle=b.pathStyle?this.stringifyPathStyle(b.pathStyle)+
"|":"",b="\x26path\x3d"+b.pathStyle+"enc:"+encodeURIComponent(c),d.length+b.length<=bm.config.dealerLocator.staticMap.maxUrlLength?d+=b:g.log("encoding string too long: ","URL \x3d "+d.length,", PATH \x3d "+b.length));return d},encodePath:function(b){return google.maps.geometry.encoding.encodePath(b)},createIcon:function(b){var a=new google.maps.Size(b.width,b.height);return{url:b.url,size:a}}}});
function MarkerClusterer(g,b,a){this.extend(MarkerClusterer,google.maps.OverlayView);this.map_=g;this.markers_=[];this.clusters_=[];this.sizes=[53,56,66,78,90];this.styles_=[];this.ready_=!1;a=a||{};this.gridSize_=a.gridSize||60;this.minClusterSize_=a.minimumClusterSize||2;this.maxZoom_=a.maxZoom||null;this.styles_=a.styles||[];this.imagePath_=a.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_;this.imageExtension_=a.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_;this.zoomOnClick_=!0;void 0!=a.zoomOnClick&&
(this.zoomOnClick_=a.zoomOnClick);this.averageCenter_=!1;void 0!=a.averageCenter&&(this.averageCenter_=a.averageCenter);this.setupStyles_();this.setMap(g);this.prevZoom_=this.map_.getZoom();var f=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var a=f.map_.getZoom();f.prevZoom_!=a&&(f.prevZoom_=a,f.resetViewport())});google.maps.event.addListener(this.map_,"idle",function(){f.redraw()});b&&b.length&&this.addMarkers(b,!1)}
function Cluster(g){this.markerClusterer_=g;this.map_=g.getMap();this.gridSize_=g.getGridSize();this.minClusterSize_=g.getMinClusterSize();this.averageCenter_=g.isAverageCenter();this.center_=null;this.markers_=[];this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,g.getStyles(),g.getGridSize())}
function ClusterIcon(g,b,a){g.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.styles_=b;this.padding_=a||0;this.cluster_=g;this.center_=null;this.map_=g.getMap();this.sums_=this.div_=null;this.visible_=!1;this.setMap(this.map_)}MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m";MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png";
MarkerClusterer.prototype.extend=function(g,b){return function(a){for(var b in a.prototype)this.prototype[b]=a.prototype[b];return this}.apply(g,[b])};MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var g,b=0;g=this.sizes[b];b++)this.styles_.push({url:this.imagePath_+(b+1)+"."+this.imageExtension_,height:g,width:g})};
MarkerClusterer.prototype.fitMapToMarkers=function(){for(var g,b=this.getMarkers(),a=new google.maps.LatLngBounds,f=0;g=b[f];f++)a.extend(g.getPosition());this.map_.fitBounds(a)};MarkerClusterer.prototype.setStyles=function(g){this.styles_=g};MarkerClusterer.prototype.getStyles=function(){return this.styles_};MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_};
MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};MarkerClusterer.prototype.setMaxZoom=function(g){this.maxZoom_=g};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.calculator_=function(g,b){for(var a=0,f=g=g.length;0!==f;)f=parseInt(f/10,10),a++;return a=Math.min(a,b),{text:g,index:a}};
MarkerClusterer.prototype.setCalculator=function(g){this.calculator_=g};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.addMarkers=function(g,b){for(var a,f=0;a=g[f];f++)this.pushMarkerTo_(a);b||this.redraw()};MarkerClusterer.prototype.pushMarkerTo_=function(g){if(g.isAdded=!1,g.draggable){var b=this;google.maps.event.addListener(g,"dragend",function(){g.isAdded=!1;b.repaint()})}this.markers_.push(g)};
MarkerClusterer.prototype.addMarker=function(g,b){this.pushMarkerTo_(g);b||this.redraw()};MarkerClusterer.prototype.removeMarker_=function(g){var b=-1;if(this.markers_.indexOf)b=this.markers_.indexOf(g);else for(var a,f=0;a=this.markers_[f];f++)if(a==g){b=f;break}return-1==b?!1:(g.setMap(null),this.markers_.splice(b,1),!0)};MarkerClusterer.prototype.removeMarker=function(g,b){g=this.removeMarker_(g);return!b&&g?(this.resetViewport(),this.redraw(),!0):!1};
MarkerClusterer.prototype.removeMarkers=function(g,b){for(var a,f=!1,l=0;a=g[l];l++)a=this.removeMarker_(a),f=f||a;return!b&&f?(this.resetViewport(),this.redraw(),!0):void 0};MarkerClusterer.prototype.setReady_=function(g){this.ready_||(this.ready_=g,this.createClusters_())};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.getMap=function(){return this.map_};MarkerClusterer.prototype.setMap=function(g){this.map_=g};
MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};MarkerClusterer.prototype.setGridSize=function(g){this.gridSize_=g};MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinClusterSize=function(g){this.minClusterSize_=g};
MarkerClusterer.prototype.getExtendedBounds=function(g){var b=this.getProjection(),a=new google.maps.LatLng(g.getNorthEast().lat(),g.getNorthEast().lng()),f=new google.maps.LatLng(g.getSouthWest().lat(),g.getSouthWest().lng());a=b.fromLatLngToDivPixel(a);a.x+=this.gridSize_;a.y-=this.gridSize_;f=b.fromLatLngToDivPixel(f);f.x-=this.gridSize_;f.y+=this.gridSize_;a=b.fromDivPixelToLatLng(a);b=b.fromDivPixelToLatLng(f);return g.extend(a),g.extend(b),g};
MarkerClusterer.prototype.isMarkerInBounds_=function(g,b){return b.contains(g.getPosition())};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0);this.markers_=[]};MarkerClusterer.prototype.resetViewport=function(g){for(var b,a=0;b=this.clusters_[a];a++)b.remove();for(a=0;b=this.markers_[a];a++)b.isAdded=!1,g&&b.setMap(null);this.clusters_=[]};
MarkerClusterer.prototype.repaint=function(){var g=this.clusters_.slice();this.clusters_.length=0;this.resetViewport();this.redraw();window.setTimeout(function(){for(var b,a=0;b=g[a];a++)b.remove()},0)};MarkerClusterer.prototype.redraw=function(){this.createClusters_()};
MarkerClusterer.prototype.distanceBetweenPoints_=function(g,b){if(!g||!b)return 0;var a=(b.lat()-g.lat())*Math.PI/180,f=(b.lng()-g.lng())*Math.PI/180;g=Math.sin(a/2)*Math.sin(a/2)+Math.cos(g.lat()*Math.PI/180)*Math.cos(b.lat()*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);return 12742*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))};
MarkerClusterer.prototype.addToClosestCluster_=function(g){for(var b,a=4E4,f=null,l=(g.getPosition(),0);b=this.clusters_[l];l++){var d=b.getCenter();d&&(d=this.distanceBetweenPoints_(d,g.getPosition()),a>d&&(a=d,f=b))}f&&f.isMarkerInClusterBounds(g)?f.addMarker(g):(b=new Cluster(this),b.addMarker(g),this.clusters_.push(b))};
MarkerClusterer.prototype.createClusters_=function(){if(this.ready_){var g=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast());for(var b=this.getExtendedBounds(g),a=0;g=this.markers_[a];a++)!g.isAdded&&this.isMarkerInBounds_(g,b)&&this.addToClosestCluster_(g)}};Cluster.prototype.isMarkerAlreadyAdded=function(g){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(g);for(var b,a=0;b=this.markers_[a];a++)if(b==g)return!0;return!1};
Cluster.prototype.addMarker=function(g){if(this.isMarkerAlreadyAdded(g))return!1;if(this.center_){if(this.averageCenter_){var b=this.markers_.length+1,a=(this.center_.lat()*(b-1)+g.getPosition().lat())/b;b=(this.center_.lng()*(b-1)+g.getPosition().lng())/b;this.center_=new google.maps.LatLng(a,b);this.calculateBounds_()}}else this.center_=g.getPosition(),this.calculateBounds_();g.isAdded=!0;this.markers_.push(g);a=this.markers_.length;if(a<this.minClusterSize_&&g.getMap()!=this.map_&&g.setMap(this.map_),
a==this.minClusterSize_)for(b=0;a>b;b++)this.markers_[b].setMap(null);return a>=this.minClusterSize_&&g.setMap(null),this.updateIcon(),!0};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){for(var g,b=new google.maps.LatLngBounds(this.center_,this.center_),a=this.getMarkers(),f=0;g=a[f];f++)b.extend(g.getPosition());return b};Cluster.prototype.remove=function(){this.clusterIcon_.remove();this.markers_.length=0;delete this.markers_};
Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getMarkers=function(){return this.markers_};Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.calculateBounds_=function(){var g=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(g)};Cluster.prototype.isMarkerInClusterBounds=function(g){return this.bounds_.contains(g.getPosition())};Cluster.prototype.getMap=function(){return this.map_};
Cluster.prototype.updateIcon=function(){var g=this.map_.getZoom(),b=this.markerClusterer_.getMaxZoom();if(b&&g>b)for(b=0;g=this.markers_[b];b++)g.setMap(this.map_);else{if(this.markers_.length<this.minClusterSize_)return void this.clusterIcon_.hide();g=this.markerClusterer_.getStyles().length;g=this.markerClusterer_.getCalculator()(this.markers_,g);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.setSums(g);this.clusterIcon_.show()}};
ClusterIcon.prototype.triggerClusterClick=function(){var g=this.cluster_.getMarkerClusterer();google.maps.event.trigger(g,"clusterclick",this.cluster_);g.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())};
ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var g=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(g);this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var b=this;google.maps.event.addDomListener(this.div_,"click",function(){b.triggerClusterClick()})};
ClusterIcon.prototype.getPosFromLatLng_=function(g){g=this.getProjection().fromLatLngToDivPixel(g);return g.x-=parseInt(this.width_/2,10),g.y-=parseInt(this.height_/2,10),g};ClusterIcon.prototype.draw=function(){if(this.visible_){var g=this.getPosFromLatLng_(this.center_);this.div_.style.top=g.y+"px";this.div_.style.left=g.x+"px"}};ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none");this.visible_=!1};
ClusterIcon.prototype.show=function(){if(this.div_){var g=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(g);this.div_.style.display=""}this.visible_=!0};ClusterIcon.prototype.remove=function(){this.setMap(null)};ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)};
ClusterIcon.prototype.setSums=function(g){this.sums_=g;this.text_=g.text;this.index_=g.index;this.div_&&(this.div_.innerHTML=g.text);this.useStyle()};ClusterIcon.prototype.useStyle=function(){var g=Math.max(0,this.sums_.index-1);g=Math.min(this.styles_.length-1,g);g=this.styles_[g];this.url_=g.url;this.height_=g.height;this.width_=g.width;this.textColor_=g.textColor;this.anchor_=g.anchor;this.textSize_=g.textSize;this.backgroundPosition_=g.backgroundPosition};
ClusterIcon.prototype.setCenter=function(g){this.center_=g};
ClusterIcon.prototype.createCss=function(g){var b=[];b.push("background-image:url("+this.url_+");");b.push("background-position:"+(this.backgroundPosition_?this.backgroundPosition_:"0 0")+";");"object"==typeof this.anchor_?(b.push("number"==typeof this.anchor_[0]&&0<this.anchor_[0]&&this.anchor_[0]<this.height_?"height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;":"height:"+this.height_+"px; line-height:"+this.height_+"px;"),b.push("number"==typeof this.anchor_[1]&&0<this.anchor_[1]&&
this.anchor_[1]<this.width_?"width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;":"width:"+this.width_+"px; text-align:center;")):b.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");return b.push("cursor:pointer; top:"+g.y+"px; left:"+g.x+"px; color:"+(this.textColor_?this.textColor_:"black")+"; position:absolute; font-size:"+(this.textSize_?this.textSize_:11)+"px; font-family:Arial,sans-serif; font-weight:bold"),
b.join("")};window.MarkerClusterer=MarkerClusterer;MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker;MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers;MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers;MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers;MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator;MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize;
MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds;MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap;MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers;MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom;MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles;MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters;
MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers;MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw;MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker;MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers;MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport;MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint;MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator;
MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize;MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom;MarkerClusterer.prototype.setStyles=MarkerClusterer.prototype.setStyles;MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd;MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw;Cluster.prototype.getCenter=Cluster.prototype.getCenter;Cluster.prototype.getSize=Cluster.prototype.getSize;Cluster.prototype.getMarkers=Cluster.prototype.getMarkers;
ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd;ClusterIcon.prototype.draw=ClusterIcon.prototype.draw;ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove;define("googleclusterer",function(){});
define("dealerlocator/services/google/MarkerClusterer",["jquery","googleclusterer"],function(g){return{init:function(){var b=_.map(this.markers,function(a){return a.getMarker()});this.cluster=new MarkerClusterer(this.map.getMap(),b,this.options)},setStyles:function(b){this.cluster.setStyles(b);this.cluster.repaint()},fitMapToMarkers:function(){this.cluster.fitMapToMarkers();this.cluster.redraw()}}});require(["dealerlocator/main"]);