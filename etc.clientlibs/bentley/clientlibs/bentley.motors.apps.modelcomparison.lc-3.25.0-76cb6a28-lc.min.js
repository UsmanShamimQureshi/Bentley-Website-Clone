/*
 almond 0.3.2 Copyright jQuery Foundation and other contributors.
 Released under MIT license, http://github.com/requirejs/almond/LICENSE
 Includes BabySitter
 https://github.com/marionettejs/backbone.babysitter/

 Includes Wreqr
 https://github.com/marionettejs/backbone.wreqr/
*/
var requirejs,require,define;
(function(k){function f(a,b){var c,d;b=b&&b.split("/");var h=v.map,e=h&&h["*"]||{};if(a){a=a.split("/");var f=a.length-1;v.nodeIdCompat&&C.test(a[f])&&(a[f]=a[f].replace(C,""));"."===a[0].charAt(0)&&b&&(f=b.slice(0,b.length-1),a=f.concat(a));for(f=0;f<a.length;f++){var q=a[f];"."===q?(a.splice(f,1),--f):".."===q&&0!==f&&(1!==f||".."!==a[2])&&".."!==a[f-1]&&0<f&&(a.splice(f-1,2),f-=2)}a=a.join("/")}if((b||e)&&h){q=a.split("/");for(f=q.length;0<f;--f){var l=q.slice(0,f).join("/");if(b)for(d=b.length;0<
d;--d)if(c=h[b.slice(0,d).join("/")])if(c=c[l]){var m=c;var k=f;break}if(m)break;if(!t&&e&&e[l]){var t=e[l];var g=f}}!m&&t&&(m=t,k=g);m&&(q.splice(0,k,m),a=q.join("/"))}return a}function c(b,c){return function(){var d=y.call(arguments,0);"string"!==typeof d[0]&&1===d.length&&d.push(null);return a.apply(k,d.concat([b,c]))}}function l(a){return function(b){return f(b,a)}}function e(a){return function(b){d[a]=b}}function m(a){if(B.call(q,a)){var b=q[a];delete q[a];F[a]=!0;x.apply(k,b)}if(!B.call(d,a)&&
!B.call(F,a))throw Error("No "+a);return d[a]}function b(a){var b=a?a.indexOf("!"):-1;if(-1<b){var c=a.substring(0,b);a=a.substring(b+1,a.length)}return[c,a]}function u(a){return function(){return v&&v.config&&v.config[a]||{}}}var a,d={},q={},v={},F={},B=Object.prototype.hasOwnProperty,y=[].slice,C=/\.js$/;var w=function(a,c){a=b(a);var d=a[0];a=a[1];if(d){d=f(d,c);var h=m(d)}d?a=h&&h.normalize?h.normalize(a,l(c)):f(a,c):(a=f(a,c),a=b(a),d=a[0],a=a[1],d&&(h=m(d)));return{f:d?d+"!"+a:a,n:a,pr:d,p:h}};
var h={require:function(a){return c(a)},exports:function(a){var b=d[a];return"undefined"!==typeof b?b:d[a]={}},module:function(a){return{id:a,uri:"",exports:d[a],config:u(a)}}};var x=function(a,b,f,l){var v,u=[];var y=typeof f;l=l||a;if("undefined"===y||"function"===y){b=!b.length&&f.length?["require","exports","module"]:b;for(v=0;v<b.length;v+=1){var t=w(b[v],l);y=t.f;if("require"===y)u[v]=h.require(a);else if("exports"===y){u[v]=h.exports(a);var C=!0}else if("module"===y)var z=u[v]=h.module(a);
else if(B.call(d,y)||B.call(q,y)||B.call(F,y))u[v]=m(y);else if(t.p)t.p.load(t.n,c(l,!0),e(y),{}),u[v]=d[y];else throw Error(a+" missing "+y);}b=f?f.apply(d[a],u):void 0;a&&(z&&z.exports!==k&&z.exports!==d[a]?d[a]=z.exports:b===k&&C||(d[a]=b))}else a&&(d[a]=f)};requirejs=require=a=function(b,c,d,e,f){if("string"===typeof b)return h[b]?h[b](c):m(w(b,c).f);if(!b.splice){v=b;v.deps&&a(v.deps,v.callback);if(!c)return;c.splice?(b=c,c=d,d=null):b=k}c=c||function(){};"function"===typeof d&&(d=e,e=f);e?x(k,
b,c,d):setTimeout(function(){x(k,b,c,d)},4);return a};a.config=function(b){return a(b)};requirejs._defined=d;define=function(a,b,c){if("string"!==typeof a)throw Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]);B.call(d,a)||B.call(q,a)||(q[a]=[a,b,c])};define.amd={jQuery:!0}})();define("../../lib/almond",function(){});
(function(){function k(a){return function(n,b,c,g){b=x(b,g,4);var d=!A(n)&&h.keys(n),r=(d||n).length,p=0<a?0:r-1;3>arguments.length&&(c=n[d?d[p]:p],p+=a);for(var e=b,O=c;0<=p&&p<r;p+=a){var f=d?d[p]:p;O=e(O,n[f],f,n)}return O}}function f(a){return function(n,b,c){b=t(b,c);c=D(n);for(var g=0<a?0:c-1;0<=g&&g<c;g+=a)if(b(n[g],g,n))return g;return-1}}function c(a,b,c){return function(n,g,r){var p=0,e=D(n);if("number"==typeof r)0<a?p=0<=r?r:Math.max(r+e,p):e=0<=r?Math.min(r+1,e):r+e+1;else if(c&&r&&e)return r=
c(n,g),n[r]===g?r:-1;if(g!==g)return r=b(d.call(n,p,e),h.isNaN),0<=r?r+p:-1;for(r=0<a?p:e-1;0<=r&&r<e;r+=a)if(n[r]===g)return r;return-1}}function l(a,b){var n=J.length,c=a.constructor;c=h.isFunction(c)&&c.prototype||u;var g="constructor";for(h.has(a,g)&&!h.contains(b,g)&&b.push(g);n--;)g=J[n],g in a&&a[g]!==c[g]&&!h.contains(b,g)&&b.push(g)}var e=this,m=e._,b=Array.prototype,u=Object.prototype,a=b.push,d=b.slice,q=u.toString,v=u.hasOwnProperty,F=Array.isArray,B=Object.keys,y=Function.prototype.bind,
C=Object.create,w=function(){},h=function(a){if(a instanceof h)return a;if(!(this instanceof h))return new h(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=h),exports._=h):e._=h;h.VERSION="1.8.3";var x=function(a,b,g){if(void 0===b)return a;switch(null==g?3:g){case 1:return function(n){return a.call(b,n)};case 2:return function(n,g){return a.call(b,n,g)};case 3:return function(n,g,c){return a.call(b,n,g,c)};case 4:return function(n,
g,c,d){return a.call(b,n,g,c,d)}}return function(){return a.apply(b,arguments)}},t=function(a,b,g){return null==a?h.identity:h.isFunction(a)?x(a,b,g):h.isObject(a)?h.matcher(a):h.property(a)};h.iteratee=function(a,b){return t(a,b,Infinity)};var z=function(a,b){return function(n){var g=arguments.length;if(2>g||null==n)return n;for(var c=1;c<g;c++)for(var d=arguments[c],h=a(d),r=h.length,p=0;p<r;p++){var e=h[p];b&&void 0!==n[e]||(n[e]=d[e])}return n}},M=function(a){if(!h.isObject(a))return{};if(C)return C(a);
w.prototype=a;a=new w;w.prototype=null;return a},I=function(a){return function(b){return null==b?void 0:b[a]}},E=Math.pow(2,53)-1,D=I("length"),A=function(a){a=D(a);return"number"==typeof a&&0<=a&&a<=E};h.each=h.forEach=function(a,b,g){b=x(b,g);var n;if(A(a))for(g=0,n=a.length;g<n;g++)b(a[g],g,a);else{var c=h.keys(a);g=0;for(n=c.length;g<n;g++)b(a[c[g]],c[g],a)}return a};h.map=h.collect=function(a,b,g){b=t(b,g);g=!A(a)&&h.keys(a);for(var n=(g||a).length,c=Array(n),d=0;d<n;d++){var r=g?g[d]:d;c[d]=
b(a[r],r,a)}return c};h.reduce=h.foldl=h.inject=k(1);h.reduceRight=h.foldr=k(-1);h.find=h.detect=function(a,b,g){b=A(a)?h.findIndex(a,b,g):h.findKey(a,b,g);if(void 0!==b&&-1!==b)return a[b]};h.filter=h.select=function(a,b,g){var n=[];b=t(b,g);h.each(a,function(a,g,c){b(a,g,c)&&n.push(a)});return n};h.reject=function(a,b,g){return h.filter(a,h.negate(t(b)),g)};h.every=h.all=function(a,b,g){b=t(b,g);g=!A(a)&&h.keys(a);for(var c=(g||a).length,n=0;n<c;n++){var d=g?g[n]:n;if(!b(a[d],d,a))return!1}return!0};
h.some=h.any=function(a,b,g){b=t(b,g);g=!A(a)&&h.keys(a);for(var c=(g||a).length,n=0;n<c;n++){var d=g?g[n]:n;if(b(a[d],d,a))return!0}return!1};h.contains=h.includes=h.include=function(a,b,g,c){A(a)||(a=h.values(a));if("number"!=typeof g||c)g=0;return 0<=h.indexOf(a,b,g)};h.invoke=function(a,b){var g=d.call(arguments,2),c=h.isFunction(b);return h.map(a,function(a){var n=c?b:a[b];return null==n?n:n.apply(a,g)})};h.pluck=function(a,b){return h.map(a,h.property(b))};h.where=function(a,b){return h.filter(a,
h.matcher(b))};h.findWhere=function(a,b){return h.find(a,h.matcher(b))};h.max=function(a,b,g){var c=-Infinity,n=-Infinity,d;if(null==b&&null!=a){a=A(a)?a:h.values(a);for(var r=0,p=a.length;r<p;r++)g=a[r],g>c&&(c=g)}else b=t(b,g),h.each(a,function(a,g,h){d=b(a,g,h);if(d>n||-Infinity===d&&-Infinity===c)c=a,n=d});return c};h.min=function(a,b,g){var c=Infinity,n=Infinity,d;if(null==b&&null!=a){a=A(a)?a:h.values(a);for(var r=0,p=a.length;r<p;r++)g=a[r],g<c&&(c=g)}else b=t(b,g),h.each(a,function(a,g,h){d=
b(a,g,h);if(d<n||Infinity===d&&Infinity===c)c=a,n=d});return c};h.shuffle=function(a){a=A(a)?a:h.values(a);for(var b=a.length,g=Array(b),c=0,d;c<b;c++)d=h.random(0,c),d!==c&&(g[c]=g[d]),g[d]=a[c];return g};h.sample=function(a,b,g){return null==b||g?(A(a)||(a=h.values(a)),a[h.random(a.length-1)]):h.shuffle(a).slice(0,Math.max(0,b))};h.sortBy=function(a,b,g){b=t(b,g);return h.pluck(h.map(a,function(a,g,c){return{value:a,index:g,criteria:b(a,g,c)}}).sort(function(a,b){var g=a.criteria,c=b.criteria;if(g!==
c){if(g>c||void 0===g)return 1;if(g<c||void 0===c)return-1}return a.index-b.index}),"value")};var K=function(a){return function(b,g,c){var d={};g=t(g,c);h.each(b,function(c,n){n=g(c,n,b);a(d,c,n)});return d}};h.groupBy=K(function(a,b,g){h.has(a,g)?a[g].push(b):a[g]=[b]});h.indexBy=K(function(a,b,g){a[g]=b});h.countBy=K(function(a,b,g){h.has(a,g)?a[g]++:a[g]=1});h.toArray=function(a){return a?h.isArray(a)?d.call(a):A(a)?h.map(a,h.identity):h.values(a):[]};h.size=function(a){return null==a?0:A(a)?a.length:
h.keys(a).length};h.partition=function(a,b,g){b=t(b,g);var c=[],d=[];h.each(a,function(a,g,n){(b(a,g,n)?c:d).push(a)});return[c,d]};h.first=h.head=h.take=function(a,b,g){if(null!=a)return null==b||g?a[0]:h.initial(a,a.length-b)};h.initial=function(a,b,g){return d.call(a,0,Math.max(0,a.length-(null==b||g?1:b)))};h.last=function(a,b,g){if(null!=a)return null==b||g?a[a.length-1]:h.rest(a,Math.max(0,a.length-b))};h.rest=h.tail=h.drop=function(a,b,g){return d.call(a,null==b||g?1:b)};h.compact=function(a){return h.filter(a,
h.identity)};var G=function(a,b,g,c){var d=[],n=0;c=c||0;for(var p=D(a);c<p;c++){var e=a[c];if(A(e)&&(h.isArray(e)||h.isArguments(e))){b||(e=G(e,b,g));var f=0,r=e.length;for(d.length+=r;f<r;)d[n++]=e[f++]}else g||(d[n++]=e)}return d};h.flatten=function(a,b){return G(a,b,!1)};h.without=function(a){return h.difference(a,d.call(arguments,1))};h.uniq=h.unique=function(a,b,g,c){h.isBoolean(b)||(c=g,g=b,b=!1);null!=g&&(g=t(g,c));c=[];for(var d=[],n=0,p=D(a);n<p;n++){var e=a[n],f=g?g(e,n,a):e;b?(n&&d===
f||c.push(e),d=f):g?h.contains(d,f)||(d.push(f),c.push(e)):h.contains(c,e)||c.push(e)}return c};h.union=function(){return h.uniq(G(arguments,!0,!0))};h.intersection=function(a){for(var b=[],g=arguments.length,c=0,d=D(a);c<d;c++){var n=a[c];if(!h.contains(b,n)){for(var e=1;e<g&&h.contains(arguments[e],n);e++);e===g&&b.push(n)}}return b};h.difference=function(a){var b=G(arguments,!0,!0,1);return h.filter(a,function(a){return!h.contains(b,a)})};h.zip=function(){return h.unzip(arguments)};h.unzip=function(a){for(var b=
a&&h.max(a,D).length||0,g=Array(b),c=0;c<b;c++)g[c]=h.pluck(a,c);return g};h.object=function(a,b){for(var g={},c=0,d=D(a);c<d;c++)b?g[a[c]]=b[c]:g[a[c][0]]=a[c][1];return g};h.findIndex=f(1);h.findLastIndex=f(-1);h.sortedIndex=function(a,b,g,c){g=t(g,c,1);b=g(b);c=0;for(var d=D(a);c<d;){var h=Math.floor((c+d)/2);g(a[h])<b?c=h+1:d=h}return c};h.indexOf=c(1,h.findIndex,h.sortedIndex);h.lastIndexOf=c(-1,h.findLastIndex);h.range=function(a,b,g){null==b&&(b=a||0,a=0);g=g||1;b=Math.max(Math.ceil((b-a)/
g),0);for(var c=Array(b),d=0;d<b;d++,a+=g)c[d]=a;return c};var N=function(a,b,g,c,d){if(!(c instanceof b))return a.apply(g,d);b=M(a.prototype);a=a.apply(b,d);return h.isObject(a)?a:b};h.bind=function(a,b){if(y&&a.bind===y)return y.apply(a,d.call(arguments,1));if(!h.isFunction(a))throw new TypeError("Bind must be called on a function");var g=d.call(arguments,2),c=function(){return N(a,c,b,this,g.concat(d.call(arguments)))};return c};h.partial=function(a){var b=d.call(arguments,1),g=function(){for(var c=
0,d=b.length,n=Array(d),e=0;e<d;e++)n[e]=b[e]===h?arguments[c++]:b[e];for(;c<arguments.length;)n.push(arguments[c++]);return N(a,g,this,this,n)};return g};h.bindAll=function(a){var b,g=arguments.length;if(1>=g)throw Error("bindAll must be passed function names");for(b=1;b<g;b++){var c=arguments[b];a[c]=h.bind(a[c],a)}return a};h.memoize=function(a,b){var g=function(c){var d=g.cache,e=""+(b?b.apply(this,arguments):c);h.has(d,e)||(d[e]=a.apply(this,arguments));return d[e]};g.cache={};return g};h.delay=
function(a,b){var g=d.call(arguments,2);return setTimeout(function(){return a.apply(null,g)},b)};h.defer=h.partial(h.delay,h,1);h.throttle=function(a,b,g){var c,d,e,n=null,p=0;g||(g={});var f=function(){p=!1===g.leading?0:h.now();n=null;e=a.apply(c,d);n||(c=d=null)};return function(){var q=h.now();p||!1!==g.leading||(p=q);var r=b-(q-p);c=this;d=arguments;0>=r||r>b?(n&&(clearTimeout(n),n=null),p=q,e=a.apply(c,d),n||(c=d=null)):n||!1===g.trailing||(n=setTimeout(f,r));return e}};h.debounce=function(a,
b,g){var c,d,e,n,p,f=function(){var q=h.now()-n;q<b&&0<=q?c=setTimeout(f,b-q):(c=null,g||(p=a.apply(e,d),c||(e=d=null)))};return function(){e=this;d=arguments;n=h.now();var q=g&&!c;c||(c=setTimeout(f,b));q&&(p=a.apply(e,d),e=d=null);return p}};h.wrap=function(a,b){return h.partial(b,a)};h.negate=function(a){return function(){return!a.apply(this,arguments)}};h.compose=function(){var a=arguments,b=a.length-1;return function(){for(var g=b,c=a[b].apply(this,arguments);g--;)c=a[g].call(this,c);return c}};
h.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};h.before=function(a,b){var g;return function(){0<--a&&(g=b.apply(this,arguments));1>=a&&(b=null);return g}};h.once=h.partial(h.before,2);var L=!{toString:null}.propertyIsEnumerable("toString"),J="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");h.keys=function(a){if(!h.isObject(a))return[];if(B)return B(a);var b=[],g;for(g in a)h.has(a,g)&&b.push(g);L&&l(a,b);return b};h.allKeys=
function(a){if(!h.isObject(a))return[];var b=[],g;for(g in a)b.push(g);L&&l(a,b);return b};h.values=function(a){for(var b=h.keys(a),g=b.length,c=Array(g),d=0;d<g;d++)c[d]=a[b[d]];return c};h.mapObject=function(a,b,g){b=t(b,g);g=h.keys(a);for(var c=g.length,d={},e,p=0;p<c;p++)e=g[p],d[e]=b(a[e],e,a);return d};h.pairs=function(a){for(var b=h.keys(a),g=b.length,c=Array(g),d=0;d<g;d++)c[d]=[b[d],a[b[d]]];return c};h.invert=function(a){for(var b={},g=h.keys(a),c=0,d=g.length;c<d;c++)b[a[g[c]]]=g[c];return b};
h.functions=h.methods=function(a){var b=[],g;for(g in a)h.isFunction(a[g])&&b.push(g);return b.sort()};h.extend=z(h.allKeys);h.extendOwn=h.assign=z(h.keys);h.findKey=function(a,b,g){b=t(b,g);g=h.keys(a);for(var c,d=0,e=g.length;d<e;d++)if(c=g[d],b(a[c],c,a))return c};h.pick=function(a,b,g){var c={},d=a;if(null==d)return c;if(h.isFunction(b)){var e=h.allKeys(d);var p=x(b,g)}else e=G(arguments,!1,!1,1),p=function(a,b,g){return b in g},d=Object(d);for(var f=0,n=e.length;f<n;f++){var q=e[f],l=d[q];p(l,
q,d)&&(c[q]=l)}return c};h.omit=function(a,b,g){if(h.isFunction(b))b=h.negate(b);else{var c=h.map(G(arguments,!1,!1,1),String);b=function(a,b){return!h.contains(c,b)}}return h.pick(a,b,g)};h.defaults=z(h.allKeys,!0);h.create=function(a,b){a=M(a);b&&h.extendOwn(a,b);return a};h.clone=function(a){return h.isObject(a)?h.isArray(a)?a.slice():h.extend({},a):a};h.tap=function(a,b){b(a);return a};h.isMatch=function(a,b){var g=h.keys(b),c=g.length;if(null==a)return!c;a=Object(a);for(var d=0;d<c;d++){var e=
g[d];if(b[e]!==a[e]||!(e in a))return!1}return!0};var g=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof h&&(a=a._wrapped);b instanceof h&&(b=b._wrapped);var e=q.call(a);if(e!==q.call(b))return!1;switch(e){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}e="[object Array]"===e;if(!e){if("object"!=typeof a||
"object"!=typeof b)return!1;var p=a.constructor,f=b.constructor;if(p!==f&&!(h.isFunction(p)&&p instanceof p&&h.isFunction(f)&&f instanceof f)&&"constructor"in a&&"constructor"in b)return!1}c=c||[];d=d||[];for(p=c.length;p--;)if(c[p]===a)return d[p]===b;c.push(a);d.push(b);if(e){p=a.length;if(p!==b.length)return!1;for(;p--;)if(!g(a[p],b[p],c,d))return!1}else{e=h.keys(a);p=e.length;if(h.keys(b).length!==p)return!1;for(;p--;)if(f=e[p],!h.has(b,f)||!g(a[f],b[f],c,d))return!1}c.pop();d.pop();return!0};
h.isEqual=function(a,b){return g(a,b)};h.isEmpty=function(a){return null==a?!0:A(a)&&(h.isArray(a)||h.isString(a)||h.isArguments(a))?0===a.length:0===h.keys(a).length};h.isElement=function(a){return!(!a||1!==a.nodeType)};h.isArray=F||function(a){return"[object Array]"===q.call(a)};h.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};h.each("Arguments Function String Number Date RegExp Error".split(" "),function(a){h["is"+a]=function(b){return q.call(b)==="[object "+a+"]"}});
h.isArguments(arguments)||(h.isArguments=function(a){return h.has(a,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(h.isFunction=function(a){return"function"==typeof a||!1});h.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};h.isNaN=function(a){return h.isNumber(a)&&a!==+a};h.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===q.call(a)};h.isNull=function(a){return null===a};h.isUndefined=function(a){return void 0===a};h.has=function(a,b){return null!=a&&
v.call(a,b)};h.noConflict=function(){e._=m;return this};h.identity=function(a){return a};h.constant=function(a){return function(){return a}};h.noop=function(){};h.property=I;h.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}};h.matcher=h.matches=function(a){a=h.extendOwn({},a);return function(b){return h.isMatch(b,a)}};h.times=function(a,b,g){var c=Array(Math.max(0,a));b=x(b,g,1);for(g=0;g<a;g++)c[g]=b(g);return c};h.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*
(b-a+1))};h.now=Date.now||function(){return(new Date).getTime()};F={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;","`":"\x26#x60;"};z=h.invert(F);I=function(a){var b=function(b){return a[b]},g="(?:"+h.keys(a).join("|")+")",c=RegExp(g),d=RegExp(g,"g");return function(a){a=null==a?"":""+a;return c.test(a)?a.replace(d,b):a}};h.escape=I(F);h.unescape=I(z);h.result=function(a,b,g){b=null==a?void 0:a[b];void 0===b&&(b=g);return h.isFunction(b)?b.call(a):b};var p=0;h.uniqueId=
function(a){var b=++p+"";return a?a+b:b};h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},S=/\\|'|\r|\n|\u2028|\u2029/g,T=function(a){return"\\"+R[a]};h.template=function(a,b,g){!b&&g&&(b=g);b=h.defaults({},b,h.templateSettings);g=RegExp([(b.escape||H).source,(b.interpolate||H).source,(b.evaluate||H).source].join("|")+"|$","g");var c=0,d="__p+\x3d'";a.replace(g,
function(b,g,h,e,p){d+=a.slice(c,p).replace(S,T);c=p+b.length;g?d+="'+\n((__t\x3d("+g+"))\x3d\x3dnull?'':_.escape(__t))+\n'":h?d+="'+\n((__t\x3d("+h+"))\x3d\x3dnull?'':__t)+\n'":e&&(d+="';\n"+e+"\n__p+\x3d'");return b});d+="';\n";b.variable||(d="with(obj||{}){\n"+d+"}\n");d="var __t,__p\x3d'',__j\x3dArray.prototype.join,print\x3dfunction(){__p+\x3d__j.call(arguments,'');};\n"+d+"return __p;\n";try{var e=new Function(b.variable||"obj","_",d)}catch(Q){throw Q.source=d,Q;}g=function(a){return e.call(this,
a,h)};g.source="function("+(b.variable||"obj")+"){\n"+d+"}";return g};h.chain=function(a){a=h(a);a._chain=!0;return a};var P=function(a,b){return a._chain?h(b).chain():b};h.mixin=function(b){h.each(h.functions(b),function(g){var c=h[g]=b[g];h.prototype[g]=function(){var b=[this._wrapped];a.apply(b,arguments);return P(this,c.apply(h,b))}})};h.mixin(h);h.each("pop push reverse shift sort splice unshift".split(" "),function(a){var g=b[a];h.prototype[a]=function(){var b=this._wrapped;g.apply(b,arguments);
"shift"!==a&&"splice"!==a||0!==b.length||delete b[0];return P(this,b)}});h.each(["concat","join","slice"],function(a){var g=b[a];h.prototype[a]=function(){return P(this,g.apply(this._wrapped,arguments))}});h.prototype.value=function(){return this._wrapped};h.prototype.valueOf=h.prototype.toJSON=h.prototype.value;h.prototype.toString=function(){return""+this._wrapped};"function"===typeof define&&define.amd&&define("underscore",[],function(){return h})}).call(this);
(function(k,f){if("function"===typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(c,e,m){k.Backbone=f(k,m,c,e)});else if("undefined"!==typeof exports){var c=require("underscore");f(k,exports,c)}else k.Backbone=f(k,{},k._,k.jQuery||k.Zepto||k.ender||k.$)})(this,function(k,f,c,l){var e=k.Backbone,m=[].slice;f.VERSION="1.1.2";f.$=l;f.noConflict=function(){k.Backbone=e;return this};f.emulateHTTP=!1;f.emulateJSON=!1;var b=f.Events={on:function(b,c,d){if(!a(this,"on",
b,[c,d])||!c)return this;this._events||(this._events={});(this._events[b]||(this._events[b]=[])).push({callback:c,context:d,ctx:d||this});return this},once:function(b,d,h){if(!a(this,"once",b,[d,h])||!d)return this;var g=this,e=c.once(function(){g.off(b,e);d.apply(this,arguments)});e._callback=d;return this.on(b,e,h)},off:function(b,d,e){var g,h,p,f;if(!this._events||!a(this,"off",b,[d,e]))return this;if(!b&&!d&&!e)return this._events=void 0,this;var q=b?[b]:c.keys(this._events);var l=0;for(p=q.length;l<
p;l++)if(b=q[l],h=this._events[b]){this._events[b]=g=[];if(d||e){var m=0;for(f=h.length;m<f;m++){var H=h[m];(d&&d!==H.callback&&d!==H.callback._callback||e&&e!==H.context)&&g.push(H)}}g.length||delete this._events[b]}return this},trigger:function(b){if(!this._events)return this;var g=m.call(arguments,1);if(!a(this,"trigger",b,g))return this;var c=this._events[b],e=this._events.all;c&&d(c,g);e&&d(e,arguments);return this},stopListening:function(a,b,d){var g=this._listeningTo;if(!g)return this;var e=
!b&&!d;d||"object"!==typeof b||(d=this);a&&((g={})[a._listenId]=a);for(var h in g)a=g[h],a.off(b,d,this),(e||c.isEmpty(a._events))&&delete this._listeningTo[h];return this}},u=/\s+/,a=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var g in c)a[b].apply(a,[g,c[g]].concat(d));return!1}if(u.test(c)){c=c.split(u);g=0;for(var e=c.length;g<e;g++)a[b].apply(a,[c[g]].concat(d));return!1}return!0},d=function(a,b){var g,c=-1,d=a.length,e=b[0],h=b[1],p=b[2];switch(b.length){case 0:for(;++c<d;)(g=
a[c]).callback.call(g.ctx);break;case 1:for(;++c<d;)(g=a[c]).callback.call(g.ctx,e);break;case 2:for(;++c<d;)(g=a[c]).callback.call(g.ctx,e,h);break;case 3:for(;++c<d;)(g=a[c]).callback.call(g.ctx,e,h,p);break;default:for(;++c<d;)(g=a[c]).callback.apply(g.ctx,b)}};c.each({listenTo:"on",listenToOnce:"once"},function(a,d){b[d]=function(b,g,d){var e=this._listeningTo||(this._listeningTo={}),h=b._listenId||(b._listenId=c.uniqueId("l"));e[h]=b;d||"object"!==typeof g||(d=this);b[a](g,d,this);return this}});
b.bind=b.on;b.unbind=b.off;c.extend(f,b);var q=f.Model=function(a,b){var g=a||{};b||(b={});this.cid=c.uniqueId("c");this.attributes={};b.collection&&(this.collection=b.collection);b.parse&&(g=this.parse(g,b)||{});g=c.defaults({},g,c.result(this,"defaults"));this.set(g,b);this.changed={};this.initialize.apply(this,arguments)};c.extend(q.prototype,b,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return f.sync.apply(this,
arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var g;if(null==a)return this;if("object"===typeof a){var e=a;d=b}else(e={})[a]=b;d||(d={});if(!this._validate(e,d))return!1;var h=d.unset;var f=d.silent;a=[];var p=this._changing;this._changing=!0;p||(this._previousAttributes=c.clone(this.attributes),this.changed={});var q=this.attributes;var l=this._previousAttributes;this.idAttribute in
e&&(this.id=e[this.idAttribute]);for(g in e)b=e[g],c.isEqual(q[g],b)||a.push(g),c.isEqual(l[g],b)?delete this.changed[g]:this.changed[g]=b,h?delete q[g]:q[g]=b;if(!f)for(a.length&&(this._pending=d),b=0,g=a.length;b<g;b++)this.trigger("change:"+a[b],this,q[a[b]],d);if(p)return this;if(!f)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b=
{},g;for(g in this.attributes)b[g]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,g=!1,d=this._changing?this._previousAttributes:this.attributes,e;for(e in a)c.isEqual(d[e],b=a[e])||((g||(g={}))[e]=b);return g},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},
fetch:function(a){a=a?c.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,g=a.success;a.success=function(c){if(!b.set(b.parse(c,a),a))return!1;g&&g(b,c,a);b.trigger("sync",b,c,a)};J(this,a);return this.sync("read",this,a)},save:function(a,b,d){var g=this.attributes;if(null==a||"object"===typeof a){var e=a;d=b}else(e={})[a]=b;d=c.extend({validate:!0},d);if(e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},g,e));void 0===d.parse&&
(d.parse=!0);var h=this,f=d.success;d.success=function(a){h.attributes=g;var b=h.parse(a,d);d.wait&&(b=c.extend(e||{},b));if(c.isObject(b)&&!h.set(b,d))return!1;f&&f(h,a,d);h.trigger("sync",h,a,d)};J(this,d);a=this.isNew()?"create":d.patch?"patch":"update";"patch"===a&&(d.attrs=e);a=this.sync(a,this,d);e&&d.wait&&(this.attributes=g);return a},destroy:function(a){a=a?c.clone(a):{};var b=this,g=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(c){(a.wait||b.isNew())&&
d();g&&g(b,c,a);b.isNew()||b.trigger("sync",b,c,a)};if(this.isNew())return a.success(),!1;J(this,a);var e=this.sync("delete",this,a);a.wait||d();return e},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||L();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},
c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);a=this.validationError=this.validate(a,b)||null;if(!a)return!0;this.trigger("invalid",this,a,c.extend(b,{validationError:a}));return!1}});c.each("keys values pairs invert pick omit".split(" "),function(a){q.prototype[a]=function(){var b=m.call(arguments);b.unshift(this.attributes);return c[a].apply(c,b)}});var v=f.Collection=function(a,b){b||(b={});b.model&&(this.model=
b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,c.extend({silent:!0},b))},F={add:!0,remove:!0,merge:!0},B={add:!0,remove:!1};c.extend(v.prototype,b,{model:q,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return f.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,B))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a);
b||(b={});var g,e;var h=0;for(g=a.length;h<g;h++)if(e=a[h]=this.get(a[h])){delete this._byId[e.id];delete this._byId[e.cid];var f=this.indexOf(e);this.models.splice(f,1);this.length--;b.silent||(b.index=f,e.trigger("remove",e,this,b));this._removeReference(e,b)}return d?a[0]:a},set:function(a,b){b=c.defaults({},b,F);b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var g,e,h,f=b.at,p=this.model,l=this.comparator&&null==f&&!1!==b.sort,m=c.isString(this.comparator)?this.comparator:
null,k=[],v=[],u={},y=b.add,B=b.merge,C=b.remove,t=!l&&y&&C?[]:!1;var w=0;for(g=a.length;w<g;w++){var x=a[w]||{};var z=x instanceof q?e=x:x[p.prototype.idAttribute||"id"];if(z=this.get(z))C&&(u[z.cid]=!0),B&&(x=x===e?e.attributes:x,b.parse&&(x=z.parse(x,b)),z.set(x,b),l&&!h&&z.hasChanged(m)&&(h=!0)),a[w]=z;else if(y){e=a[w]=this._prepareModel(x,b);if(!e)continue;k.push(e);this._addReference(e,b)}e=z||e;!t||!e.isNew()&&u[e.id]||t.push(e);u[e.id]=!0}if(C){w=0;for(g=this.length;w<g;++w)u[(e=this.models[w]).cid]||
v.push(e);v.length&&this.remove(v,b)}if(k.length||t&&t.length)if(l&&(h=!0),this.length+=k.length,null!=f)for(w=0,g=k.length;w<g;w++)this.models.splice(f+w,0,k[w]);else for(t&&(this.models.length=0),x=t||k,w=0,g=x.length;w<g;w++)this.models.push(x[w]);h&&this.sort({silent:!0});if(!b.silent){w=0;for(g=k.length;w<g;w++)(e=k[w]).trigger("add",e,this,b);(h||t&&t.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,g=this.models.length;d<g;d++)this._removeReference(this.models[d],
b);b.previousModels=this.models;this._reset();a=this.add(a,c.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);this.remove(b,a);return b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(){return m.apply(this.models,arguments)},get:function(a){if(null!=a)return this._byId[a]||
this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,
this));a.silent||this.trigger("sort",this,a);return this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;a.success=function(c){d[a.reset?"reset":"set"](c,a);b&&b(d,c,a);d.trigger("sync",d,c,a)};J(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?c.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,g=b.success;b.success=function(a,c){b.wait&&d.add(a,
b);g&&g(a,c,b)};a.save(null,b);return a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof q)return a;b=b?c.clone(b):{};b.collection=this;a=new this.model(a,b);if(!a.validationError)return a;this.trigger("invalid",this,a.validationError,b);return!1},_addReference:function(a,b){this._byId[a.cid]=a;null!=a.id&&(this._byId[a.id]=a);a.collection||(a.collection=
this);a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if("add"!==a&&"remove"!==a||c===this)"destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments)}});c.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without difference indexOf shuffle lastIndexOf isEmpty chain sample".split(" "),
function(a){v.prototype[a]=function(){var b=m.call(arguments);b.unshift(this.models);return c[a].apply(c,b)}});c.each(["groupBy","countBy","sortBy","indexBy"],function(a){v.prototype[a]=function(b,d){var g=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,g,d)}});l=f.View=function(a){this.cid=c.uniqueId("view");a||(a={});c.extend(this,c.pick(a,C));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var y=/^(\S+)\s*(.*)$/,C="model collection el id attributes className tagName events".split(" ");
c.extend(l.prototype,b,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof f.$?a:f.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];c.isFunction(d)||
(d=this[a[b]]);if(d){var g=b.match(y),e=g[1];g=g[2];d=c.bind(d,this);e+=".delegateEvents"+this.cid;if(""===g)this.$el.on(e,d);else this.$el.on(e,g,d)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id"));this.className&&(a["class"]=c.result(this,"className"));a=f.$("\x3c"+c.result(this,"tagName")+
"\x3e").attr(a);this.setElement(a,!1)}}});f.sync=function(a,b,d){var g=h[a];c.defaults(d||(d={}),{emulateHTTP:f.emulateHTTP,emulateJSON:f.emulateJSON});var e={type:g,dataType:"json"};d.url||(e.url=c.result(b,"url")||L());null!=d.data||!b||"create"!==a&&"update"!==a&&"patch"!==a||(e.contentType="application/json",e.data=JSON.stringify(d.attrs||b.toJSON(d)));d.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{});if(d.emulateHTTP&&("PUT"===g||"DELETE"===g||
"PATCH"===g)){e.type="POST";d.emulateJSON&&(e.data._method=g);var q=d.beforeSend;d.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",g);if(q)return q.apply(this,arguments)}}"GET"===e.type||d.emulateJSON||(e.processData=!1);"PATCH"===e.type&&w&&(e.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});a=d.xhr=f.ajax(c.extend(e,d));b.trigger("request",b,a,d);return a};var w="undefined"!==typeof window&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),
h={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};f.ajax=function(){return f.$.ajax.apply(f.$,arguments)};var x=f.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},t=/\((.*?)\)/g,z=/(\(\?)?:\w+/g,M=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(x.prototype,b,{initialize:function(){},route:function(a,b,d){c.isRegExp(a)||(a=this._routeToRegExp(a));c.isFunction(b)&&(d=b,b="");d||(d=this[b]);var g=this;f.history.route(a,
function(c){c=g._extractParameters(a,c);g.execute(d,c);g.trigger.apply(g,["route:"+b].concat(c));g.trigger("route",b,c);f.history.trigger("route",g,b,c)});return this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,b){f.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(I,"\\$\x26").replace(t,"(?:$1)?").replace(z,
function(a,b){return b?a:"([^/?]+)"}).replace(M,"([^?]*?)");return new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var E=f.History=function(){this.handlers=[];c.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},D=/^[#\/]|\s+$/g,A=/^\/+|\/+$/g,K=/msie [\w.]+/,G=/\/$/,N=/#.*$/;E.started=!1;c.extend(E.prototype,
b,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$\x26/")===this.root},getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){null==a&&(this._hasPushState||!this._wantsHashChange||b?(a=decodeURI(this.location.pathname+this.location.search),b=this.root.replace(G,""),a.indexOf(b)||(a=a.slice(b.length))):a=this.getHash());return a.replace(D,"")},start:function(a){if(E.started)throw Error("Backbone.history has already been started");
E.started=!0;this.options=c.extend({root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);a=this.getFragment();var b=document.documentMode;b=K.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(A,"/");b&&this._wantsHashChange&&(this.iframe=f.$('\x3ciframe src\x3d"javascript:0" tabindex\x3d"-1"\x3e').hide().appendTo("body")[0].contentWindow,
this.navigate(a));if(this._hasPushState)f.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!b)f.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&
this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(D,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){f.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);E.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));
if(a===this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()},loadUrl:function(a){a=this.fragment=this.getFragment(a);return c.any(this.handlers,function(b){if(b.route.test(a))return b.callback(a),!0})},navigate:function(a,b){if(!E.started)return!1;b&&!0!==b||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));a=a.replace(N,"");if(this.fragment!==a){this.fragment=a;""===a&&"/"!==c&&(c=c.slice(0,-1));if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},
document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);if(b.trigger)return this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});f.history=new E;q.extend=v.extend=x.extend=l.extend=E.extend=function(a,
b){var d=this;var e=a&&c.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)};c.extend(e,d,b);b=function(){this.constructor=e};b.prototype=d.prototype;e.prototype=new b;a&&c.extend(e.prototype,a);e.__super__=d.prototype;return e};var L=function(){throw Error('A "url" property or function must be specified');},J=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}};return f});
(function(k,f){if("object"===typeof exports){k=require("underscore");var c=require("backbone");module.exports=f(k,c)}else"function"===typeof define&&define.amd&&define("backbone.wreqr",["underscore","backbone"],f)})(this,function(k,f){f.Wreqr=function(c,f,e){f={};f.Handlers=function(c,b){var e=function(a){this.options=a;this._wreqrHandlers={};b.isFunction(this.initialize)&&this.initialize(a)};e.extend=c.Model.extend;b.extend(e.prototype,c.Events,{setHandlers:function(a){b.each(a,function(a,c){var d=
null;b.isObject(a)&&!b.isFunction(a)&&(d=a.context,a=a.callback);this.setHandler(c,a,d)},this)},setHandler:function(a,b,c){this._wreqrHandlers[a]={callback:b,context:c};this.trigger("handler:add",a,b,c)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers=
{}}});return e}(c,e);f.CommandStorage=function(){var f=function(b){this.options=b;this._commands={};e.isFunction(this.initialize)&&this.initialize(b)};e.extend(f.prototype,c.Events,{getCommands:function(b){var c=this._commands[b];c||(c={command:b,instances:[]},this._commands[b]=c);return c},addCommand:function(b,c){this.getCommands(b).instances.push(c)},clearCommands:function(b){this.getCommands(b).instances=[]}});return f}();f.Commands=function(c){return c.Handlers.extend({storageType:c.CommandStorage,
constructor:function(b){this.options=b||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var e=Array.prototype.slice.call(arguments);c.Handlers.prototype.constructor.apply(this,e)},execute:function(b,c){b=arguments[0];c=Array.prototype.slice.call(arguments,1);this.hasHandler(b)?this.getHandler(b).apply(this,c):this.storage.addCommand(b,c)},_executeCommands:function(b,c,a){var d=this.storage.getCommands(b);e.each(d.instances,function(b){c.apply(a,b)});this.storage.clearCommands(b)},
_initializeStorage:function(b){b=b.storageType||this.storageType;this.storage=e.isFunction(b)?new b:b}})}(f);f.RequestResponse=function(c){return c.Handlers.extend({request:function(){var b=arguments[0],c=Array.prototype.slice.call(arguments,1);if(this.hasHandler(b))return this.getHandler(b).apply(this,c)}})}(f);f.EventAggregator=function(c,b){var e=function(){};e.extend=c.Model.extend;b.extend(e.prototype,c.Events);return e}(c,e);return f}(f,f.Marionette,k);return f.Wreqr});
(function(k,f){if("object"===typeof exports){k=require("underscore");var c=require("backbone");module.exports=f(k,c)}else"function"===typeof define&&define.amd&&define("backbone.babysitter",["underscore","backbone"],f)})(this,function(k,f){"option strict";f.ChildViewContainer=function(c,f){var e=function(c){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();f.each(c,this.add,this)};f.extend(e.prototype,{add:function(c,b){var e=c.cid;this._views[e]=c;c.model&&(this._indexByModel[c.model.cid]=
e);b&&(this._indexByCustom[b]=e);this._updateLength();return this},findByModel:function(c){return this.findByModelCid(c.cid)},findByModelCid:function(c){return this.findByCid(this._indexByModel[c])},findByCustom:function(c){return this.findByCid(this._indexByCustom[c])},findByIndex:function(c){return f.values(this._views)[c]},findByCid:function(c){return this._views[c]},remove:function(c){var b=c.cid;c.model&&delete this._indexByModel[c.model.cid];f.any(this._indexByCustom,function(c,a){if(c===b)return delete this._indexByCustom[a],
!0},this);delete this._views[b];this._updateLength();return this},call:function(c){this.apply(c,f.tail(arguments))},apply:function(c,b){f.each(this._views,function(e){f.isFunction(e[c])&&e[c].apply(e,b||[])})},_updateLength:function(){this.length=f.size(this._views)}});f.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(c){e.prototype[c]=function(){var b=[f.values(this._views)].concat(f.toArray(arguments));
return f[c].apply(f,b)}});return e}(f,k);return f.ChildViewContainer});
(function(k,f){if("object"===typeof exports){k=require("underscore");var c=require("backbone"),l=require("backbone.wreqr"),e=require("backbone.babysitter");module.exports=f(k,c,l,e)}else"function"===typeof define&&define.amd&&define("marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],f)})(this,function(k,f){(function(c,f,e){function k(a,b){a=Error(a);a.name=b||"Error";throw a;}var b={};f.Marionette=b;b.$=f.$;var l=Array.prototype.slice;b.extend=f.Model.extend;b.getOption=
function(a,b){if(a&&b)return a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]};b.normalizeMethods=function(a){var b={},c;e.each(a,function(a,d){c=a;e.isFunction(c)||(c=this[c]);c&&(b[d]=c)},this);return b};b.normalizeUIKeys=function(a,b){if("undefined"!==typeof a)return e.each(e.keys(a),function(c){var d=/@ui.[a-zA-Z_$0-9]*/g;c.match(d)&&(a[c.replace(d,function(a){return b[a.slice(4)]})]=a[c],delete a[c])}),a};b.triggerMethod=function(){function a(a,b,c){return c.toUpperCase()}var b=
/(^|:)(\w)/gi;return function(c){var d=this["on"+c.replace(b,a)];e.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(e.isFunction(d))return d.apply(this,e.tail(arguments))}}();b.MonitorDOMRefresh=function(a){function b(b){b._isShown&&b._isRendered&&a.contains(b.el)&&e.isFunction(b.triggerMethod)&&b.triggerMethod("dom:refresh")}return function(a){a.listenTo(a,"show",function(){a._isShown=!0;b(a)});a.listenTo(a,"render",function(){a._isRendered=!0;b(a)})}}(document.documentElement);(function(a){function b(a,
b,c,d){d=d.split(/\s+/);e.each(d,function(d){var e=a[d];e||k("Method '"+d+"' was configured as an event handler, but does not exist.");a.listenTo(b,c,e)})}function c(a,b,c,d){a.listenTo(b,c,d)}function f(a,b,c,d){d=d.split(/\s+/);e.each(d,function(d){a.stopListening(b,c,a[d])})}function l(a,b,c,d){a.stopListening(b,c,d)}function m(a,b,c,d,f){b&&c&&(e.isFunction(c)&&(c=c.call(a)),e.each(c,function(c,h){e.isFunction(c)?d(a,b,h,c):f(a,b,h,c)}))}a.bindEntityEvents=function(a,d,e){m(a,d,e,c,b)};a.unbindEntityEvents=
function(a,b,c){m(a,b,c,l,f)}})(b);b.Callbacks=function(){this._deferred=b.$.Deferred();this._callbacks=[]};e.extend(b.Callbacks.prototype,{add:function(a,b){this._callbacks.push({cb:a,ctx:b});this._deferred.done(function(c,d){b&&(c=b);a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=b.$.Deferred();this._callbacks=[];e.each(a,function(a){this.add(a.cb,a.ctx)},this)}});b.Controller=function(a){this.triggerMethod=b.triggerMethod;this.options=
a||{};e.isFunction(this.initialize)&&this.initialize(this.options)};b.Controller.extend=b.extend;e.extend(b.Controller.prototype,f.Events,{close:function(){this.stopListening();var a=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(a));this.unbind()}});b.Region=function(a){this.options=a||{};(this.el=b.getOption(this,"el"))||k("An 'el' must be specified for a region.","NoElError");if(this.initialize){var c=Array.prototype.slice.apply(arguments);this.initialize.apply(this,
c)}};e.extend(b.Region,{buildRegion:function(a,b){var c=e.isString(a),d=e.isString(a.selector),f=e.isUndefined(a.regionType),l=e.isFunction(a);l||c||d||k("Region must be specified as a Region type, a selector string or an object with selector property");var m,u;c&&(m=a);a.selector&&(m=a.selector,delete a.selector);l&&(u=a);!l&&f&&(u=b);a.regionType&&(u=a.regionType,delete a.regionType);if(c||l)a={};a.el=m;b=new u(a);a.parentEl&&(b.getEl=function(b){var c=a.parentEl;e.isFunction(c)&&(c=c());return c.find(b)});
return b}});e.extend(b.Region.prototype,f.Events,{show:function(a){this.ensureEl();var c=a.isClosed||e.isUndefined(a.$el),f=a!==this.currentView;f&&this.close();a.render();b.triggerMethod.call(this,"before:show",a);b.triggerMethod.call(a,"before:show");(f||c)&&this.open(a);this.currentView=a;b.triggerMethod.call(this,"show",a);b.triggerMethod.call(a,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(a){return b.$(a)},open:function(a){this.$el.empty().append(a.el)},
close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),b.triggerMethod.call(this,"close",a),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close();delete this.$el}});b.Region.extend=b.extend;b.RegionManager=function(a){var b=a.Controller.extend({constructor:function(b){this._regions={};a.Controller.prototype.constructor.call(this,b)},addRegions:function(a,b){var c={};e.each(a,function(a,d){e.isString(a)&&(a={selector:a});
a.selector&&(a=e.defaults({},a,b));a=this.addRegion(d,a);c[d]=a},this);return c},addRegion:function(b,c){var d=e.isObject(c),f=e.isString(c),q=!!c.selector;c=f||d&&q?a.Region.buildRegion(c,a.Region):e.isFunction(c)?a.Region.buildRegion(c,a.Region):c;this._store(b,c);this.triggerMethod("region:add",b,c);return c},get:function(a){return this._regions[a]},removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){e.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){e.each(this._regions,
function(a,b){a.close()},this)},close:function(){this.removeRegions();a.Controller.prototype.close.apply(this,arguments)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=e.size(this._regions)}});e.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),
function(a){b.prototype[a]=function(){var b=[e.values(this._regions)].concat(e.toArray(arguments));return e[a].apply(e,b)}});return b}(b);b.TemplateCache=function(a){this.templateId=a};e.extend(b.TemplateCache,{templateCaches:{},get:function(a){var c=this.templateCaches[a];c||(c=new b.TemplateCache(a),this.templateCaches[a]=c);return c.load()},clear:function(){var a,b=l.call(arguments),c=b.length;if(0<c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});e.extend(b.TemplateCache.prototype,
{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var c=b.$(a).html();c&&0!==c.length||k("Could not find template: '"+a+"'","NoTemplateError");return c},compileTemplate:function(a){return e.template(a)}});b.Renderer={render:function(a,c){a||k("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError");return("function"===typeof a?
a:b.TemplateCache.get(a))(c)}};b.View=f.View.extend({constructor:function(a){e.bindAll(this,"render");e.isObject(this.behaviors)&&new b.Behaviors(this);this.options=e.extend({},e.result(this,"options"),e.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(e.result(this,"events"));f.View.prototype.constructor.apply(this,arguments);b.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},triggerMethod:b.triggerMethod,normalizeMethods:b.normalizeMethods,getTemplate:function(){return b.getOption(this,
"template")},mixinTemplateHelpers:function(a){a=a||{};var c=b.getOption(this,"templateHelpers");e.isFunction(c)&&(c=c.call(this));return e.extend(a,c)},normalizeUIKeys:function(a){var c=e.result(this,"ui");return b.normalizeUIKeys(a,c)},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(e.result(this,"triggers"));e.each(b,function(b,c){var d=e.isObject(b),f=d?b.event:b;a[c]=function(a){if(a){var c=a.preventDefault,e=a.stopPropagation,h=d?b.stopPropagation:e;(d?b.preventDefault:
c)&&c&&c.apply(a);h&&e&&e.apply(a)}this.triggerMethod(f,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);b.bindEntityEvents(this,this.model,b.getOption(this,"modelEvents"));b.bindEntityEvents(this,this.collection,b.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;e.isFunction(a)&&(a=a.call(this));var b={},c=e.result(this,"behaviorEvents")||{},l=this.configureTriggers();e.extend(b,c,
a,l);f.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);f.View.prototype.undelegateEvents.apply(this,a);b.unbindEntityEvents(this,this.model,b.getOption(this,"modelEvents"));b.unbindEntityEvents(this,this.collection,b.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var a=Array.prototype.slice.call(arguments);!1!==this.triggerMethod.apply(this,["before:close"].concat(a))&&(this.isClosed=
!0,this.triggerMethod.apply(this,["close"].concat(a)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=e.result(this,"_uiBindings");this.ui={};e.each(e.keys(a),function(b){this.ui[b]=this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(e.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}});b.ItemView=b.View.extend({constructor:function(){b.View.prototype.constructor.apply(this,
arguments)},serializeData:function(){var a={};this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()});return a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var a=this.serializeData();a=this.mixinTemplateHelpers(a);var c=this.getTemplate();a=b.Renderer.render(c,a);this.$el.html(a);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){this.isClosed||
(this.triggerMethod("item:before:close"),b.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}});b.CollectionView=b.View.extend({itemViewEventPrefix:"itemview",constructor:function(a){this._initChildViewStorage();b.View.prototype.constructor.apply(this,arguments);this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=
!0},endBuffering:function(){this.isBuffering=!1;this.appendBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(e.each(this._bufferedChildren,function(a){b.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",
this.render))},addChildView:function(a,b,c){this.closeEmptyView();b=this.getItemView(a);c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){b.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=!1;this.triggerBeforeRender();
this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();this.closeEmptyView();this.closeChildren();this.isEmpty(this.collection)?this.showEmptyView():this.showCollection();this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b);this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new f.Model;this.addItemView(b,
a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return b.getOption(this,"emptyView")},getItemView:function(a){(a=b.getOption(this,"itemView"))||k("An `itemView` must be specified","NoItemViewError");return a},addItemView:function(a,c,f){var d=b.getOption(this,"itemViewOptions");e.isFunction(d)&&(d=d.call(this,a,f));a=this.buildItemView(a,c,d);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",
a);this.children.add(a);this.renderItemView(a,f);this._isShown&&!this.isBuffering&&b.triggerMethod.call(a,"show");this.triggerMethod("after:item:added",a);return a},addChildViewEventForwarding:function(a){var c=b.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var d=l.call(arguments),f=d[0],k=this.normalizeMethods(this.getItemEvents());d[0]=c+":"+f;d.splice(1,0,a);"undefined"!==typeof k&&e.isFunction(k[f])&&k[f].apply(this,d);b.triggerMethod.apply(this,d)},this)},getItemEvents:function(){return e.isFunction(this.itemEvents)?
this.itemEvents.call(this):this.itemEvents},renderItemView:function(a,b){a.render();this.appendHtml(this,a,b)},buildItemView:function(a,b,c){a=e.extend({model:a},c);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},isEmpty:function(a){return!this.collection||0===this.collection.length},
checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new f.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),b.View.prototype.close.apply(this,arguments))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},
this);this.checkEmpty()}});b.CompositeView=b.CollectionView.extend({constructor:function(){b.CollectionView.prototype.constructor.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this._renderChildren))})},getItemView:function(a){(a=b.getOption(this,"itemView")||this.constructor)||k("An `itemView` must be specified",
"NoItemViewError");return a},serializeData:function(){var a={};this.model&&(a=this.model.toJSON());return a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();this.triggerBeforeRender();var a=this.renderModel();this.$el.html(a);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),
b.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a=this.serializeData();a=this.mixinTemplateHelpers(a);var c=this.getTemplate();return b.Renderer.render(c,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in
a)return a.$itemViewContainer;var c;(c=b.getOption(a,"itemViewContainer"))?(c=e.isFunction(c)?c.call(this):c,c=a.$(c),0>=c.length&&k("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")):c=a.$el;return a.$itemViewContainer=c},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}});b.Layout=b.ItemView.extend({regionType:b.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);b.ItemView.prototype.constructor.call(this,
a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();return b.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),b.ItemView.prototype.close.apply(this,arguments))},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=e.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){delete this.regions[a];
return this.regionManager.removeRegion(a)},_buildRegions:function(a){var c=this,e={regionType:b.getOption(this,"regionType"),parentEl:function(){return c.$el}};return this.regionManager.addRegions(a,e)},_initializeRegions:function(a){this._initRegionManager();a=e.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=
new b.RegionManager;this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}});b.Behavior=function(a,c){function d(b,c){this.view=c;this.defaults=a.result(this,"defaults")||{};this.options=a.extend({},this.defaults,b);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)}a.extend(d.prototype,
{initialize:function(){},triggerMethod:b.triggerMethod});a.extend(d,{extend:c.View.extend});return d}(e,f);b.Behaviors=function(a,b){function c(a){this.behaviors=c.parseBehaviors(a,a.behaviors);c.wrap(a,this.behaviors,"bindUIElements unbindUIElements delegateEvents undelegateEvents onShow onClose behaviorEvents triggerMethod setElement".split(" "))}var d={setElement:function(a,c){a.apply(this,b.tail(arguments,2));b.each(c,function(a){a.$el=this.$el},this)},onShow:function(c,d){var e=b.tail(arguments,
2);b.each(d,function(b){a.triggerMethod.apply(b,["show"].concat(e))});b.isFunction(c)&&c.apply(this,e)},onClose:function(c,d){var e=b.tail(arguments,2);b.each(d,function(b){a.triggerMethod.apply(b,["close"].concat(e))});b.isFunction(c)&&c.apply(this,e)},bindUIElements:function(a,c){a.apply(this);b.invoke(c,a)},unbindUIElements:function(a,c){a.apply(this);b.invoke(c,a)},triggerMethod:function(a,c){var d=b.tail(arguments,2);a.apply(this,d);b.each(c,function(b){a.apply(b,d)})},delegateEvents:function(c,
d){var e=b.tail(arguments,2);c.apply(this,e);b.each(d,function(b){a.bindEntityEvents(this,this.model,a.getOption(b,"modelEvents"));a.bindEntityEvents(this,this.collection,a.getOption(b,"collectionEvents"))},this)},undelegateEvents:function(c,d){var e=b.tail(arguments,2);c.apply(this,e);b.each(d,function(b){a.unbindEntityEvents(this,this.model,a.getOption(b,"modelEvents"));a.unbindEntityEvents(this,this.collection,a.getOption(b,"collectionEvents"))},this)},behaviorEvents:function(c,d){var e={},f=b.result(this,
"ui");b.each(d,function(c,d){var h={},k=b.result(c,"events")||{},l=b.result(c,"ui");l=b.extend({},f,l);k=a.normalizeUIKeys(k,l);b.each(b.keys(k),function(a){var e=Array(d+2).join(" ");e=a+e;a=b.isFunction(k[a])?k[a]:c[k[a]];h[e]=b.bind(a,c)});e=b.extend(e,h)});return e}};b.extend(c,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");},getBehaviorClass:function(a,
d){return a.behaviorClass?a.behaviorClass:b.isFunction(c.behaviorsLookup)?c.behaviorsLookup.apply(this,arguments)[d]:c.behaviorsLookup[d]},parseBehaviors:function(a,d){return b.map(d,function(b,d){return new (c.getBehaviorClass(b,d))(b,a)})},wrap:function(a,c,e){b.each(e,function(e){a[e]=b.partial(d[e],a[e],c)})}});return c}(b,e);b.AppRouter=f.Router.extend({constructor:function(a){f.Router.prototype.constructor.apply(this,arguments);this.options=a||{};var c=b.getOption(this,"appRoutes"),e=this._getController();
this.processAppRoutes(e,c)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,b){if(b){var c=e.keys(b).reverse();e.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return b.getOption(this,"controller")},_addAppRoute:function(a,b,c){var d=a[c];d||k("Method '"+c+"' was not found on the controller");this.route(b,c,e.bind(d,a))}});b.Application=function(a){this._initRegionManager();this._initCallbacks=new b.Callbacks;
this.vent=new f.Wreqr.EventAggregator;this.commands=new f.Wreqr.Commands;this.reqres=new f.Wreqr.RequestResponse;this.submodules={};e.extend(this,a);this.triggerMethod=b.triggerMethod};e.extend(b.Application.prototype,f.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,
this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,c){var d=b.Module.getClass(c),e=l.call(arguments);e.unshift(this);return d.create.apply(d,e)},_initRegionManager:function(){this._regionManager=new b.RegionManager;
this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,"region:remove",function(a,b){delete this[a]})}});b.Application.extend=b.extend;b.Module=function(a,c,f){this.moduleName=a;this.options=e.extend({},this.options,f);this.initialize=f.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=c;this.startWithParent=!0;this.triggerMethod=b.triggerMethod;e.isFunction(this.initialize)&&this.initialize(this.options,
a,c)};b.Module.extend=b.extend;e.extend(b.Module.prototype,f.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(e.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=
!1,b.triggerMethod.call(this,"before:stop"),e.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),b.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,c){a&&(c=e.flatten([this,this.app,f,b,b.$,e,c]),a.apply(this,c))},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new b.Callbacks;this._finalizerCallbacks=
new b.Callbacks}});e.extend(b.Module,{create:function(a,b,c){var d=a,f=l.call(arguments);f.splice(0,3);b=b.split(".");var k=[];k[b.length-1]=c;e.each(b,function(b,e){var l=d;d=this._getModule(l,b,a,c);this._addModuleDefinition(l,d,k[e],f)},this);return d},_getModule:function(a,b,c,f,k){k=e.extend({},f);f=this.getClass(f);var d=a[b];d||(d=new f(b,c,k),a[b]=d,a.submodules[b]=d);return d},getClass:function(a){var c=b.Module;return a?a.prototype instanceof c?a:a.moduleClass||c:c},_addModuleDefinition:function(a,
b,c,e){var d=this._getDefine(c);c=this._getStartWithParent(c,b);d&&b.addDefinition(d,e);this._addStartWithParent(a,b,c)},_getStartWithParent:function(a,c){return e.isFunction(a)&&a.prototype instanceof b.Module?(a=c.constructor.prototype.startWithParent,e.isUndefined(a)?!0:a):e.isObject(a)?(a=a.startWithParent,e.isUndefined(a)?!0:a):!0},_getDefine:function(a){return!e.isFunction(a)||a.prototype instanceof b.Module?e.isObject(a)?a.define:null:a},_addStartWithParent:function(a,b,c){b.startWithParent=
b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});return b})(this,f,k);return f.Marionette});
define("handlebars.translate",["jquery","module","handlebars"],function(k,f,c){function l(c,f){this.options=f||{};this.i18nCache={};this.text=f.text||{};this.registerHelper(c)}l.prototype={registerHelper:function(c,f){var b="function"===typeof f?f:this.t,e=this;c.registerHelper("i18n",function(a,c){return b.call(e,a)});return this},setText:function(c){this.text=c;return this},setOptions:function(c,f){if(c){if(f){var b=c;c={};c[b]=f}k.extend(this.options,c);c.text&&this.setText(c.text)}return this},
t:function(c){if(this.i18nCache[c])return this.i18nCache[c];if(0<c.indexOf(".")){var e=this.text;for(var b=c.split("."),f=0;e&&f<b.length;)e=e[b[f++]]}else e=this.text[c];return e?this.i18nCache[c]=e:(k.log("Handlebars.i18n: translation for the key '"+c+"' could not be found"),this.options.debug?c:"")}};return new l(c,{text:f.config().i18n||{}})});
define("callbacks",["require","jquery"],function(k){function f(){var k=this;this.reset=function(){return f.prototype.reset.apply(k,arguments)};this.run=function(c,l){return f.prototype.run.apply(k,arguments)};this.addSync=function(c,l){return f.prototype.addSync.apply(k,arguments)};this.add=function(c,l){return f.prototype.add.apply(k,arguments)};this._deferred=c.Deferred();this._callbacks=[];this._$deferreds=[this._deferred]}var c=k("jquery");f.prototype.add=function(c,e){this._callbacks.push({cb:c,
ctx:e});return this._deferred.done(function(f,b){e&&(f=e);return c.call(f,b)})};f.prototype.addSync=function(c,e){this._$deferreds.push(e);this._callbacks.push({cb:c});return this._deferred.done(function(e,b){return c.call(e,b)})};f.prototype.run=function(f,e){this._deferred.resolve(e,f);return c.when.apply(c,this._$deferreds).done(function(){})};f.prototype.reset=function(){var f=this._callbacks;this._deferred=c.Deferred();this._callbacks=[];return _.each(f,function(c){return this.add(c.cb,c.ctx)},
this)};return f});define("models/TechDataModel",["require","backbone"],function(k){return k("backbone").Model.extend({defaults:{index:0,id:0,parent:null,url:""},url:function(){return this.get("url")},parse:function(f){this.set("groups",f.groups);this.get("parent").set("techData",this)}})});
define("models/DataModel",["require","jquery","backbone","./TechDataModel"],function(k){var f=k("jquery"),c=k("backbone"),l=k("./TechDataModel");return c.Model.extend({defaults:{filters:null,models:null},initialize:function(){_.bindAll(this,"parse","fetchModelTechData")},parse:function(e){this.set("models",new c.Collection(e.models));this.set("filters",new c.Collection(e.filters))},fetchModelTechData:function(c){var e=this,b=[],k=[],a;var d=function(a){e.trigger("datamodel:fetchtechdata:complete",
a)};(function(){_.each(c,function(c,d){a=e.get("models").get(c);a.get("techData")?k[d]=a.get("techData"):b.push(new l({url:a.get("techDataJSON"),index:d,id:c,parent:a}))});if(0===b.length)d(k);else{var m=_.invoke(b,"fetch");f.when.apply(f,m).done(function(){_.each(b,function(a){var b=a.get("index");k[b]=a});d(k)}).fail(function(){f.log("JSON:techdata:load:fail")})}})()}})});
define("app","require jquery marionette handlebars handlebars.translate callbacks ./models/DataModel".split(" "),function(k){var f=k("jquery"),c=k("marionette"),l=k("handlebars"),e=k("handlebars.translate"),m=k("callbacks"),b=k("./models/DataModel");e.setText(bm.i18n.modelComparison);c.Application.prototype.start=function(a){var b=this;this.triggerMethod("initialize:before, options");f.when(this._initCallbacks.run(a,this)).done(function(){b.triggerMethod("initialize:after",a);b.triggerMethod("start",
a)})};c.Application.prototype.addSyncCallback=function(a,b){return this._initCallbacks.addSync(a,b)};l.registerHelper("isOdd",function(a,b){return 0===a%2?b.fn(this):b.inverse(this)});var u=new c.Application({name:"ModelComparison",_initCallbacks:new m,$el:f("#by_modelcomp")});u.addInitializer(function(){if(u.$el.data("model-url")){var a=f.Deferred();u.addSyncCallback(function(){u.dataModel=new b;u.dataModel.fetch({url:u.$el.data("model-url"),success:function(b){a.resolve()},error:function(a){f.log("Modelcomp - initializer - dataModel - json error")}})},
a)}else f.log("Modelcomp - initializer - dataModel - no json url")});return u});define("routers/AppRouter",["require","marionette"],function(k){return k("marionette").AppRouter.extend({appRoutes:{":modelA(/:modelB)":"indexRoute","*invalid":"defaultRoute","":"defaultRoute"}})});
define("models/SelectedModelsCollection",["require","jquery","backbone"],function(k){var f=k("jquery");return k("backbone").Collection.extend({initialize:function(c){_.bindAll(this,"validate","removeSelectedModel","addSelectedModels","getSelectedIds","getSelectionURL","hasCompleteSelection")},validate:function(){1===this.getSelectedIds().length&&this.add({id:null,title:bm.i18n.modelComparison.emptySelection,image:bm.config.modelComparison.imageEmptySelection});2!==this.length&&this.trigger("selectedmodels:validate:error")},
addSelectedModels:function(c){var k=this;f.isArray(c)?(this.reset({silent:!0}),_.each(c,function(c,f){c&&(k.remove(k.at(f)),k.add(c,{at:f}))})):(k.remove(k.at(1)),k.add(c));this.validate();this.trigger("selectedmodels:change")},removeSelectedModel:function(c){this.at(0)===this.get(c)?(c=this.at(1).clone(),this.reset(),this.add(c)):this.remove(c);this.validate();this.trigger("selectedmodels:change")},getSelectedIds:function(){return this.pluck("id")},getSelectionURL:function(){return _.compact(this.getSelectedIds()).join("/")},
hasCompleteSelection:function(){return 2===_.compact(this.getSelectedIds()).length}})});
define("models/TableDataCollection",["require","backbone"],function(k){var f=k("backbone");return f.Collection.extend({initialize:function(){_.bindAll(this,"parse")},parse:function(c){var k=this;this.reset();_.each(c,function(c,l){_.each(c.get("groups"),function(b){var c=k.add({id:b.id,label:b.label,subgroups:new f.Collection});_.each(b.subgroups,function(a,b){if(a){var d=c.get("subgroups").add({id:a.id,index:b,label:a.label,rows:new f.Collection});_.each(a.values,function(a,b){b=d.get("rows").add({id:a.id,
label:a.label,hideLabel:!1,index:b,columns:[]});!0===a.hideLabel&&b.set("hideLabel",!0);b.get("columns")[l]=a.values})}})})})}})});
define("templates",["handlebars"],function(k){this.JST=this.JST||{};this.JST.selectedmodels_item=k.template({1:function(f,c,k,e,m){k=f.lambda;f=f.escapeExpression;return'\x3cimg class\x3d"by_responsive_image"\n   data-resp-src\x3d\'[{\n           "mq": "bm_modelcomp_selectedmodels_asset_s",\n           "src": "'+f(k(null!=c?c.s:c,c))+'",\n           "default": true\n         },{\n           "mq": "bm_modelcomp_selectedmodels_asset_m",\n           "src": "'+f(k(null!=c?c.m:c,c))+"\"\n         }\n       ]'/\x3e\n"},
3:function(f,c,k,e,m){var b,l;e=null!=c?c:f.nullContext||{};var a=k.helperMissing,d=f.escapeExpression;return'    \x3ca class\x3d"by_modelcomp_btn by_modelcomp_btn_view by_configure_icon"'+(null!=(b=k["if"].call(e,null!=c?c.configuratorNewWindow:c,{name:"if",hash:{},fn:f.program(4,m,0),inverse:f.noop,data:m}))?b:"")+' href\x3d"'+d((l=null!=(l=k.configuratorUrl||(null!=c?c.configuratorUrl:c))?l:a,"function"===typeof l?l.call(e,{name:"configuratorUrl",hash:{},data:m}):l))+'"\x3e\n      \x3cspan class\x3d"by_btn_label"\x3e'+
d((k.i18n||c&&c.i18n||a).call(e,"configure",{name:"i18n",hash:{},data:m}))+"\x3c/span\x3e\n    \x3c/a\x3e\n"},4:function(f,c,k,e,m){return' target\x3d"_blank"'},compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,c,k,e,m){var b,l,a=null!=c?c:f.nullContext||{},d=k.helperMissing,q=f.escapeExpression,v='\x3cdiv class\x3d"by_modelcomp_selectedmodels_title"\x3e\n\t\x3cspan\x3e'+q((b=null!=(b=k.title||(null!=c?c.title:c))?b:d,"function"===typeof b?b.call(a,{name:"title",hash:{},data:m}):b))+"\x3c/span\x3e\n\x3c/div\x3e\n";
e=(b=null!=(b=k.getImage||(null!=c?c.getImage:c))?b:d,l={name:"getImage",hash:{},fn:f.program(1,m,0),inverse:f.noop,data:m},"function"===typeof b?b.call(a,l):b);k.getImage||(e=k.blockHelperMissing.call(c,e,l));null!=e&&(v+=e);return v+'\x3cdiv class\x3d"by_modelcomp_selectedmodels_controls"\x3e\n  \x3ca class\x3d"by_modelcomp_btn by_modelcomp_btn_change by_delete_icon" href\x3d"#"\x3e\n    \x3cspan class\x3d"by_btn_label"\x3e'+q((k.i18n||c&&c.i18n||d).call(a,"change",{name:"i18n",hash:{},data:m}))+
'\x3c/span\x3e\n  \x3c/a\x3e\n  \x3ca class\x3d"by_modelcomp_btn by_modelcomp_btn_view by_info_icon" href\x3d"'+q((b=null!=(b=k.modelPageUrl||(null!=c?c.modelPageUrl:c))?b:d,"function"===typeof b?b.call(a,{name:"modelPageUrl",hash:{},data:m}):b))+'"\x3e\n    \x3cspan class\x3d"by_btn_label"\x3e'+q((k.i18n||c&&c.i18n||d).call(a,"view",{name:"i18n",hash:{},data:m}))+"\x3c/span\x3e\n  \x3c/a\x3e\n"+(null!=(e=k["if"].call(a,null!=c?c.configuratorUrl:c,{name:"if",hash:{},fn:f.program(3,m,0),inverse:f.noop,
data:m}))?e:"")+"\x3c/div\x3e"},useData:!0});this.JST.selectedmodels_view=k.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,c,k,e,m){return"\x3c!-- unused --\x3e"},useData:!0});this.JST.selector_item=k.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,c,k,e,m){var b,l;e=f.escapeExpression;var a=f.lambda;return'\x3cdiv class\x3d"by_modelcomp_selector_item_title"\x3e\n  \x3cspan\x3e'+e((l=null!=(l=k.title||(null!=c?c.title:c))?l:k.helperMissing,"function"===typeof l?l.call(null!=c?c:f.nullContext||
{},{name:"title",hash:{},data:m}):l))+'\x3c/span\x3e\n\x3c/div\x3e\n\x3c!-- \x3cdiv class\x3d"by_wrap"\x3e --\x3e\n  \x3cimg class\x3d"by_responsive_image"\n     data-resp-src\x3d\'[{\n             "mq": "bm_modelcomp_selector_asset_s",\n             "src": "'+e(a(null!=(b=null!=(b=null!=c?c.images:c)?b.selector:b)?b.s:b,c))+'",\n             "default": true\n           },{\n             "mq": "bm_modelcomp_selector_asset_m",\n             "src": "'+e(a(null!=(b=null!=(b=null!=c?c.images:c)?b.selector:
b)?b.m:b,c))+"\"\n           }\n         ]'/\x3e\n\x3c!-- \x3c/div\x3e --\x3e"},useData:!0});this.JST.selector_view=k.template({1:function(f,c,k,e,m){var b;e=null!=c?c:f.nullContext||{};var l=k.helperMissing;f=f.escapeExpression;return'    \x3ca class\x3d"by_modelcomp_selector_filter_item by_collapsible_filter_item" href\x3d"#" data-id\x3d'+f((b=null!=(b=k.id||(null!=c?c.id:c))?b:l,"function"===typeof b?b.call(e,{name:"id",hash:{},data:m}):b))+"\x3e"+f((b=null!=(b=k.label||(null!=c?c.label:c))?b:
l,"function"===typeof b?b.call(e,{name:"label",hash:{},data:m}):b))+"\x3c/a\x3e\n"},compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,c,k,e,m){var b;e=null!=c?c:f.nullContext||{};return'\x3cdiv id\x3d"by_modelcomp_selector_filter" class\x3d"by_collapsible by_collapsible_filter by_modelcomp_selector_filter"\x3e\n  \x3ca href\x3d"#" class\x3d"by_modelcomp_selector_filter_head by_collapsible_head"\x3e\x3c/a\x3e\n  \x3cdiv class\x3d"by_modelcomp_selector_filter_content by_collapsible_content"\x3e\n'+(null!=
(b=k.each.call(e,c,{name:"each",hash:{},fn:f.program(1,m,0),inverse:f.noop,data:m}))?b:"")+'  \x3c/div\x3e\n\x3c/div\x3e\n\x3cdiv class\x3d"by_modelcomp_selector_empty"\x3e'+f.escapeExpression((k.i18n||c&&c.i18n||k.helperMissing).call(e,"emptySelectorList",{name:"i18n",hash:{},data:m}))+'\x3c/div\x3e\n\x3cdiv id\x3d"by_modelcomp_selector_list" class\x3d"by_modelcomp_selector_list"\x3e\x3c/div\x3e'},useData:!0});this.JST.table_content_item=k.template({1:function(f,c,k,e,m){return'    \x3cdiv class\x3d"by_comp_tablehead"\x3e\n       \x3cspan\x3e'+
f.escapeExpression(f.lambda(c,c))+"\x3c/span\x3e\n    \x3c/div\x3e\n"},3:function(f,c,k,e,m){var b;e=null!=c?c:f.nullContext||{};return(null!=(b=k["if"].call(e,null!=c?c.label:c,{name:"if",hash:{},fn:f.program(4,m,0),inverse:f.noop,data:m}))?b:"")+"\n"+(null!=(b=k.each.call(e,(b=m&&m.root)&&b.getRows,{name:"each",hash:{},fn:f.program(6,m,0),inverse:f.noop,data:m}))?b:"")+"\n"},4:function(f,c,k,e,m){var b;return'      \x3cdiv class\x3d"by_comp_table_section_head"\x3e'+f.escapeExpression((b=null!=(b=
k.label||(null!=c?c.label:c))?b:k.helperMissing,"function"===typeof b?b.call(null!=c?c:f.nullContext||{},{name:"label",hash:{},data:m}):b))+"\x3c/div\x3e\n"},6:function(f,c,k,e,m){var b;e=null!=c?c:f.nullContext||{};return'    \x3cdiv class\x3d"by_comp_table_row"\x3e\n      \x3cdiv class\x3d"by_comp_table_col by_comp_table_col_left"\x3e\n'+(null!=(b=k.each.call(e,null!=(b=null!=c?c.columns:c)?b["0"]:b,{name:"each",hash:{},fn:f.program(7,m,0),inverse:f.program(9,m,0),data:m}))?b:"")+'      \x3c/div\x3e\n      \x3cdiv class\x3d"by_comp_table_col by_comp_table_col_center"\x3e\n'+
(null!=(b=k.unless.call(e,null!=c?c.hideLabel:c,{name:"unless",hash:{},fn:f.program(11,m,0),inverse:f.noop,data:m}))?b:"")+'      \x3c/div\x3e\n      \x3cdiv class\x3d"by_comp_table_col by_comp_table_col_right"\x3e\n'+(null!=(b=k.each.call(e,null!=(b=null!=c?c.columns:c)?b["1"]:b,{name:"each",hash:{},fn:f.program(7,m,0),inverse:f.program(13,m,0),data:m}))?b:"")+"      \x3c/div\x3e\n    \x3c/div\x3e\n"},7:function(f,c,k,e,m){var b;return"          \x3cp\x3e"+(null!=(b=f.lambda(c,c))?b:"")+"\x3c/p\x3e\n"},
9:function(f,c,k,e,m){return"          \x3cp\x3e\x26ndash;\x3c/p\x3e\n"},11:function(f,c,k,e,m){var b;return"          "+f.escapeExpression((b=null!=(b=k.label||(null!=c?c.label:c))?b:k.helperMissing,"function"===typeof b?b.call(null!=c?c:f.nullContext||{},{name:"label",hash:{},data:m}):b))+"\n"},13:function(f,c,k,e,m){return"          \x3cp\x3e-\x3c/p\x3e\n"},compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,c,k,e,m){var b,l;e=null!=c?c:f.nullContext||{};var a=k.helperMissing;var d=f.escapeExpression;
d='\x3cdiv class\x3d"by_tab_wrapper_acc"\x3e\n  \x3ca href\x3d"#tab'+d((b=null!=(b=k.itemIndex||(null!=c?c.itemIndex:c))?b:a,"function"===typeof b?b.call(e,{name:"itemIndex",hash:{},data:m}):b))+'" class\x3d"by_tab_link"\x3e'+d((b=null!=(b=k.label||(null!=c?c.label:c))?b:a,"function"===typeof b?b.call(e,{name:"label",hash:{},data:m}):b))+'\x3c/a\x3e\n  \x3ci\x3e\x3c/i\x3e\n\x3c/div\x3e\n\x3csection id\x3d"tab'+d((b=null!=(b=k.itemIndex||(null!=c?c.itemIndex:c))?b:a,"function"===typeof b?b.call(e,
{name:"itemIndex",hash:{},data:m}):b))+'" class\x3d"by_tab_content"\x3e\n  \x3cdiv class\x3d"by_comp_tablehead_wrap"\x3e\n';a=(b=null!=(b=k.selectedModels||(null!=c?c.selectedModels:c))?b:a,l={name:"selectedModels",hash:{},fn:f.program(1,m,0),inverse:f.noop,data:m},"function"===typeof b?b.call(e,l):b);k.selectedModels||(a=k.blockHelperMissing.call(c,a,l));null!=a&&(d+=a);return d+"  \x3c/div\x3e\n\n"+(null!=(a=k.each.call(e,null!=c?c.getSubgroups:c,{name:"each",hash:{},fn:f.program(3,m,0),inverse:f.noop,
data:m}))?a:"")+"\x3c/section\x3e"},useData:!0});this.JST.table_tab_item=k.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,c,k,e,m){var b;e=null!=c?c:f.nullContext||{};var l=k.helperMissing;f=f.escapeExpression;return'\x3ca href\x3d"#tab'+f((b=null!=(b=k.itemIndex||(null!=c?c.itemIndex:c))?b:l,"function"===typeof b?b.call(e,{name:"itemIndex",hash:{},data:m}):b))+'" data-id\x3d"'+f((b=null!=(b=k.id||(null!=c?c.id:c))?b:l,"function"===typeof b?b.call(e,{name:"id",hash:{},data:m}):b))+'" class\x3d"by_tab_link"\x3e'+
f((b=null!=(b=k.label||(null!=c?c.label:c))?b:l,"function"===typeof b?b.call(e,{name:"label",hash:{},data:m}):b))+"\x3c/a\x3e\x3ci\x3e\x3c/i\x3e"},useData:!0});this.JST.table_view_org=k.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,c,k,e,m){return'\x3cdiv class\x3d"by_tabbed_navigation"\x3e\n  \x3c!-- list of tab links, displayed on larger screens --\x3e\n  \x3cul class\x3d"by_tab_nav_list"\x3e\n    \x3cli class\x3d"by_tab_wrapper by_first by_active"\x3e\n      \x3ca href\x3d"#tab1" class\x3d"by_tab_link"\x3eEngine\x3c/a\x3e\n    \x3c/li\x3e\n    \x3cli class\x3d"by_tab_wrapper"\x3e\n      \x3ca href\x3d"#tab2" class\x3d"by_tab_link"\x3eTab Two\x3c/a\x3e\n    \x3c/li\x3e\n    \x3cli class\x3d"by_tab_wrapper"\x3e\n      \x3ca href\x3d"#tab3" class\x3d"by_tab_link"\x3eTab Three with a pretty long name\x3c/a\x3e\n    \x3c/li\x3e\n    \x3cli class\x3d"by_tab_wrapper"\x3e\n      \x3ca href\x3d"#tab4" class\x3d"by_tab_link"\x3eTab Four\x3c/a\x3e\n    \x3c/li\x3e\n  \x3c/ul\x3e\n  \x3c!-- tab content and accordion tab links--\x3e\n  \x3cdiv class\x3d"by_tab_content_list"\x3e\n    \x3cdiv class\x3d"by_tab_wrapper_acc by_active"\x3e\n      \x3ca href\x3d"#tab1" class\x3d"by_tab_link"\x3eEngine\x3c/a\x3e\n    \x3c/div\x3e\n    \x3csection id\x3d"tab1" class\x3d"by_tab_content by_active"\x3e\n\n        \x3cdiv class\x3d"by_tech_row"\x3e\n          \x3cdiv class\x3d"by_tech_label"\x3eFlexFuel Powertrain Engine Capacity:\x3c/div\x3e\n          \x3cdiv class\x3d"by_tech_data"\x3e5998cc\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"by_tech_row"\x3e\n          \x3cdiv class\x3d"by_tech_label"\x3eMax. Power:\x3c/div\x3e\n          \x3cdiv class\x3d"by_tech_data"\x3e552bhp / 560 PS / 412 kW @ 6100rpm\x3c/div\x3e\n        \x3c/div\x3e\n\n    \x3c/section\x3e\n\n    \x3cdiv class\x3d"by_tab_wrapper_acc"\x3e\n      \x3ca href\x3d"#tab2" class\x3d"by_tab_link"\x3eTab Two\x3c/a\x3e\n    \x3c/div\x3e\n    \x3csection id\x3d"tab2" class\x3d"by_tab_content"\x3e\n\n\n        \x3cdiv class\x3d"by_tech_row"\x3e\n          \x3cdiv class\x3d"by_tech_label"\x3eT2 C1 Key 1\x3c/div\x3e\n          \x3cdiv class\x3d"by_tech_data"\x3eValue 1\x3c/div\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"by_tech_row"\x3e\n          \x3cdiv class\x3d"by_tech_label"\x3eKey 2\x3c/div\x3e\n          \x3cdiv class\x3d"by_tech_data"\x3eValue 2 - long and breaking in more than one line for demonstration purposes\x3c/div\x3e\n        \x3c/div\x3e\n\n    \x3c/section\x3e\n    \x3cdiv class\x3d"by_tab_wrapper_acc"\x3e\n      \x3ca href\x3d"#tab3" class\x3d"by_tab_link"\x3eTab Three with a pretty long name\x3c/a\x3e\n    \x3c/div\x3e\n    \x3csection id\x3d"tab3" class\x3d"by_tab_content"\x3e\n\n        \x3cdiv class\x3d"by_tech_row"\x3e\n          \x3cdiv class\x3d"by_tech_label"\x3eT3 C1 Key 1\x3c/div\x3e\n          \x3cdiv class\x3d"by_tech_data"\x3eValue 1 - long and breaking in more than one line for demonstration purposes\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"by_tech_row"\x3e\n          \x3cdiv class\x3d"by_tech_label"\x3eKey 2\x3c/div\x3e\n          \x3cdiv class\x3d"by_tech_data"\x3eValue 2\x3c/div\x3e\n        \x3c/div\x3e\n\n    \x3c/section\x3e\n    \x3cdiv class\x3d"by_tab_wrapper_acc"\x3e\n      \x3ca href\x3d"#tab4" class\x3d"by_tab_link"\x3eTab Four\x3c/a\x3e\n    \x3c/div\x3e\n    \x3csection id\x3d"tab4" class\x3d"by_tab_content"\x3e\n\n        \x3cdiv class\x3d"by_tech_row"\x3e\n          \x3cdiv class\x3d"by_tech_label"\x3eT4 C1 Key 1\x3c/div\x3e\n          \x3cdiv class\x3d"by_tech_data"\x3eValue 1\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"by_tech_row"\x3e\n          \x3cdiv class\x3d"by_tech_label"\x3eKey 2\x3c/div\x3e\n          \x3cdiv class\x3d"by_tech_data"\x3eValue 2\x3c/div\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"by_tech_row"\x3e\n          \x3cdiv class\x3d"by_tech_label"\x3eT4 C2 Key 3 - long and breaking in more than one line for demonstration purposes\x3c/div\x3e\n          \x3cdiv class\x3d"by_tech_data"\x3eValue 3\x3c/div\x3e\n        \x3c/div\x3e\n\n    \x3c/section\x3e\x3c!-- // tpl modelcomparison techdata --\x3e\n  \x3c/div\x3e\n\x3c/div\x3e'},
useData:!0});this.JST.table_view=k.template({compiler:[7,"\x3e\x3d 4.0.0"],main:function(f,c,k,e,m){return'\x3cdiv class\x3d"by_tabbed_navigation by_clearfix"\x3e\n  \x3cul id\x3d"by_comp_table_tabs" class\x3d"by_tab_nav_list"\x3e\x3c/ul\x3e\n  \x3cdiv id\x3d"by_comp_table_content" class\x3d"by_tab_content_list"\x3e\x3c/div\x3e\n\x3c/div\x3e'},useData:!0});return this.JST});
define("views/SelectedModelsItem",["require","jquery","marionette","../templates"],function(k){var f=k("jquery"),c=k("marionette");k=k("../templates");return c.ItemView.extend({triggers:{"click a.by_modelcomp_btn_change":"change:click"},tagName:"div",className:"by_modelcomp_selectedmodels_item",template:k.selectedmodels_item,templateHelpers:{getImage:function(){return this.id?0===this.itemIndex?this.images&&this.images.selectedModelsLeft?this.images.selectedModelsLeft:bm.config.modelComparison.defaultModelsLeft:
this.images&&this.images.selectedModelsRight?this.images.selectedModelsRight:bm.config.modelComparison.defaultModelsRight:this.image}},initialize:function(c){_.bindAll.apply(_,[this].concat(_.functions(this)))},onRender:function(){f.log("ModelComp - SelectedModelsItem - onRender");f(".by_responsive_image",this.$el).bm_responsiveImage({disableLazyImgs:!0})},serializeData:function(){var c=this.model.toJSON();c.itemIndex=this.options.itemIndex;return c}})});
define("views/SelectedModelsView",["require","jquery","marionette","./SelectedModelsItem"],function(k){var f=k("jquery"),c=k("marionette");k=k("./SelectedModelsItem");return c.CollectionView.extend({itemView:k,itemViewOptions:function(c,e){return{itemIndex:e}},initialize:function(){_.bindAll.apply(_,[this].concat(_.functions(this)));this.listenTo(this.collection,"selectedmodels:change",this.onCollectionChange)},toggleControls:function(c){this.children.each(function(e){e.$el.find(".by_modelcomp_selectedmodels_controls").toggle(c)})},
onCollectionChange:function(){this.$el.find(".by_modelcomp_selectedmodels_item:first").addClass("by_first")},onRender:function(){f.log("ModelComp - SelectedModelsView - onRender")}})});
define("views/SelectorItem",["require","jquery","marionette","../templates"],function(k){var f=k("jquery"),c=k("marionette");k=k("../templates");return c.ItemView.extend({tagName:"a",className:"by_modelcomp_selector_item",template:k.selector_item,triggers:{click:"selectorlist:click"},constructor:function(f){this.attributes={href:"#","data-id":f.model.id};c.ItemView.prototype.constructor.apply(this,arguments)},initialize:function(c){_.bindAll.apply(_,[this].concat(_.functions(this)))},onRender:function(){f.log("ModelComp - SelectorListItem - onRender");
f(".by_responsive_image",this.$el).bm_responsiveImage({disableLazyImgs:!0})}})});
define("views/SelectorView",["require","jquery","marionette","./SelectorItem","../templates"],function(k){var f=k("jquery"),c=k("marionette"),l=k("./SelectorItem");k=k("../templates");return c.CompositeView.extend({template:k.selector_view,itemView:l,itemViewContainer:"#by_modelcomp_selector_list",defaultFilter:null,currentSelectedIds:null,currentFilter:null,events:{"click .by_modelcomp_selector_filter_item":"onFilterItemClick"},initialize:function(){_.bindAll.apply(_,[this].concat(_.functions(this)));
this.defaultFilter="all";this.currentSelectedIds=[];this.currentFilter=this.defaultFilter},toggleView:function(c){this.$el&&this.$el.is(":visible")!==c&&this.$el.slideToggle(500)},toggleItems:function(c,f){var b=this;c&&c.length&&(b.currentSelectedIds=c);f&&(b.currentFilter=f);c=this.model.findWhere({id:b.currentFilter});b.$el.find(".by_modelcomp_selector_filter_head").text(c.get("label"));b.$el.find(".by_modelcomp_selector_filter_item").removeClass("by_active");b.$el.find(".by_modelcomp_selector_filter_item[data-id\x3d'"+
b.currentFilter+"']").addClass("by_active");b.children.each(function(c){var a=-1<_.indexOf(b.currentSelectedIds,c.$el.data("id")),d=b.currentFilter===b.defaultFilter||c.model.get("categories")===b.currentFilter;a||!d?c.$el.hide():c.$el.show()});b.$el.find(".by_modelcomp_selector_empty").hide();0===b.$el.find(".by_modelcomp_selector_item:visible").length&&b.$el.find(".by_modelcomp_selector_empty").show()},onShow:function(){this.render()},onFilterItemClick:function(c){c.preventDefault();c=f(c.currentTarget);
this.toggleItems(null,c.data("id"));return!1},onRender:function(){f.log("ModelComp - SelectorView - onRender");this.$el.find(".by_modelcomp_selector_filter_item:first").addClass("by_first");f(".by_collapsible",this.$el).bm_collapsible()}})});
define("views/TableTabItem",["require","marionette","../templates"],function(k){var f=k("marionette");k=k("../templates");return f.ItemView.extend({template:k.table_tab_item,tagName:"li",className:"by_tab_wrapper",initialize:function(c){_.bindAll.apply(_,[this].concat(_.functions(this)))},serializeData:function(){var c={itemIndex:this.options.itemIndex},f=this.model.toJSON();return c=_.extend(f,c)}})});
define("views/TableTabView",["require","jquery","marionette","./TableTabItem"],function(k){var f=k("jquery"),c=k("marionette");k=k("./TableTabItem");return c.CollectionView.extend({itemView:k,itemViewOptions:function(c,e){return{itemIndex:e}},initialize:function(){_.bindAll.apply(_,[this].concat(_.functions(this)))},onRender:function(){f.log("ModelComp - TableView - TabView - onRender")}})});
define("views/TableContentItem",["require","marionette","../templates"],function(k){var f=k("marionette");k=k("../templates");return f.ItemView.extend({template:k.table_content_item,templateHelpers:{getSubgroups:function(){return this.subgroups.toJSON()},getRows:function(){return this.rows.toJSON()},isOddRow:function(){return 0===this.index%2}},initialize:function(){_.bindAll.apply(_,[this].concat(_.functions(this)))},serializeData:function(){var c={itemIndex:this.options.itemIndex,selectedModels:this.options.selectedModelsCollection.pluck("title")},
f=this.model.toJSON();return c=_.extend(f,c)},onRender:function(){this.$el.find(".by_comp_tablehead:first").addClass("by_first")}})});
define("views/TableContentView",["require","jquery","marionette","./TableContentItem"],function(k){var f=k("jquery"),c=k("marionette");k=k("./TableContentItem");return c.CollectionView.extend({itemView:k,itemViewOptions:function(c,e){return{itemIndex:e,selectedModelsCollection:this.options.selectedModelsCollection}},initialize:function(){_.bindAll.apply(_,[this].concat(_.functions(this)))},onRender:function(){f.log("ModelComp - TableView - ContentView - onRender")}})});
define("views/TableView","require jquery marionette ./TableTabView ./TableContentView ../templates".split(" "),function(k){var f=k("jquery"),c=k("marionette"),l=k("./TableTabView"),e=k("./TableContentView");k=k("../templates");return c.ItemView.extend({template:k.table_view,initialize:function(){_.bindAll.apply(_,[this].concat(_.functions(this)));this.tabView=new l({collection:this.collection});this.contentView=new e({collection:this.collection,selectedModelsCollection:this.options.selectedModelsCollection})},
onRender:function(){f.log("ModelComp - TableView - onRender");this.tabView.setElement("#by_comp_table_tabs");this.tabView.render();this.contentView.setElement("#by_comp_table_content");this.contentView.render();f(".by_tabbed_navigation",this.$el).bm_tabNavigation()}})});
define("controllers/AppController","require jquery app marionette ../models/SelectedModelsCollection ../models/TableDataCollection ../views/SelectedModelsView ../views/SelectorView ../views/TableView".split(" "),function(k){var f=k("jquery"),c=k("app"),l=k("marionette"),e=k("../models/SelectedModelsCollection"),m=k("../models/TableDataCollection"),b=k("../views/SelectedModelsView"),u=k("../views/SelectorView"),a=k("../views/TableView");return l.Controller.extend({initialize:function(){_.bindAll(this,
"initializeModels","initializeViews","toggleLoader","onSelectedModelsChange","onSelectorListClick","onSelectedModelsChangeClick","defaultRoute","indexRoute","noop")},initializeModels:function(){c.selectedModels=new e;c.tableData=new m},initializeViews:function(){c.addRegions({selectedModelsRegion:"#by_modelcomp_selectedmodels",selectorRegion:"#by_modelcomp_selector",tableRegion:"#by_modelcomp_table"});c.selectedModelsView=new b({el:f("#by_modelcomp_selectedmodels"),collection:c.selectedModels});c.selectorView=
new u({el:f("#by_modelcomp_selector"),model:c.dataModel.get("filters"),collection:c.dataModel.get("models")});c.tableView=new a({el:f("#by_modelcomp_table"),selectedModelsCollection:c.selectedModels,collection:c.tableData});c.selectedModelsRegion.show(c.selectedModelsView);c.selectorRegion.show(c.selectorView);c.tableRegion.show(c.tableView)},initializeListeners:function(){this.listenTo(c.dataModel,"datamodel:fetchtechdata:complete",this.onFetchTechDataComplete);this.listenTo(c.selectedModels,"selectedmodels:change",
this.onSelectedModelsChange);this.listenTo(c.selectedModels,"selectedmodels:validate:error",this.onApplicationError);this.listenTo(c.selectorView,"itemview:selectorlist:click",this.onSelectorListClick);this.listenTo(c.selectedModelsView,"itemview:change:click",this.onSelectedModelsChangeClick)},toggleLoader:function(a){f("#by_modelcomp_loader").toggle(a)},updateNavigationRoute:function(){c.router.navigate(c.selectedModels.getSelectionURL())},onSelectedModelsChange:function(){var a=c.selectedModels.pluck("id"),
b=c.selectedModels.hasCompleteSelection();c.selectedModelsView.toggleControls(b);c.selectorView.toggleView(!b);c.selectorView.toggleItems(a);c.tableView.$el.hide();b&&(c.controller.toggleLoader(!0),c.dataModel.fetchModelTechData(a))},onFetchTechDataComplete:function(a){c.controller.toggleLoader(!1);c.tableData.parse(a);c.tableView.$el.show();c.tableView.render()},onSelectorListClick:function(a){a=a.model.get("id");a=(a=c.dataModel.get("models").get(a))?a.clone():null;c.selectedModels.addSelectedModels(a);
this.updateNavigationRoute()},onSelectedModelsChangeClick:function(a){c.selectedModels.removeSelectedModel(a.model);this.updateNavigationRoute();this.scrollToTarget("#by_modelcomp_selector")},onApplicationError:function(){var a=c.$el.data("redirect-url");a&&(window.location.href=a)},defaultRoute:function(){this.onApplicationError()},indexRoute:function(a,b){a=c.dataModel.get("models").get(a);b=c.dataModel.get("models").get(b);a=a?a.clone():null;b=b?b.clone():null;c.selectedModels.addSelectedModels([a,
b]);this.updateNavigationRoute()},noop:function(){},scrollToTarget:function(a){a&&f("html, body").animate({scrollTop:f(a).offset().top},500)}})});
(function(){"function"===typeof bm_jquery&&define("jquery",function(){return bm_jquery});"object"===typeof Handlebars&&define("handlebars",function(){return Handlebars});requirejs.config(bm.config.modelComparison.requirejs);define("main",["require","app","./routers/AppRouter","./controllers/AppController"],function(k){var f=k("app"),c=k("./routers/AppRouter"),l=k("./controllers/AppController");f.addInitializer(function(){f.controller=new l;f.controller.toggleLoader(!0);f.router=new c({controller:f.controller})});
f.on("initialize:after",function(c){f.controller.initializeModels();f.controller.initializeViews();f.controller.initializeListeners();Backbone.history&&Backbone.history.start();f.controller.toggleLoader(!1)});f.start()})})();require(["main"]);